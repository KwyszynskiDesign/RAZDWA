<script>
  // Redirect to SPA if visited directly
  if (window.location.pathname.includes('/categories/')) {
    window.location.href = "/#/druk-cad";
  }
</script>
<h2>Druk CAD wielkoformatowy</h2>
<div class="form">
  <div class="cad-mode-format-row">
    <div>
      <label for="cad-mode">Tryb:</label>
      <select id="cad-mode">
        <option value="bw">Czarno-bia≈Çy</option>
        <option value="color">Kolorowy</option>
      </select>
    </div>
    <div>
      <label for="cad-format">Format:</label>
      <select id="cad-format">
        <option value="A0p">A0+ (914 mm)</option>
        <option value="A0">A0 (841 mm)</option>
        <option value="A1">A1 (594 mm)</option>
        <option value="A2">A2 (420 mm)</option>
        <option value="A3">A3 (297 mm)</option>
      </select>
    </div>
  </div>

  <div class="row">
    <label for="cad-length">D≈Çugo≈õƒá (mm):</label>
    <div style="display: flex; gap: 10px;">
      <input type="number" id="cad-length" value="1292" min="1">
      <button id="cad-use-base" class="secondary" style="white-space: nowrap;">U≈ºyj bazowej</button>
    </div>
    <div id="cad-base-info" class="hint">Wymiar bazowy: 1292 mm</div>
  </div>

  <div class="row" id="qty-sheets-group">
    <label for="qty-sheets">Ilo≈õƒá arkuszy:</label>
    <input type="number" id="qty-sheets" value="1" min="1">
  </div>

  <!-- CAD Ops: sk≈Çadanie + skan wielkoformat -->
  <div class="row" id="cad-ops-section" style="flex-direction:column;gap:16px;margin-top:8px;">
    <h3 style="margin:0;font-size:1rem;font-weight:700;">üóÇÔ∏è CAD Ops: Sk≈Çadanie / Skan wielkoformat</h3>
    <div style="display:flex;flex-wrap:wrap;gap:16px;">
      <div style="flex:1;min-width:200px;">
        <strong>Sk≈Çadanie</strong>
        <div class="row" style="margin-top:8px;">
          <label for="cad-fold-format">Format:</label>
          <select id="cad-fold-format">
            <option value="A0+">A0+</option>
            <option value="A0">A0</option>
            <option value="A1">A1</option>
            <option value="A2">A2</option>
            <option value="A3">A3</option>
            <option value="A3-poprzeczne">A3-poprzeczne</option>
          </select>
        </div>
        <div class="row" style="margin-top:8px;">
          <label for="cad-fold-qty">Ilo≈õƒá (szt):</label>
          <input type="number" id="cad-fold-qty" value="1" min="1" />
        </div>
        <button id="cad-fold-add" class="secondary" style="margin-top:8px;">Dodaj sk≈Çadanie</button>
      </div>
      <div style="flex:1;min-width:200px;">
        <strong>Skanowanie wielkoformatowe</strong>
        <div class="row" style="margin-top:8px;">
          <label for="cad-wf-scan-mm">D≈Çugo≈õƒá (mm):</label>
          <input type="number" id="cad-wf-scan-mm" placeholder="np. 1100" min="1" />
        </div>
        <div class="row" style="margin-top:8px;">
          <label for="cad-wf-scan-qty">Ilo≈õƒá (szt):</label>
          <input type="number" id="cad-wf-scan-qty" value="1" min="1" />
        </div>
        <button id="cad-wf-scan-add" class="secondary" style="margin-top:8px;">Dodaj skan</button>
      </div>
    </div>
    <div id="cad-ops-list" style="display:none;margin-top:8px;padding:10px;background:rgba(34,197,94,0.1);border:1px solid rgba(34,197,94,0.3);border-radius:8px;">
      <strong>Dodane us≈Çugi:</strong>
      <div id="cad-ops-list-items"></div>
      <div style="margin-top:8px;font-weight:700;">Suma us≈Çug: <span id="cad-ops-total">0.00 z≈Ç</span></div>
    </div>
  </div>

  <div class="actions">
    <button id="cad-calculate" class="primary">Oblicz</button>
    <button id="cad-add-to-cart" class="success" disabled>Dodaj do listy</button>
  </div>

  <div id="cad-result-display" style="display: none; margin-top: 20px; padding: 14px; background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 12px;">
    <div style="display: flex; justify-content: space-between;">
      <span id="cad-price-type">Cena formatowa:</span>
      <span id="cad-total-price" style="font-size: 18px; font-weight: 950; color: #22c55e;">-</span>
    </div>
    <div id="cad-express-hint" style="font-size: 12px; color: #f59e0b; display: none;">Zawiera dop≈Çatƒô EXPRESS +20%</div>
  </div>
</div>

<script type="module" src="../js/categories/druk-cad.js"></script>
