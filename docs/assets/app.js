"use strict";(()=>{var j=class{constructor(t,r){this.routes=new Map;this.currentView=null;this.categories=[];this.container=t,this.getCtx=r,window.addEventListener("hashchange",()=>{this.handleRoute().catch(()=>{this.renderHome()})})}setCategories(t){this.categories=t}addRoute(t){this.routes.set(t.id,t)}async handleRoute(){var n;let t=window.location.hash||"#/",r=t.startsWith("#/")?t.slice(2):"";if(r=r.replace(/^\/+/,""),!r){this.renderHome();return}(n=this.currentView)!=null&&n.unmount&&this.currentView.unmount();let a=this.routes.get(r);if(a)this.currentView=a,await a.mount(this.container,this.getCtx());else try{let o=await fetch(`categories/${r}.html`);if(o.ok){this.currentView=null,this.container.innerHTML=await o.text(),this.container.querySelectorAll("script").forEach(l=>{var p;let d=document.createElement("script");d.textContent=(p=l.textContent)!=null?p:"",l.replaceWith(d)});try{let l=await fetch(`categories/${r}.js`);if(l.ok){let d=document.createElement("script");d.textContent=await l.text(),this.container.appendChild(d)}}catch{}}else this.renderHome()}catch{this.renderHome()}}renderHome(){this.container.innerHTML=`
      <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.8);">
        <h2 style="margin:0; font-size: 24px;">Witaj w kalkulatorze Raz Druku Dwa</h2>
        <p style="margin-top: 10px;">Wybierz kategori\u0119 z panelu powy\u017Cej, aby rozpocz\u0105\u0107 obliczenia.</p>
      </div>
    `}start(){this.handleRoute()}};function at(e,t){let r=[...e].sort((o,l)=>o.min-l.min),a=r.find(o=>t>=o.min&&(o.max===null||t<=o.max));if(a)return a;let n=r.find(o=>o.min>=t);return n!=null?n:r[r.length-1]}function ae(e,t){var l;let r=((l=e.rules)!=null?l:[]).find(d=>d.type==="minimum"&&d.unit==="m2"),a=r&&t<r.value?r.value:t,n=at(e.tiers,a);return{basePrice:e.pricing==="per_unit"?a*n.price:n.price,effectiveQuantity:a,tierPrice:n.price}}function oe(e,t,r,a){let n=0,o=[];for(let l of r){let d=a.find(p=>p.id===l);d&&(o.push(d.name),d.type==="percent"?n+=e*d.value:d.type==="fixed_per_unit"?n+=d.value*t:n+=d.value)}return{modifiersTotal:n,appliedModifiers:o}}function ie(e){return 0}function z(e,t,r=[]){var i,c;let{basePrice:a,effectiveQuantity:n,tierPrice:o}=ae(e,t),{modifiersTotal:l,appliedModifiers:d}=oe(a,n,r,(i=e.modifiers)!=null?i:[]),p=a+l;p+=ie(p),p=p;let u=((c=e.rules)!=null?c:[]).find(m=>m.type==="minimum"&&m.unit==="pln");return u&&p<u.value&&(p=u.value),{basePrice:a,effectiveQuantity:n,tierPrice:o,modifiersTotal:l,totalPrice:parseFloat(p.toFixed(2)),appliedModifiers:d}}var ne={drukA4A3:{print:{bw:{A4:[{from:1,to:5,unit:.9},{from:6,to:20,unit:.6},{from:21,to:100,unit:.35},{from:101,to:500,unit:.3},{from:501,to:999,unit:.23},{from:1e3,to:4999,unit:.19},{from:5e3,to:99999,unit:.15}],A3:[{from:1,to:5,unit:1.7},{from:6,to:20,unit:1.1},{from:21,to:100,unit:.7},{from:101,to:500,unit:.6},{from:501,to:999,unit:.45},{from:1e3,to:99999,unit:.33}]},color:{A4:[{from:1,to:10,unit:2.4},{from:11,to:40,unit:2.2},{from:41,to:100,unit:2},{from:101,to:250,unit:1.8},{from:251,to:500,unit:1.6},{from:501,to:999,unit:1.4},{from:1e3,to:99999,unit:1.1}],A3:[{from:1,to:10,unit:4.8},{from:11,to:40,unit:4.2},{from:41,to:100,unit:3.8},{from:101,to:250,unit:3},{from:251,to:500,unit:2.5},{from:501,to:999,unit:1.9},{from:1e3,to:99999,unit:1.6}]}},scan:{auto:[{from:1,to:9,unit:1},{from:10,to:49,unit:.5},{from:50,to:99,unit:.4},{from:100,to:999999999,unit:.25}],manual:[{from:1,to:4,unit:2},{from:5,to:999999999,unit:1}]},email_price:1},drukCAD:{price:{color:{formatowe:{A0p:26,A0:24,A1:12,A2:8.5,A3:5.3},mb:{A0p:21,A0:20,A1:14.5,A2:13.9,A3:12,R1067:30}},bw:{formatowe:{A0p:12.5,A0:11,A1:6,A2:4,A3:2.5},mb:{A0p:10,A0:9,A1:5,A2:4.5,A3:3.5,R1067:12.5}}},base:{A0p:{w:914,l:1292,label:"A0+"},A0:{w:841,l:1189,label:"A0"},A1:{w:594,l:841,label:"A1"},A2:{w:420,l:594,label:"A2"},A3:{w:297,l:420,label:"A3"},R1067:{w:1067,l:0,label:"Roll 1067"}},fold:{A0p:4,A0:3,A1:2,A2:1.5,A3:1,A3L:.7},wfScanPerCm:.08,tolerance:.5},wizytowki:{cyfrowe:{standardPrices:{"85x55":{noLam:{"50":65,"100":75,"150":85,"200":96,"250":110,"300":126,"400":146,"500":170,"1000":290},lam:{"50":160,"100":170,"150":180,"200":190,"250":200,"300":220,"400":240,"500":250,"1000":335}},"90x50":{noLam:{"50":70,"100":79,"150":89,"200":99,"250":120,"300":129,"400":149,"500":175,"1000":300},lam:{"50":170,"100":180,"150":190,"200":200,"250":210,"300":230,"400":250,"500":260,"1000":345}}},softtouchPrices:{"85x55":{noLam:{"50":65,"100":75,"150":85,"200":96,"250":110,"300":126,"400":145,"500":170,"1000":290},lam:{"50":170,"100":190,"150":210,"200":220,"250":230,"300":240,"400":260,"500":270,"1000":380}},"90x50":{noLam:{"50":70,"100":79,"150":89,"200":99,"250":120,"300":129,"400":149,"500":175,"1000":300},lam:{"50":170,"100":190,"150":210,"200":220,"250":230,"300":240,"400":260,"500":270,"1000":390}}},deluxe:{leadTime:"4\u20135 dni roboczych",options:{uv3d_softtouch:{label:"Maker UV 3D + folia SOFTTOUCH",prices:{"50":280,"100":320,"200":395,"250":479,"400":655,"500":778}},uv3d_gold_softtouch:{label:"Maker UV 3D + z\u0142ocenie + folia SOFTTOUCH",prices:{"50":450,"100":550,"200":650,"250":720,"400":850,"500":905}}}}}},banner:{id:"banner",title:"Bannery",unit:"m2",pricing:"per_unit",materials:[{id:"powlekany",name:"Banner powlekany",tiers:[{min:1,max:25,price:53},{min:26,max:50,price:49},{min:51,max:null,price:45}]},{id:"blockout",name:"Banner Blockout",tiers:[{min:1,max:25,price:64},{min:26,max:50,price:59},{min:51,max:null,price:55}]}],modifiers:[{id:"oczkowanie",name:"Oczkowanie (+2.50 z\u0142/m2)",type:"fixed_per_unit",value:2.5},{id:"express",name:"TRYB EXPRESS (+20%)",type:"percent",value:.2}]},laminowanie:{formats:{A3:[{min:1,max:50,price:7},{min:51,max:100,price:6},{min:101,max:200,price:5}],A4:[{min:1,max:50,price:5},{min:51,max:100,price:4.5},{min:101,max:200,price:4}],A5:[{min:1,max:50,price:4},{min:51,max:100,price:3.5},{min:101,max:200,price:3}],A6:[{min:1,max:50,price:3},{min:51,max:100,price:2.5},{min:101,max:200,price:2}]}},vouchery:[{qty:1,single:20,double:25},{qty:2,single:29,double:32},{qty:3,single:30,double:37},{qty:4,single:32,double:39},{qty:5,single:35,double:43},{qty:6,single:39,double:45},{qty:7,single:41,double:48},{qty:8,single:45,double:50},{qty:9,single:48,double:52},{qty:10,single:52,double:58},{qty:15,single:60,double:70},{qty:20,single:67,double:82},{qty:25,single:74,double:100},{qty:30,single:84,double:120}],rollUp:{name:"Roll-up Jednostronny",formats:{"85x200":{width:.85,height:2,tiers:[{min:1,max:5,price:290},{min:6,max:10,price:275}]},"100x200":{width:1,height:2,tiers:[{min:1,max:5,price:305},{min:6,max:10,price:285}]},"120x200":{width:1.2,height:2,tiers:[{min:1,max:5,price:330},{min:6,max:10,price:310}]},"150x200":{width:1.5,height:2,tiers:[{min:1,max:5,price:440},{min:6,max:10,price:425}]}},replacement:{labor:50,print_per_m2:80}},foliaSzroniona:{id:"folia-szroniona",title:"Folia szroniona",unit:"m2",pricing:"per_unit",rules:[{type:"minimum",unit:"m2",value:1}],materials:[{id:"material-only",storageId:"wydruk",name:"Tylko wydruk",tiers:[{min:1,max:5,price:65},{min:6,max:25,price:60},{min:26,max:50,price:56},{min:51,max:null,price:51}]},{id:"full-service",storageId:"oklejanie",name:"Wydruk z oklejaniem",tiers:[{min:1,max:5,price:140},{min:6,max:10,price:130},{min:11,max:20,price:120},{min:21,max:null,price:0}]}],modifiers:[{id:"express",name:"EXPRESS (+20%)",type:"percent",value:.2}]},wlepkiNaklejki:{category:"Wlepki / Naklejki",groups:[{id:"wlepki_obrys_folia",title:"Wlepki po obrysie (Folia Bia\u0142a/Trans)",unit:"m2",pricing:"per_unit",tiers:[{min:1,max:5,price:67},{min:6,max:25,price:60},{min:26,max:50,price:52},{min:51,max:null,price:48}],rules:[{type:"minimum",unit:"m2",value:1}]},{id:"wlepki_polipropylen",title:"Wlepki po obrysie - Polipropylen",unit:"m2",pricing:"per_unit",tiers:[{min:1,max:10,price:50},{min:11,max:null,price:42}],rules:[{type:"minimum",unit:"m2",value:1}]},{id:"wlepki_standard_folia",title:"Folia Bia\u0142a / Transparentna (standard)",unit:"m2",pricing:"per_unit",tiers:[{min:1,max:5,price:54},{min:6,max:25,price:50},{min:26,max:50,price:46},{min:51,max:null,price:42}],rules:[{type:"minimum",unit:"m2",value:1}]}],modifiers:[{id:"mocny_klej",name:"Mocny klej",type:"percent",value:.12},{id:"arkusze",name:"Ci\u0119te na arkusze",type:"fixed_per_unit",value:2},{id:"pojedyncze",name:"Ci\u0119te na pojedyncze sztuki",type:"fixed_per_unit",value:10},{id:"express",name:"EXPRESS",type:"percent",value:.2}]},zaproszeniaKreda:{name:"Zaproszenia KREDA - druk cyfrowy",modifiers:{satin:.12,express:.2},formats:{A6:{name:"A6 (105x148mm)",single:{normal:{"10":30,"24":40,"32":45,"50":50,"75":60,"100":68,"150":79},folded:{"10":45,"24":55,"32":60,"50":71,"75":84,"100":99,"150":126}},double:{normal:{"10":35,"24":46,"32":57,"50":66,"75":79,"100":89,"150":115},folded:{"10":58,"24":66,"32":84,"50":105,"75":125,"100":149,"150":199}}},A5:{name:"A5 (148x210mm)",single:{normal:{"10":34,"24":42,"32":48,"50":55,"75":63,"100":79,"150":110},folded:{"10":55,"24":60,"32":75,"50":95,"75":125,"100":150,"150":199}},double:{normal:{"10":40,"24":49,"32":62,"50":79,"75":96,"100":119,"150":169},folded:{"10":65,"24":80,"32":115,"50":149,"75":190,"100":235,"150":325}}},DL:{name:"DL (99x210mm)",single:{normal:{"10":35,"24":50,"32":53,"50":59,"75":70,"100":81,"150":105},folded:{"10":45,"24":55,"32":63,"50":79,"75":97,"100":115,"150":149}},double:{normal:{"10":41,"24":55,"32":64,"50":74,"75":88,"100":105,"150":135},folded:{"10":65,"24":80,"32":90,"50":115,"75":150,"100":185,"150":245}}}}},ulotkiJednostronne:{name:"Ulotki \u2013 cyfrowe jednostronne",formats:{A6:{name:"A6 (105x148)",tiers:[{min:10,max:10,price:30},{min:20,max:20,price:35},{min:30,max:30,price:40},{min:40,max:40,price:45},{min:50,max:50,price:55},{min:60,max:60,price:61},{min:70,max:70,price:65},{min:80,max:80,price:70},{min:90,max:90,price:75},{min:100,max:100,price:79},{min:150,max:150,price:90},{min:200,max:200,price:110},{min:300,max:300,price:145},{min:400,max:400,price:160},{min:500,max:500,price:190},{min:700,max:700,price:255},{min:1e3,max:1e3,price:320}]},A5:{name:"A5 (148 x 210)",tiers:[{min:10,max:10,price:35},{min:20,max:20,price:42},{min:30,max:30,price:50},{min:40,max:40,price:59},{min:50,max:50,price:69},{min:60,max:60,price:75},{min:70,max:70,price:82},{min:80,max:80,price:88},{min:90,max:90,price:93},{min:100,max:100,price:95},{min:150,max:150,price:130},{min:200,max:200,price:150},{min:300,max:300,price:210},{min:400,max:400,price:259},{min:500,max:500,price:300},{min:700,max:700,price:410},{min:1e3,max:1e3,price:530}]},DL:{name:"DL (99 x 210)",tiers:[{min:10,max:10,price:30},{min:20,max:20,price:35},{min:30,max:30,price:40},{min:40,max:40,price:45},{min:50,max:50,price:55},{min:60,max:60,price:60},{min:70,max:70,price:65},{min:80,max:80,price:70},{min:90,max:90,price:75},{min:100,max:100,price:83},{min:150,max:150,price:100},{min:200,max:200,price:120},{min:300,max:300,price:160},{min:400,max:400,price:199},{min:500,max:500,price:230},{min:700,max:700,price:310},{min:1e3,max:1e3,price:399}]}}},ulotkiDwustronne:{name:"Ulotki - Cyfrowe Dwustronne",formats:{A6:{name:"A6 (105x148)",tiers:[{min:10,max:10,price:40},{min:20,max:20,price:47},{min:30,max:30,price:49},{min:40,max:40,price:55},{min:50,max:50,price:60},{min:60,max:60,price:65},{min:70,max:70,price:70},{min:80,max:80,price:75},{min:90,max:90,price:90},{min:100,max:100,price:95},{min:150,max:150,price:120},{min:200,max:200,price:140},{min:300,max:300,price:190},{min:400,max:400,price:230},{min:500,max:500,price:270},{min:700,max:700,price:355},{min:1e3,max:1e3,price:476}]},A5:{name:"A5 (148 x 210)",tiers:[{min:10,max:10,price:45},{min:20,max:20,price:55},{min:30,max:30,price:60},{min:40,max:40,price:72},{min:50,max:50,price:90},{min:60,max:60,price:99},{min:70,max:70,price:112},{min:80,max:80,price:122},{min:90,max:90,price:130},{min:100,max:100,price:140},{min:150,max:150,price:180},{min:200,max:200,price:220},{min:300,max:300,price:310},{min:400,max:400,price:390},{min:500,max:500,price:460},{min:700,max:700,price:620},{min:1e3,max:1e3,price:790}]},DL:{name:"DL (99 x 210)",tiers:[{min:10,max:10,price:40},{min:20,max:20,price:50},{min:30,max:30,price:55},{min:40,max:40,price:65},{min:50,max:50,price:70},{min:60,max:60,price:78},{min:70,max:70,price:88},{min:80,max:80,price:99},{min:90,max:90,price:109},{min:100,max:100,price:119},{min:150,max:150,price:150},{min:200,max:200,price:179},{min:300,max:300,price:235},{min:400,max:400,price:290},{min:500,max:500,price:350},{min:700,max:700,price:460},{min:1e3,max:1e3,price:590}]}}},solwentPlakaty:{id:"solwent-plakaty",title:"SOLWENT - PLAKATY",unit:"m2",pricing:"per_unit",rules:[{type:"minimum",unit:"m2",value:1}],modifiers:[{id:"express",name:"EXPRESS",type:"percent",value:.2}],materials:[{id:"150g",name:"Papier 150g p\xF3\u0142mat",tiers:[{min:1,max:3,price:65},{min:4,max:9,price:60},{min:10,max:20,price:55},{min:21,max:40,price:50},{min:41,max:null,price:42}]},{id:"200g",name:"Papier 200g po\u0142ysk",tiers:[{min:1,max:3,price:70},{min:4,max:9,price:65},{min:10,max:20,price:59},{min:21,max:40,price:53},{min:41,max:null,price:45}]},{id:"115g",name:"Papier 115g matowy",tiers:[{min:1,max:3,price:45},{min:4,max:19,price:40},{min:20,max:null,price:35}]}]},plakaty:{id:"plakaty",title:"Plakaty",solwent:{unit:"m2",minimumM2:1,materials:[{id:"200g-polysk",name:"200g Po\u0142ysk (solwent)",tiers:[{min:1,max:3,price:70},{min:4,max:9,price:65},{min:10,max:20,price:59},{min:21,max:40,price:53},{min:41,max:null,price:45}]},{id:"blockout200g",name:"Blockout 200g Satyna (solwent)",tiers:[{min:1,max:3,price:80},{min:4,max:9,price:75},{min:10,max:20,price:70},{min:21,max:40,price:65},{min:41,max:null,price:60}]},{id:"150g-polmat",name:"150g P\xF3\u0142mat (solwent)",tiers:[{min:1,max:3,price:65},{min:4,max:9,price:60},{min:10,max:20,price:55},{min:21,max:40,price:50},{min:41,max:null,price:42}]},{id:"115g-mat",name:"115g Matowy (solwent)",tiers:[{min:1,max:3,price:45},{min:4,max:19,price:40},{min:20,max:null,price:35}]}]},formatowe:{unit:"szt",formats:["297x420","420x594","594x841","841x1189","914x1189","914x1292","rolka1067"],materials:[{id:"120g-formatowe",name:"120g Formatowe",discountGroup:"120g",prices:{"297x420":9,"420x594":12,"594x841":18,"841x1189":28,"914x1189":34,"914x1292":50,rolka1067:68}},{id:"120g-nieformatowe",name:"120g Nieformatowe",discountGroup:"120g",prices:{"297x420":28,"420x594":30,"594x841":33,"841x1189":35,"914x1292":50,rolka1067:63}},{id:"260g-satyna-formatowe",name:"260g Satyna Formatowe (fotoplakaty)",discountGroup:"260g",prices:{"297x420":23,"420x594":39,"594x841":50,"841x1189":80,"914x1292":88}},{id:"260g-satyna-nieformatowe",name:"260g Satyna Nieformatowe (fotoplakaty)",discountGroup:"260g",prices:{"297x420":27,"420x594":36,"594x841":39.5,"841x1189":66.7,"914x1292":75.3}},{id:"180g-pp-formatowe",name:"180g PP Formatowe",discountGroup:"120g",prices:{"297x420":18,"420x594":37,"610x841":45,"841x1189":70,"914x1292":74}},{id:"180g-pp-nieformatowe",name:"180g PP Nieformatowe",discountGroup:"120g",prices:{"297x420":23,"420x594":31,"610x841":34,"841x1189":62,"914x1292":70.5}}],discounts:{"120g":[{min:2,max:5,factor:.95},{min:6,max:20,factor:.92},{min:21,max:30,factor:.87}],"260g":[{min:9,max:20,factor:.93},{min:21,max:30,factor:.88}]}},modifiers:[{id:"express",name:"TRYB EXPRESS (+20%)",type:"percent",value:.2}],legacy200g:{id:"solwent-plakaty-200g",title:"SOLWENT - PLAKATY (Papier 200g po\u0142ysk)",unit:"m2",pricing:"per_unit",tiers:[{min:0,max:3,price:70},{min:3,max:9,price:65},{min:9,max:20,price:59},{min:20,max:40,price:53},{min:40,max:null,price:45}],rules:[{type:"minimum",unit:"m2",value:1}],modifiers:[{id:"EXPRESS",type:"percent",value:.2}]}},dyplomy:[{qty:1,price:20},{qty:2,price:30},{qty:3,price:32},{qty:4,price:34},{qty:5,price:35},{qty:6,price:35},{qty:7,price:36},{qty:8,price:37},{qty:9,price:39},{qty:10,price:40},{qty:15,price:45},{qty:20,price:49},{qty:30,price:58},{qty:40,price:65},{qty:50,price:75},{qty:100,price:120}],defaultPrices:{"druk-bw-a4-1-5":.9,"druk-bw-a4-6-20":.6,"druk-bw-a4-21-100":.35,"druk-bw-a4-101-500":.3,"druk-bw-a4-501-999":.23,"druk-bw-a4-1000-4999":.19,"druk-bw-a4-5000+":.15,"druk-bw-a3-1-5":1.7,"druk-bw-a3-6-20":1.1,"druk-bw-a3-21-100":.7,"druk-bw-a3-101-500":.6,"druk-bw-a3-501-999":.45,"druk-bw-a3-1000-4999":.33,"druk-bw-a3-5000+":.3,"druk-kolor-a4-1-10":2.4,"druk-kolor-a4-11-40":2.2,"druk-kolor-a4-41-100":2,"druk-kolor-a4-101-250":1.8,"druk-kolor-a4-251-500":1.6,"druk-kolor-a4-501-999":1.4,"druk-kolor-a4-1000+":1.1,"druk-kolor-a3-1-10":4.8,"druk-kolor-a3-11-40":4.2,"druk-kolor-a3-41-100":3.8,"druk-kolor-a3-101-250":3,"druk-kolor-a3-251-500":2.5,"druk-kolor-a3-501-999":1.9,"druk-kolor-a3-1000+":1.6,"skan-auto-1-9":1,"skan-auto-10-49":.5,"skan-auto-50-99":.4,"skan-auto-100+":.25,"skan-reczne-1-4":2,"skan-reczne-5+":1,"druk-email":1,"modifier-druk-zadruk25":.5,"druk-cad-kolor-fmt-a3":5.3,"druk-cad-kolor-fmt-a2":8.5,"druk-cad-kolor-fmt-a1":12,"druk-cad-kolor-fmt-a0":24,"druk-cad-kolor-fmt-a0plus":26,"druk-cad-kolor-mb-a3":12,"druk-cad-kolor-mb-a2":13.9,"druk-cad-kolor-mb-a1":14.5,"druk-cad-kolor-mb-a0":20,"druk-cad-kolor-mb-a0plus":21,"druk-cad-kolor-mb-mb1067":30,"druk-cad-bw-fmt-a3":2.5,"druk-cad-bw-fmt-a2":4,"druk-cad-bw-fmt-a1":6,"druk-cad-bw-fmt-a0":11,"druk-cad-bw-fmt-a0plus":12.5,"druk-cad-bw-mb-a3":3.5,"druk-cad-bw-mb-a2":4.5,"druk-cad-bw-mb-a1":5,"druk-cad-bw-mb-a0":9,"druk-cad-bw-mb-a0plus":10,"druk-cad-bw-mb-mb1067":12.5,"laminowanie-a3-1-50":7,"laminowanie-a3-51-100":6,"laminowanie-a3-101-200":5,"laminowanie-a4-1-50":5,"laminowanie-a4-51-100":4.5,"laminowanie-a4-101-200":4,"laminowanie-a5-1-50":4,"laminowanie-a5-51-100":3.5,"laminowanie-a5-101-200":3,"laminowanie-a6-1-50":3,"laminowanie-a6-51-100":2.5,"laminowanie-a6-101-200":2,"solwent-150g-1-3":65,"solwent-150g-4-9":60,"solwent-150g-10-20":55,"solwent-150g-21-40":50,"solwent-150g-41+":42,"solwent-200g-1-3":70,"solwent-200g-4-9":65,"solwent-200g-10-20":59,"solwent-200g-21-40":53,"solwent-200g-41+":45,"solwent-115g-1-3":45,"solwent-115g-4-19":40,"solwent-115g-20+":35,"vouchery-1-jed":20,"vouchery-2-jed":29,"vouchery-3-jed":30,"vouchery-4-jed":32,"vouchery-5-jed":35,"vouchery-6-jed":39,"vouchery-7-jed":41,"vouchery-8-jed":45,"vouchery-9-jed":48,"vouchery-10-jed":52,"vouchery-15-jed":60,"vouchery-20-jed":67,"vouchery-25-jed":74,"vouchery-30-jed":84,"vouchery-1-dwu":25,"vouchery-2-dwu":32,"vouchery-3-dwu":37,"vouchery-4-dwu":39,"vouchery-5-dwu":43,"vouchery-6-dwu":45,"vouchery-7-dwu":48,"vouchery-8-dwu":50,"vouchery-9-dwu":52,"vouchery-10-dwu":58,"vouchery-15-dwu":70,"vouchery-20-dwu":82,"vouchery-25-dwu":100,"vouchery-30-dwu":120,"banner-powlekany-1-25":53,"banner-powlekany-26-50":49,"banner-powlekany-51+":45,"banner-blockout-1-25":64,"banner-blockout-26-50":59,"banner-blockout-51+":55,"banner-oczkowanie":2.5,"rollup-85x200-1-5":290,"rollup-85x200-6-10":275,"rollup-100x200-1-5":305,"rollup-100x200-6-10":285,"rollup-120x200-1-5":330,"rollup-120x200-6-10":310,"rollup-150x200-1-5":440,"rollup-150x200-6-10":425,"rollup-wymiana-labor":50,"rollup-wymiana-m2":80,"folia-szroniona-wydruk-1-5":65,"folia-szroniona-wydruk-6-25":60,"folia-szroniona-wydruk-26-50":56,"folia-szroniona-wydruk-51+":51,"folia-szroniona-oklejanie-1-5":140,"folia-szroniona-oklejanie-6-10":130,"folia-szroniona-oklejanie-11-20":120,"wlepki-obrys-folia-1-5":67,"wlepki-obrys-folia-6-25":60,"wlepki-obrys-folia-26-50":52,"wlepki-obrys-folia-51+":48,"wlepki-polipropylen-1-10":50,"wlepki-polipropylen-11+":42,"wlepki-standard-folia-1-5":54,"wlepki-standard-folia-6-25":50,"wlepki-standard-folia-26-50":46,"wlepki-standard-folia-51+":42,"wlepki-modifier-arkusze":2,"wlepki-modifier-pojedyncze":10,"wlepki-modifier-mocny-klej":.12,"wizytowki-85x55-none-50szt":65,"wizytowki-85x55-none-100szt":75,"wizytowki-85x55-none-250szt":110,"wizytowki-85x55-none-500szt":170,"wizytowki-85x55-none-1000szt":290,"wizytowki-85x55-matt_gloss-50szt":160,"wizytowki-85x55-matt_gloss-100szt":170,"wizytowki-85x55-matt_gloss-250szt":200,"wizytowki-85x55-matt_gloss-500szt":250,"wizytowki-85x55-matt_gloss-1000szt":335,"wizytowki-90x50-none-50szt":70,"wizytowki-90x50-none-100szt":79,"wizytowki-90x50-none-250szt":120,"wizytowki-90x50-none-500szt":175,"wizytowki-90x50-none-1000szt":300,"wizytowki-90x50-matt_gloss-50szt":170,"wizytowki-90x50-matt_gloss-100szt":180,"wizytowki-90x50-matt_gloss-250szt":210,"wizytowki-90x50-matt_gloss-500szt":260,"wizytowki-90x50-matt_gloss-1000szt":345,"modifier-satyna":.12,"modifier-express":.2}};var it=JSON.parse(JSON.stringify(ne));function M(e){let t=e.split("."),r=it;for(let a of t){if(r==null||typeof r!="object")return;r=r[a]}return r}function se(e){return(Math.round((Number(e)||0)*100)/100).toFixed(2)}function Y(e,t){return e.find(r=>t>=r.from&&t<=r.to)||null}function le(e,t){let r=Object.keys(e||{}).map(Number).filter(Number.isFinite).sort((n,o)=>n-o);if(!r.length)return null;let a=r.find(n=>t<=n);return a==null?null:a}var A=M("drukA4A3"),B=M("drukCAD.price"),H=M("drukCAD.base"),N=M("drukCAD.tolerance"),nt=M("drukCAD.fold"),st=M("drukCAD.wfScanPerCm"),lt="razdwa_prices";function U(){try{if(typeof localStorage=="undefined")return{};let e=localStorage.getItem(lt);if(!e)return{};let t=JSON.parse(e);if(t&&typeof t=="object"&&!Array.isArray(t))return t}catch{}return{}}function P(e,t){let r=U();return typeof r[e]=="number"?r[e]:t}function C(e,t){let r=U();return t.map(a=>{let n=a.max===null||a.max>5e4?`${a.min}+`:`${a.min}-${a.max}`,o=`${e}-${n}`;return typeof r[o]=="number"?{...a,price:r[o]}:a})}var G=M("defaultPrices"),K=M("wizytowki");var ct=M("solwentPlakaty");function ce(e){let t=ct,r=t.materials.find(o=>o.name===e.material);if(!r)throw new Error(`Unknown material: ${e.material}`);let a={id:t.id,title:t.title,unit:t.unit,pricing:t.pricing,tiers:C(`solwent-${r.id}`,r.tiers),rules:t.rules,modifiers:t.modifiers},n=[];return e.express&&n.push("express"),z(a,e.areaM2,n)}var mt="pl-PL";function ut(e,t="PLN"){return new Intl.NumberFormat(mt,{style:"currency",currency:t==="PLN"?"PLN":"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}var k=ut;var dt=M("solwentPlakaty"),me={id:"solwent-plakaty",name:"Solwent - Plakaty",async mount(e,t){try{let r=await fetch("categories/solwent-plakaty.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text();let n=dt.materials,o=e.querySelector("#material");o.innerHTML=n.map(l=>`<option value="${l.name}">${l.name}</option>`).join(""),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#material"),a=e.querySelector("#area"),n=e.querySelector("#calculate"),o=e.querySelector("#add-to-cart"),l=e.querySelector("#result-display"),d=e.querySelector("#unit-price"),p=e.querySelector("#total-price"),u=e.querySelector("#express-hint"),i=null;n.onclick=()=>{let c={material:r.value,areaM2:parseFloat(a.value),express:t.expressMode};try{let m=ce(c);i=m,d.innerText=k(m.tierPrice),p.innerText=k(m.totalPrice),u&&(u.style.display=t.expressMode?"block":"none"),l.style.display="block",o.disabled=!1,t.updateLastCalculated(m.totalPrice,"Solwent - Plakaty")}catch(m){alert("B\u0142\u0105d: "+m.message)}},o.onclick=()=>{i&&t.cart.addItem({id:`solwent-${Date.now()}`,category:"Solwent - Plakaty",name:r.value,quantity:parseFloat(a.value),unit:"m2",unitPrice:i.tierPrice,isExpress:t.expressMode,totalPrice:i.totalPrice,optionsHint:`${a.value}m2${t.expressMode?", EXPRESS":""}`,payload:i})}}};var kr=M("plakaty").legacy200g,ue=M("plakaty");function de(e){var u;let t=ue,r=t.solwent.materials.find(i=>i.id===e.materialId);if(!r)throw new Error(`Unknown solwent material: ${e.materialId}`);let a=(u=t.solwent.minimumM2)!=null?u:1,n=Math.max(e.areaM2,a),o=r.tiers.find(i=>n>=i.min&&(i.max===null||n<=i.max));if(!o)throw new Error(`No tier for ${n} m2`);let l=parseFloat((n*o.price).toFixed(2)),d=0,p=[];if(e.express){let i=t.modifiers.find(c=>c.id==="express");i&&(d=parseFloat((l*i.value).toFixed(2)),p.push(i.name))}return{materialName:r.name,effectiveM2:n,tierPrice:o.price,basePrice:l,modifiersTotal:d,totalPrice:parseFloat((l+d).toFixed(2)),appliedModifiers:p}}function pe(e){var m;let t=ue,r=t.formatowe.materials.find(y=>y.id===e.materialId);if(!r)throw new Error(`Unknown format material: ${e.materialId}`);let a=r.prices[e.formatKey];if(a===void 0)throw new Error(`Unknown format: ${e.formatKey}`);let n=r.discountGroup,l=((m=t.formatowe.discounts[n])!=null?m:[]).find(y=>e.qty>=y.min&&(y.max===null||e.qty<=y.max)),d=l?l.factor:1,p=parseFloat((a*d).toFixed(2)),u=parseFloat((p*e.qty).toFixed(2)),i=0,c=[];if(e.express){let y=t.modifiers.find(f=>f.id==="express");y&&(i=parseFloat((u*y.value).toFixed(2)),c.push(y.name))}return{materialName:r.name,formatKey:e.formatKey,qty:e.qty,unitPrice:a,discountFactor:d,pricePerPiece:p,basePrice:u,modifiersTotal:i,totalPrice:parseFloat((u+i).toFixed(2)),appliedModifiers:c}}var pt=M("plakaty"),yt=new Set(["200g-polysk","blockout200g","150g-polmat","115g-mat"]),ye={id:"plakaty",name:"Plakaty",async mount(e,t){try{let r=await fetch("categories/plakaty.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=pt,a=e.querySelector("#p-material"),n=e.querySelector("#p-format-group"),o=e.querySelector("#p-m2-group"),l=e.querySelector("#p-format"),d=e.querySelector("#p-qty"),p=e.querySelector("#p-area"),u=e.querySelector("#p-calculate"),i=e.querySelector("#p-add-to-cart"),c=e.querySelector("#p-result-display"),m=e.querySelector("#p-unit-price"),y=e.querySelector("#p-total-price"),f=e.querySelector("#p-express-hint"),b=[...r.solwent.materials,...r.formatowe.materials];a.innerHTML=b.map(w=>`<option value="${w.id}">${w.name}</option>`).join("");function v(w){return yt.has(w)}function E(w){let g=r.formatowe.materials.find(h=>h.id===w);if(!g)return;let s=Object.keys(g.prices);l.innerHTML=s.map(h=>`<option value="${h}">${h}</option>`).join("")}function S(){let w=a.value;v(w)?(n.style.display="none",o.style.display=""):(n.style.display="",o.style.display="none",E(w))}a.addEventListener("change",S),S();let x=null,T=null;u.onclick=()=>{let w=a.value;try{if(v(w)){let g=parseFloat(p.value)||1,s=de({materialId:w,areaM2:g,express:t.expressMode});x=s,T={type:"m2",matId:w,area:g},m.innerText=k(s.tierPrice),y.innerText=k(s.totalPrice)}else{let g=l.value,s=parseInt(d.value,10)||1,h=pe({materialId:w,formatKey:g,qty:s,express:t.expressMode});x=h,T={type:"format",matId:w,fmt:g,qty:s},m.innerText=k(h.pricePerPiece),y.innerText=k(h.totalPrice)}f&&(f.style.display=t.expressMode?"block":"none"),c.style.display="block",i.disabled=!1,t.updateLastCalculated(x.totalPrice,"Plakaty")}catch(g){alert("B\u0142\u0105d: "+g.message)}},i.onclick=()=>{if(!x||!T)return;let w=a.options[a.selectedIndex].text;if(T.type==="m2"){let g=`${T.area} m2${t.expressMode?", EXPRESS":""}`;t.cart.addItem({id:`plakaty-${Date.now()}`,category:"Plakaty",name:w,quantity:T.area,unit:"m2",unitPrice:x.tierPrice,isExpress:t.expressMode,totalPrice:x.totalPrice,optionsHint:g,payload:x})}else{let g=`${T.fmt} \xD7 ${T.qty} szt${t.expressMode?", EXPRESS":""}`;t.cart.addItem({id:`plakaty-${Date.now()}`,category:"Plakaty",name:w,quantity:T.qty,unit:"szt",unitPrice:x.pricePerPiece,isExpress:t.expressMode,totalPrice:x.totalPrice,optionsHint:g,payload:x})}}}};var fe=M("vouchery");function ft(e,t){let r=fe[0];for(let l of fe)if(e>=l.qty)r=l;else break;let a=t?"jed":"dwu",n=`vouchery-${r.qty}-${a}`,o=t?r.single:r.double;return P(n,o)}function xe(e){let t=ft(e.qty,e.sides==="single"),r=0;e.satin&&(r+=P("modifier-satyna",.12)),e.express&&(r+=P("modifier-express",.2));let a=t*r,n=t+a;return{basePrice:t,modifiersTotal:parseFloat(a.toFixed(2)),totalPrice:parseFloat(n.toFixed(2))}}var xt=1.23,we={id:"vouchery",name:"Vouchery",async mount(e,t){try{let r=await fetch("categories/vouchery.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#v-qty"),a=e.querySelector("#v-paper"),n=e.querySelector("#v-calculate"),o=e.querySelector("#v-add-to-cart"),l=e.querySelector("#v-result-display"),d=e.querySelector("#v-base-price"),p=e.querySelector("#v-modifiers-row"),u=e.querySelector("#v-modifiers-total"),i=e.querySelector("#v-netto-price"),c=e.querySelector("#v-total-price"),m=e.querySelector("#v-tier-hint"),y=e.querySelector("#v-express-hint"),f=e.querySelector("#v-satin-hint"),b=null,v=null;n.onclick=()=>{let E=e.querySelector('input[name="v-sides"]:checked'),S=E?E.value:"single",x=a.value,T=x.startsWith("satyna");v={qty:parseInt(r.value),sides:S,satin:T,express:t.expressMode};try{let w=xe(v),g=parseFloat((w.totalPrice*xt).toFixed(2));b={...w,bruttoPrice:g,isSatin:T},d.innerText=k(w.basePrice),w.modifiersTotal>0?(p.style.display="flex",u.innerText="+"+k(w.modifiersTotal)):p.style.display="none",i&&(i.innerText=k(w.totalPrice)),c.innerText=k(g),m&&(m.innerText=`Dla ${v.qty} szt cena bazowa: ${w.basePrice.toFixed(2)} z\u0142 (papier: ${x.replace("_"," ")})`),y&&(y.style.display=t.expressMode?"block":"none"),f&&(f.style.display=T?"block":"none"),l.style.display="block",o.disabled=!1,t.updateLastCalculated(g,"Vouchery")}catch(w){alert("B\u0142\u0105d: "+w.message)}},o.onclick=()=>{if(b&&v){let E=v.sides==="single"?"Jednostronne":"Dwustronne",S=b.isSatin?", Satyna":"",x=v.express?", EXPRESS":"",T=a.value;t.cart.addItem({id:`vouchery-${Date.now()}`,category:"Vouchery",name:`Vouchery A4 ${E}`,quantity:v.qty,unit:"szt",unitPrice:b.bruttoPrice/v.qty,isExpress:v.express,totalPrice:b.bruttoPrice,optionsHint:`${v.qty} szt${S}${x}, ${T.replace("_"," ")}`,payload:b})}}}};var ge=M("dyplomy");function wt(e){let t=ge[0];for(let r of ge)if(e>=r.qty)t=r;else break;return t.price}function be(e){let t=wt(e.qty),r=0,a=[];e.isSatin&&(r+=P("modifier-satyna",.12),a.push("satin")),e.express&&(r+=P("modifier-express",.2),a.push("express"));let n=t*r,o=t+n;return{basePrice:t,modifiersTotal:n,totalPrice:Math.round(o*100)/100,appliedModifiers:a}}var ke=1.23,he={id:"dyplomy",name:"Dyplomy",async mount(e,t){let r=await fetch("categories/dyplomy.html");e.innerHTML=await r.text();let a=e.querySelector("#dypSides"),n=e.querySelector("#dypQty"),o=e.querySelector("#dypPaper"),l=e.querySelector("#calcBtn"),d=e.querySelector("#addToCartBtn"),p=e.querySelector("#dypResult"),u=()=>{let i=o.value,c=i.startsWith("satyna"),m={qty:parseInt(n.value)||1,sides:parseInt(a.value)||1,isSatin:c,express:t.expressMode},y=be(m),f=parseFloat((y.totalPrice*ke).toFixed(2));p.style.display="block",e.querySelector("#resNettoPrice").textContent=k(y.totalPrice),e.querySelector("#resUnitPrice").textContent=k(y.totalPrice/m.qty),e.querySelector("#resTotalPrice").textContent=k(f);let b=e.querySelector("#resTierHint");return b&&(b.textContent=`Dla ${m.qty} szt u\u017Cyto ceny ${y.basePrice.toFixed(2)} z\u0142 (papier: ${i.replace("_"," ")})`),e.querySelector("#resDiscountHint").style.display=y.appliedModifiers.includes("bulk-discount")?"block":"none",e.querySelector("#resExpressHint").style.display=m.express?"block":"none",e.querySelector("#resSatinHint").style.display=m.isSatin?"block":"none",t.updateLastCalculated(f,"Dyplomy"),{options:m,result:y}};l.addEventListener("click",()=>u()),d.addEventListener("click",()=>{let{options:i,result:c}=u(),m=parseFloat((c.totalPrice*ke).toFixed(2));t.cart.addItem({id:`dyp-${Date.now()}`,category:"Dyplomy",name:`Dyplomy DL ${i.sides===1?"1-str":"2-str"}`,quantity:i.qty,unit:"szt",unitPrice:m/i.qty,isExpress:i.express,totalPrice:m,optionsHint:`${i.qty} szt, ${o.value.replace("_"," ")}`,payload:i})}),u()}};function ve(e,t){return t>5e4?`${e}+`:`${e}-${t}`}function O(e,t){let r=U();return typeof r[e]=="number"?r[e]:t}function Se(e){if(e.pages<=0)return{unitPrice:0,printTotal:0,emailTotal:e.email?A.email_price:0,inkTotal:0,grandTotal:e.email?A.email_price:0};let t=A.print[e.mode][e.format],r=Y(t,e.pages);if(!r)throw new Error("Brak progu cenowego dla druku.");let a=e.mode==="bw"?"bw":"kolor",n=e.format.toLowerCase(),o=`druk-${a}-${n}-${ve(r.from,r.to)}`,l=O(o,r.unit),d=e.pages*l,p=0;e.email&&(p=O("druk-email",A.email_price));let u=0;return e.ink25&&(u=O("modifier-druk-zadruk25",.5)*l*e.ink25Qty),{unitPrice:l,printTotal:d,emailTotal:p,inkTotal:u,grandTotal:d+p+u}}function Me(e){if(e.pages<=0)return{unitPrice:0,total:0};let t=A.scan[e.type],r=Y(t,e.pages);if(!r)throw new Error("Brak progu cenowego dla skanowania.");let n=`skan-${e.type==="auto"?"auto":"reczne"}-${ve(r.from,r.to)}`,o=O(n,r.unit);return{unitPrice:o,total:e.pages*o}}function Ee(e){let t=H[e.format];if(!t)throw new Error("Nieznany format CAD.");let a=Math.abs(e.lengthMm-t.l)<=N?"formatowe":"mb",n=B[e.mode][a][e.format];if(n==null)throw new Error("Brak stawki w cenniku dla CAD.");let o=e.mode==="bw"?"bw":"kolor",l=a==="formatowe"?"fmt":"mb",d=e.format.toLowerCase().replace("0p","0plus").replace("r1067","mb1067"),p=`druk-cad-${o}-${l}-${d}`,u=O(p,n),i=0;if(a==="formatowe")i=e.qty*u;else{let c=e.lengthMm/1e3;i=e.qty*c*u}return{detectedType:a,rate:u,total:parseFloat(se(i))}}function Te(e){let t;e.family==="deluxe"?t=K.cyfrowe.deluxe.options[e.deluxeOpt].prices:t=(e.finish==="softtouch"?K.cyfrowe.softtouchPrices:K.cyfrowe.standardPrices)[e.size][e.lam];let r=le(t,e.qty);if(r==null)throw new Error("Brak progu cenowego dla takiej ilo\u015Bci.");let a=t[r];if(e.family!=="deluxe"&&e.size){let n=e.lam==="noLam"?"none":"matt_gloss",o=`wizytowki-${e.size}-${n}-${r}szt`;a=O(o,a)}return{qtyBilled:r,total:a}}function Pe(e){let t=e.family||"standard",r=e.finish||"mat",a=e.format||"85x55",n=r==="softtouch"?"lam":e.folia==="none"?"noLam":"lam",o=Te({family:t,size:a,lam:n,finish:r,deluxeOpt:e.deluxeOpt,qty:e.qty}),l=o.total;return e.express&&(l=o.total*(1+P("modifier-express",.2))),{totalPrice:parseFloat(l.toFixed(2)),basePrice:o.total,effectiveQuantity:e.qty,tierPrice:o.total/o.qtyBilled,modifiersTotal:e.express?o.total*P("modifier-express",.2):0,appliedModifiers:e.express?["TRYB EXPRESS"]:[],qtyBilled:o.qtyBilled}}var gt=1.23,bt=1.12,Le={id:"wizytowki-druk-cyfrowy",name:"Wizyt\xF3wki - druk cyfrowy",async mount(e,t){try{let r=await fetch("categories/wizytowki-druk-cyfrowy.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#w-family"),a=e.querySelector("#standard-options"),n=e.querySelector("#deluxe-options"),o=e.querySelector("#w-finish"),l=e.querySelector("#w-size"),d=e.querySelector("#w-lam"),p=e.querySelector("#w-deluxe-opt"),u=e.querySelector("#w-paper"),i=e.querySelector("#w-qty"),c=e.querySelector("#w-calculate"),m=e.querySelector("#w-add-to-cart"),y=e.querySelector("#w-result-display"),f=e.querySelector("#w-netto-price"),b=e.querySelector("#w-total-price"),v=e.querySelector("#w-billed-qty-hint"),E=e.querySelector("#w-tier-hint"),S=e.querySelector("#w-express-hint"),x=e.querySelector("#w-satin-hint");r.onchange=()=>{let g=r.value==="deluxe";a.style.display=g?"none":"block",n.style.display=g?"block":"none"};let T=null,w=null;c.onclick=()=>{let g=u.value,s=g.startsWith("satyna");w={family:r.value,finish:o.value,format:l.value,folia:d.value==="lam"?"matt_gloss":"none",deluxeOpt:p.value,qty:parseInt(i.value),express:t.expressMode};try{let h=Pe(w),q=s?parseFloat((h.totalPrice*bt).toFixed(2)):h.totalPrice,L=parseFloat((q*gt).toFixed(2));T={...h,nettoPrice:q,bruttoPrice:L,isSatin:s},f.innerText=k(q),b.innerText=k(L),v.innerText=`Rozliczono za: ${h.qtyBilled} szt.`,E&&(E.innerText=`Dla ${h.qtyBilled} szt u\u017Cyto ceny ${h.totalPrice.toFixed(2)} z\u0142 (papier: ${g.replace("_"," ")})`),S&&(S.style.display=t.expressMode?"block":"none"),x&&(x.style.display=s?"block":"none"),y.style.display="block",m.disabled=!1,t.updateLastCalculated(L,"Wizyt\xF3wki")}catch(h){alert("B\u0142\u0105d: "+h.message)}},m.onclick=()=>{if(T&&w){let g=w.family==="deluxe"?"Wizyt\xF3wki DELUXE":"Wizyt\xF3wki Standard",s=w.express?", EXPRESS":"",h=T.isSatin?", SATYNA":"",q=u.value;t.cart.addItem({id:`wizytowki-${Date.now()}`,category:"Wizyt\xF3wki",name:g,quantity:T.qtyBilled,unit:"szt",unitPrice:T.bruttoPrice/T.qtyBilled,isExpress:w.express,totalPrice:T.bruttoPrice,optionsHint:`${w.qty} szt (rozliczono ${T.qtyBilled})${h}${s}, ${q.replace("_"," ")}`,payload:T})}}}};var ee=M("rollUp");function qe(e){let t=ee.formats[e.format];if(!t)throw new Error(`Unknown format: ${e.format}`);let r;if(e.isReplacement){let n=t.width*t.height,o=P("rollup-wymiana-labor",ee.replacement.labor),l=P("rollup-wymiana-m2",ee.replacement.print_per_m2),d=n*l+o;r={id:"roll-up-replacement",title:`Wymiana wk\u0142adu (${e.format})`,unit:"szt",pricing:"per_unit",tiers:[{min:1,max:null,price:d}],modifiers:[{id:"express",name:"EXPRESS",type:"percent",value:P("modifier-express",.2)}]}}else r={id:"roll-up-full",title:`Roll-up Komplet (${e.format})`,unit:"szt",pricing:"per_unit",tiers:C(`rollup-${e.format}`,t.tiers),modifiers:[{id:"express",name:"EXPRESS",type:"percent",value:P("modifier-express",.2)}]};let a=[];return e.express&&a.push("express"),z(r,e.qty,a)}var ze={id:"roll-up",name:"Roll-up",async mount(e,t){let r=await fetch("categories/roll-up.html");e.innerHTML=await r.text();let a=e.querySelector("#rollUpType"),n=e.querySelector("#rollUpFormat"),o=e.querySelector("#rollUpQty"),l=e.querySelector("#calcBtn"),d=e.querySelector("#addToCartBtn"),p=e.querySelector("#rollUpResult"),u=()=>{let i={format:n.value,qty:parseInt(o.value)||1,isReplacement:a.value==="replacement",express:t.expressMode},c=qe(i);return p.style.display="block",e.querySelector("#resUnitPrice").textContent=k(c.totalPrice/i.qty),e.querySelector("#resTotalPrice").textContent=k(c.totalPrice),e.querySelector("#resExpressHint").style.display=i.express?"block":"none",t.updateLastCalculated(c.totalPrice,"Roll-up"),{options:i,result:c}};l.addEventListener("click",()=>u()),d.addEventListener("click",()=>{let{options:i,result:c}=u();t.cart.addItem({id:`rollup-${Date.now()}`,category:"Roll-up",name:`${i.isReplacement?"Wymiana wk\u0142adu":"Roll-up Komplet"} ${i.format}`,quantity:i.qty,unit:"szt",unitPrice:c.totalPrice/i.qty,isExpress:i.express,totalPrice:c.totalPrice,optionsHint:`${i.format}, ${i.qty} szt`,payload:i})}),u()}};var te=M("zaproszeniaKreda");function kt(e,t,r,a){let o=te.formats[e];if(!o)throw new Error(`Unknown format: ${e}`);let l=r===1?"single":"double",d=a?"folded":"normal",p=o[l][d],u=Object.keys(p).map(Number).sort((c,m)=>c-m),i=p[String(u[0])];for(let c of u)if(t>=c)i=p[String(c)];else break;return i}function Ce(e){let t=kt(e.format,e.qty,e.sides,e.isFolded),r=1;e.isSatin&&(r+=te.modifiers.satin),e.express&&(r+=te.modifiers.express);let a=parseFloat((t*r).toFixed(2));return{basePrice:t,totalPrice:a}}var He=1.23,$e={id:"zaproszenia-kreda",name:"Zaproszenia KREDA",async mount(e,t){let r=await fetch("categories/zaproszenia-kreda.html");e.innerHTML=await r.text();let a=e.querySelector("#zapFormat"),n=e.querySelector("#zapSides"),o=e.querySelector("#zapFolded"),l=e.querySelector("#zapQty"),d=e.querySelector("#zapPaper"),p=e.querySelector("#calcBtn"),u=e.querySelector("#addToCartBtn"),i=e.querySelector("#zapResult"),c=()=>{let m=d.value,y=m.startsWith("satyna"),f={format:a.value,qty:parseInt(l.value)||10,sides:parseInt(n.value)||1,isFolded:o.checked,isSatin:y,express:t.expressMode},b=Ce(f),v=parseFloat((b.totalPrice*He).toFixed(2));i.style.display="block",e.querySelector("#resNettoPrice").textContent=k(b.totalPrice),e.querySelector("#resUnitPrice").textContent=k(b.totalPrice/f.qty),e.querySelector("#resTotalPrice").textContent=k(v);let E=e.querySelector("#resTierHint");return E&&(E.textContent=`Dla ${f.qty} szt u\u017Cyto ceny ${b.basePrice.toFixed(2)} z\u0142 (papier: ${m.replace("_"," ")})`),e.querySelector("#resExpressHint").style.display=f.express?"block":"none",e.querySelector("#resSatinHint").style.display=f.isSatin?"block":"none",t.updateLastCalculated(v,"Zaproszenia"),{options:f,result:b}};p.addEventListener("click",()=>c()),u.addEventListener("click",()=>{let{options:m,result:y}=c(),f=parseFloat((y.totalPrice*He).toFixed(2));t.cart.addItem({id:`zap-${Date.now()}`,category:"Zaproszenia Kreda",name:`Zaproszenia ${m.format} ${m.sides===1?"1-str":"2-str"}${m.isFolded?" sk\u0142adane":""}`,quantity:m.qty,unit:"szt",unitPrice:f/m.qty,isExpress:m.express,totalPrice:f,optionsHint:`${m.qty} szt, ${d.value.replace("_"," ")}`,payload:m})}),c()}};var ht=M("ulotkiDwustronne");function vt(e){let t=ht.formats[e];if(!t)throw new Error(`Invalid format: ${e}`);return{id:`ulotki-cyfrowe-dwustronne-${e.toLowerCase()}`,title:`Ulotki Cyfrowe Dwustronne ${t.name}`,unit:"szt",pricing:"flat",tiers:t.tiers,modifiers:[{id:"express",name:"TRYB EXPRESS",type:"percent",value:P("modifier-express",.2)}]}}function Ae(e){let t=vt(e.format),r=[];return e.express&&r.push("express"),z(t,e.qty,r)}var St=M("ulotkiJednostronne");function Mt(e){let t=St.formats[e];if(!t)throw new Error(`Invalid format: ${e}`);return{id:`ulotki-cyfrowe-jednostronne-${e.toLowerCase()}`,title:`Ulotki Cyfrowe Jednostronne ${t.name}`,unit:"szt",pricing:"flat",tiers:t.tiers,modifiers:[{id:"express",name:"TRYB EXPRESS",type:"percent",value:P("modifier-express",.2)}]}}function Ie(e){let t=Mt(e.format),r=[];return e.express&&r.push("express"),z(t,e.qty,r)}var Et=1.23,Tt=1.12,De={id:"ulotki-cyfrowe",name:"Ulotki cyfrowe",async mount(e,t){try{let r=await fetch("categories/ulotki-cyfrowe.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#u-format"),a=e.querySelector("#u-qty"),n=e.querySelector("#u-paper"),o=e.querySelector("#u-calculate"),l=e.querySelector("#u-add-to-cart"),d=e.querySelector("#u-result-display"),p=e.querySelector("#u-netto-price"),u=e.querySelector("#u-total-price"),i=e.querySelector("#u-tier-hint"),c=e.querySelector("#u-express-hint"),m=e.querySelector("#u-satin-hint"),y=null,f=null;o.onclick=()=>{let b=e.querySelector('input[name="sides"]:checked').value,v=n.value,E=v.startsWith("satyna");f={format:r.value,qty:parseInt(a.value),express:t.expressMode,sides:b};try{let S=b==="dwustronne"?Ae(f):Ie(f),x=E?parseFloat((S.totalPrice*Tt).toFixed(2)):S.totalPrice,T=parseFloat((x*Et).toFixed(2));y={...S,nettoPrice:x,bruttoPrice:T,isSatin:E},p.innerText=k(x),u.innerText=k(T),i&&(i.innerText=`Dla ${f.qty} szt u\u017Cyto ceny ${S.totalPrice.toFixed(2)} z\u0142 netto (papier: ${v.replace("_"," ")})`),c&&(c.style.display=t.expressMode?"block":"none"),m&&(m.style.display=E?"block":"none"),d.style.display="block",l.disabled=!1,t.updateLastCalculated(T,"Ulotki")}catch(S){alert("B\u0142\u0105d: "+S.message)}},l.onclick=()=>{if(y&&f){let b=f.express?", EXPRESS":"",v=y.isSatin?", SATYNA":"",E=f.sides==="dwustronne"?"Dwustronne":"Jednostronne",S=n.value;t.cart.addItem({id:`ulotki-${Date.now()}`,category:"Ulotki",name:`Ulotki ${E} ${f.format}`,quantity:f.qty,unit:"szt",unitPrice:y.bruttoPrice/f.qty,isExpress:f.express,totalPrice:y.bruttoPrice,optionsHint:`${f.qty} szt, ${E}${v}${b}, ${S.replace("_"," ")}`,payload:y})}}}};function Re(e){let t=M("banner"),r=t.materials.find(o=>o.id===e.material);if(!r)throw new Error(`Unknown material: ${e.material}`);let a={id:t.id,title:t.title,unit:t.unit,pricing:t.pricing,tiers:C(`banner-${e.material}`,r.tiers),modifiers:t.modifiers.map(o=>o.id==="oczkowanie"?{...o,value:P("banner-oczkowanie",o.value)}:o)},n=[];return e.oczkowanie&&n.push("oczkowanie"),e.express&&n.push("express"),z(a,e.areaM2,n)}var Fe={id:"banner",name:"Bannery",async mount(e,t){try{let r=await fetch("categories/banner.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#b-material"),a=e.querySelector("#b-area"),n=e.querySelector("#b-oczkowanie"),o=e.querySelector("#b-calculate"),l=e.querySelector("#b-add-to-cart"),d=e.querySelector("#b-result-display"),p=e.querySelector("#b-unit-price"),u=e.querySelector("#b-total-price"),i=e.querySelector("#b-express-hint"),c=null,m=null;o.onclick=()=>{m={material:r.value,areaM2:parseFloat(a.value),oczkowanie:n.checked,express:t.expressMode};try{let y=Re(m);c=y,p.innerText=k(y.tierPrice),u.innerText=k(y.totalPrice),i&&(i.style.display=t.expressMode?"block":"none"),d.style.display="block",l.disabled=!1,t.updateLastCalculated(y.totalPrice,"Banner")}catch(y){alert("B\u0142\u0105d: "+y.message)}},l.onclick=()=>{if(c&&m){let y=r.options[r.selectedIndex].text,f=[`${m.areaM2} m2`,m.oczkowanie?"z oczkowaniem":"bez oczkowania",m.express?"EXPRESS":""].filter(Boolean).join(", ");t.cart.addItem({id:`banner-${Date.now()}`,category:"Bannery",name:y,quantity:m.areaM2,unit:"m2",unitPrice:c.tierPrice,isExpress:m.express,totalPrice:c.totalPrice,optionsHint:f,payload:c})}}}};var Pt=M("wlepkiNaklejki");function Be(e){let t=Pt,r=t.groups.find(l=>l.id===e.groupId);if(!r)throw new Error(`Unknown group: ${e.groupId}`);let a=e.groupId.replace(/_/g,"-"),n={id:"wlepki",title:r.title,unit:r.unit,pricing:r.pricing||"per_unit",tiers:C(a,r.tiers),modifiers:t.modifiers.map(l=>{let d=`wlepki-modifier-${l.id.replace(/_/g,"-")}`;return{...l,value:P(d,l.value)}}),rules:r.rules||[{type:"minimum",unit:"m2",value:1}]},o=[...e.modifiers];return e.express&&o.push("express"),z(n,e.area,o)}var Lt=M("wlepkiNaklejki"),Oe={id:"wlepki-naklejki",name:"Wlepki / Naklejki",async mount(e,t){let r=Lt;try{let y=await fetch("categories/wlepki-naklejki.html");if(!y.ok)throw new Error("Failed to load template");e.innerHTML=await y.text()}catch(y){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania szablonu: ${y}</div>`;return}let a=e.querySelector("#wlepki-group"),n=e.querySelector("#wlepki-area"),o=e.querySelector("#btn-calculate"),l=e.querySelector("#btn-add-to-cart"),d=e.querySelector("#wlepki-result"),p=e.querySelector("#unit-price"),u=e.querySelector("#total-price"),i=null,c=null,m=()=>{let y=e.querySelectorAll(".wlepki-mod:checked"),f=Array.from(y).map(b=>b.value);c={groupId:a.value,area:parseFloat(n.value)||0,express:t.expressMode,modifiers:f};try{let b=Be(c);i=b,p.textContent=k(b.tierPrice),u.textContent=k(b.totalPrice),d.style.display="block",l.disabled=!1,t.updateLastCalculated(b.totalPrice,"Wlepki")}catch(b){alert("B\u0142\u0105d: "+b.message)}};o.addEventListener("click",m),l.addEventListener("click",()=>{if(!i||!c)return;let y=r.groups.find(b=>b.id===c.groupId),f=c.modifiers.map(b=>{let v=r.modifiers.find(E=>E.id===b);return v?v.name:b});c.express&&f.unshift("EXPRESS (+20%)"),t.cart.addItem({id:`wlepki-${Date.now()}`,category:"Wlepki / Naklejki",name:(y==null?void 0:y.title)||"Wlepki",quantity:c.area,unit:"m2",unitPrice:i.tierPrice,isExpress:!!c.express,totalPrice:i.totalPrice,optionsHint:f.join(", ")||"Standard",payload:i})})}};function _e(e,t){let r=e.format.toUpperCase(),a=Se({mode:e.mode,format:r,pages:e.printQty,email:e.email,ink25:e.surcharge,ink25Qty:e.surchargeQty}),n={total:0,unitPrice:0};e.scanType!=="none"&&e.scanQty>0&&(n=Me({type:e.scanType,pages:e.scanQty}));let o=a.grandTotal+n.total,l=o;return e.express&&(l=o*(1+P("modifier-express",.2))),{totalPrice:parseFloat(l.toFixed(2)),unitPrintPrice:a.unitPrice,totalPrintPrice:a.printTotal,unitScanPrice:n.unitPrice,totalScanPrice:n.total,emailPrice:a.emailTotal,surchargePrice:a.inkTotal,baseTotal:o}}var I=[{id:"druk-a4-a3-skan",name:"Druk A4/A3 + skan",icon:"\u{1F5A8}\uFE0F",implemented:!0,pricing:{print_bw:[{min:1,max:5,a4:.9,a3:1.7},{min:6,max:20,a4:.6,a3:1.1},{min:21,max:100,a4:.35,a3:.7},{min:101,max:500,a4:.3,a3:.6},{min:501,max:999,a4:.23,a3:.45},{min:1e3,max:4999,a4:.19,a3:.33},{min:5e3,max:null,a4:.15,a3:.3}],print_color:[{min:1,max:10,a4:2.4,a3:4.8},{min:11,max:40,a4:2.2,a3:4.2},{min:41,max:100,a4:2,a3:3.8},{min:101,max:250,a4:1.8,a3:3},{min:251,max:500,a4:1.6,a3:2.5},{min:501,max:999,a4:1.4,a3:1.9},{min:1e3,max:null,a4:1.1,a3:1.6}],scan_auto:[{min:1,max:9,price:1},{min:10,max:49,price:.5},{min:50,max:99,price:.4},{min:100,max:null,price:.25}],scan_manual:[{min:1,max:4,price:2},{min:5,max:null,price:1}],email_cost:1,surcharge_factor:.5}},{id:"druk-cad",name:"Druk CAD wielkoformatowy",icon:"\u{1F4D0}",implemented:!0,format_prices:{bw:{A0p:{length:1292,price:12.5},A0:{length:1189,price:11},A1:{length:841,price:6},A2:{length:594,price:4},A3:{length:420,price:2.5}},color:{A0p:{length:1292,price:26},A0:{length:1189,price:24},A1:{length:841,price:12},A2:{length:594,price:8.5},A3:{length:420,price:5.3}}},meter_prices:{bw:{A0p:10,A0:9,A1:5,A2:4.5,A3:3.5},color:{A0p:21,A0:20,A1:14.5,A2:13.9,A3:12}}},{id:"laminowanie",name:"Laminowanie",icon:"\u2728",implemented:!0},{id:"plakaty",name:"Plakaty",icon:"\u{1F5BC}\uFE0F",implemented:!0},{id:"solwent-plakaty",name:"Solwent - Plakaty",icon:"\u{1F5BC}\uFE0F",implemented:!0},{id:"vouchery",name:"Vouchery",icon:"\u{1F39F}\uFE0F",implemented:!0},{id:"dyplomy",name:"Dyplomy",icon:"\u{1F4DC}",implemented:!0},{id:"wizytowki-druk-cyfrowy",name:"Wizyt\xF3wki - druk cyfrowy",icon:"\u{1F4C7}",implemented:!0},{id:"zaproszenia-kreda",name:"Zaproszenia KREDA",icon:"\u2709\uFE0F",implemented:!0},{id:"ulotki-cyfrowe",name:"Ulotki cyfrowe",icon:"\u{1F4C4}",implemented:!0},{id:"banner",name:"Bannery",icon:"\u{1F3C1}",implemented:!0},{id:"wlepki-naklejki",name:"Wlepki / Naklejki",icon:"\u{1F3F7}\uFE0F",implemented:!0},{id:"roll-up",name:"Roll-up",icon:"\u2195\uFE0F",implemented:!0},{id:"folia-szroniona",name:"Folia szroniona",icon:"\u2744\uFE0F",implemented:!0},{id:"upload-kalkulator",name:"Upload Kalkulator CAD",icon:"\u{1F4D0}",implemented:!0},{id:"ustawienia",name:"Ustawienia cen",icon:"\u2699\uFE0F",implemented:!0}];var Ve={id:"druk-a4-a3-skan",name:"Druk A4/A3 + skan",async mount(e,t){try{let r=await fetch("categories/druk-a4-a3-skan.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){var T;let r=(T=I.find(w=>w.id==="druk-a4-a3-skan"))==null?void 0:T.pricing;if(!r)return;let a=e.querySelector("#d-mode"),n=e.querySelector("#d-format"),o=e.querySelector("#d-print-qty"),l=e.querySelector("#d-email"),d=e.querySelector("#d-surcharge"),p=e.querySelector("#d-surcharge-qty"),u=e.querySelector("#surcharge-qty-row"),i=e.querySelector("#d-scan-type"),c=e.querySelector("#d-scan-qty"),m=e.querySelector("#scan-qty-row"),y=e.querySelector("#d-calculate"),f=e.querySelector("#d-add-to-cart"),b=e.querySelector("#d-result-display"),v=e.querySelector("#d-total-price"),E=e.querySelector("#d-express-hint");e.querySelectorAll(".option-card").forEach(w=>{let g=()=>{let s=w.dataset.checked==="true";w.dataset.checked=String(!s),w.classList.toggle("checked",!s),w.setAttribute("aria-checked",String(!s));let h=w.querySelector("input[type='checkbox']");h&&(h.checked=!s),w.id==="d-surcharge-card"&&(u.style.display=s?"none":"flex")};w.addEventListener("click",g),w.addEventListener("keydown",s=>{(s.key===" "||s.key==="Enter")&&(s.preventDefault(),g())})}),i.onchange=()=>{m.style.display=i.value!=="none"?"flex":"none"};let S=null,x=null;y.onclick=()=>{x={mode:a.value,format:n.value,printQty:parseInt(o.value)||0,email:l.checked,surcharge:d.checked,surchargeQty:parseInt(p.value)||0,scanType:i.value,scanQty:parseInt(c.value)||0,express:t.expressMode};try{let w=_e(x,r);S=w,v.innerText=k(w.totalPrice),E&&(E.style.display=t.expressMode?"block":"none"),b.style.display="block",f.disabled=!1,t.updateLastCalculated(w.totalPrice,"Druk A4/A3 + skan")}catch(w){alert("B\u0142\u0105d: "+w.message)}},f.onclick=()=>{if(S&&x){let w=Date.now(),g=t.expressMode?1.2:1;if(x.printQty>0||x.scanQty>0&&x.scanType!=="none"){let s=[];x.printQty>0&&s.push(`${x.printQty} str. ${x.format.toUpperCase()} (${x.mode==="bw"?"CZ-B":"KOLOR"})`),x.scanQty>0&&x.scanType!=="none"&&s.push(`Skan ${x.scanType}: ${x.scanQty} str.`),t.expressMode&&s.push("EXPRESS");let h=(S.totalPrintPrice+S.totalScanPrice)*g;t.cart.addItem({id:`druk-${w}-main`,category:"Druk A4/A3 + skan",name:`${x.format.toUpperCase()} ${x.mode==="bw"?"CZ-B":"KOLOR"}`,quantity:x.printQty||x.scanQty,unit:x.printQty>0?"str.":"skan",unitPrice:h/(x.printQty||x.scanQty),isExpress:t.expressMode,totalPrice:parseFloat(h.toFixed(2)),optionsHint:s.join(", "),payload:{...S,type:"main"}})}if(x.email){let s=S.emailPrice*g;t.cart.addItem({id:`email-${w}-email`,category:"Druk A4/A3 + skan",name:"Wysy\u0142ka e-mail",quantity:1,unit:"szt.",unitPrice:s,isExpress:t.expressMode,totalPrice:parseFloat(s.toFixed(2)),optionsHint:t.expressMode?"EXPRESS":"",payload:{price:s,type:"email"}})}if(x.surcharge&&x.surchargeQty>0){let s=S.surchargePrice*g;t.cart.addItem({id:`surcharge-${w}-surcharge`,category:"Druk A4/A3 + skan",name:"Zadruk >25% - dop\u0142ata",quantity:x.surchargeQty,unit:"str.",unitPrice:s/x.surchargeQty,isExpress:t.expressMode,totalPrice:parseFloat(s.toFixed(2)),optionsHint:`${x.surchargeQty} str. (+50%), ${t.expressMode?"EXPRESS":""}`,payload:{price:s,type:"surcharge"}})}}}}};function je(e,t){let r=Ee({mode:e.mode,format:e.format,lengthMm:e.lengthMm,qty:e.qty||1}),a=r.total;return e.express&&(a=r.total*(1+P("modifier-express",.2))),{totalPrice:parseFloat(a.toFixed(2)),basePrice:r.total,detectedType:r.detectedType,isMeter:r.detectedType==="mb",rate:r.rate}}var Ka=M("drukCAD.price"),Wa=M("drukCAD.base");var Ne={id:"druk-cad",name:"Druk CAD wielkoformatowy",async mount(e,t){try{let r=await fetch("categories/druk-cad.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=I.find(x=>x.id==="druk-cad");if(!r)return;let a=e.querySelector("#cad-mode"),n=e.querySelector("#cad-format"),o=e.querySelector("#cad-length"),l=e.querySelector("#qty-sheets"),d=e.querySelector("#qty-sheets-group"),p=e.querySelector("#cad-use-base"),u=e.querySelector("#cad-base-info"),i=e.querySelector("#cad-calculate"),c=e.querySelector("#cad-add-to-cart"),m=e.querySelector("#cad-result-display"),y=e.querySelector("#cad-price-type"),f=e.querySelector("#cad-total-price"),b=e.querySelector("#cad-express-hint"),v=()=>{let x=n.value,T=a.value,w=r.format_prices[T][x].length;u.innerText=`Wymiar bazowy: ${w} mm`;let g=parseInt(o.value)||0,s=Math.abs(g-w)<=.5;return d.style.display=s?"grid":"none",w};n.onchange=v,a.onchange=v,o.oninput=v,p.onclick=()=>{o.value=v().toString(),v()},v();let E=null,S=null;i.onclick=()=>{S={mode:a.value,format:n.value,lengthMm:parseInt(o.value)||0,qty:parseInt(l.value)||1,express:t.expressMode};try{let x=je(S,r);E=x,y.innerText=x.isMeter?"Cena metrowa:":"Cena formatowa:",f.innerText=k(x.totalPrice),b&&(b.style.display=t.expressMode?"block":"none"),m.style.display="block",c.disabled=!1,t.updateLastCalculated(x.totalPrice,"Druk CAD")}catch(x){alert("B\u0142\u0105d: "+x.message)}},c.onclick=()=>{if(E&&S){let x=E.isMeter?"":`${S.qty} szt, `,T=[`${S.format} (${S.mode==="bw"?"CZ-B":"KOLOR"})`,`${x}${S.lengthMm} mm`,t.expressMode?"EXPRESS":""].filter(Boolean).join(", ");t.cart.addItem({id:`cad-${Date.now()}`,category:"Druk CAD wielkoformatowy",name:`${S.format} ${S.mode==="bw"?"CZ-B":"KOLOR"}`,quantity:S.lengthMm,unit:"mm",unitPrice:E.basePrice/S.lengthMm,isExpress:t.expressMode,totalPrice:E.totalPrice,optionsHint:T,payload:E})}}}};var zt=M("laminowanie");function Ct(e){let t=zt.formats[e];if(!t)throw new Error(`Invalid format: ${e}`);return{id:`laminowanie-${e.toLowerCase()}`,title:`Laminowanie ${e}`,unit:"szt",pricing:"per_unit",tiers:C(`laminowanie-${e.toLowerCase()}`,t),modifiers:[{id:"express",name:"TRYB EXPRESS",type:"percent",value:P("modifier-express",.2)}]}}function Ue(e){let t=Ct(e.format),r=[];return e.express&&r.push("express"),z(t,e.qty,r)}var Ke={id:"laminowanie",name:"Laminowanie",async mount(e,t){try{let r=await fetch("categories/laminowanie.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#lam-format"),a=e.querySelector("#lam-qty"),n=e.querySelector("#lam-calculate"),o=e.querySelector("#lam-add-to-cart"),l=e.querySelector("#lam-result-display"),d=e.querySelector("#lam-total-price"),p=e.querySelector("#lam-express-hint"),u=null,i=null,c=()=>{let m=parseInt(a.value);if(!(isNaN(m)||m<=0)){i={format:r.value,qty:m,express:t.expressMode};try{let y=Ue(i);u=y,d.innerText=k(y.totalPrice),p&&(p.style.display=t.expressMode?"block":"none"),l.style.display="block",o.disabled=!1,t.updateLastCalculated(y.totalPrice,"Laminowanie")}catch{}}};n.onclick=c,o.onclick=()=>{if(u&&i){let m=i.express?", EXPRESS":"";t.cart.addItem({id:`laminowanie-${Date.now()}`,category:"Laminowanie",name:`Laminowanie ${i.format}`,quantity:i.qty,unit:"szt",unitPrice:u.totalPrice/i.qty,isExpress:i.express,totalPrice:u.totalPrice,optionsHint:`${i.qty} szt, Format ${i.format}${m}`,payload:u})}},[r,a].forEach(m=>{m.addEventListener("change",c)}),a.addEventListener("input",c)}};var Ht=M("foliaSzroniona");function We(e){var p;let t=Ht,r=t.materials.find(u=>u.id===e.serviceId);if(!r)throw new Error(`Unknown service: ${e.serviceId}`);let a=e.widthMm*e.heightMm/1e6,n={id:t.id,title:t.title,unit:t.unit,pricing:t.pricing,rules:t.rules,tiers:C(`folia-szroniona-${(p=r.storageId)!=null?p:r.id}`,r.tiers),modifiers:t.modifiers},o=[];e.express&&o.push("express");let l=z(n,a,o),d=e.serviceId==="full-service"&&a>20;return{...l,isCustom:d}}var Qe={id:"folia-szroniona",name:"Folia szroniona",async mount(e,t){try{let r=await fetch("categories/folia-szroniona.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#fs-service"),a=e.querySelector("#fs-width"),n=e.querySelector("#fs-height"),o=e.querySelector("#fs-calculate"),l=e.querySelector("#fs-add-to-cart"),d=e.querySelector("#fs-result-display"),p=e.querySelector("#fs-normal-result"),u=e.querySelector("#fs-custom-quote"),i=e.querySelector("#fs-area-val"),c=e.querySelector("#fs-unit-price"),m=e.querySelector("#fs-total-price"),y=e.querySelector("#fs-express-hint"),f=null,b=null;o.onclick=()=>{b={serviceId:r.value,widthMm:parseInt(a.value)||0,heightMm:parseInt(n.value)||0,express:t.expressMode};try{let v=We(b);if(f=v,v.isCustom)p.style.display="none",u.style.display="block",l.disabled=!0,t.updateLastCalculated(0,"Folia szroniona (wycena ind.)");else{p.style.display="block",u.style.display="none";let E=b.widthMm*b.heightMm/1e6;i.innerText=`${E.toFixed(2)} m2${v.effectiveQuantity>E?" (min. 1m2)":""}`,c.innerText=k(v.tierPrice),m.innerText=k(v.totalPrice),l.disabled=!1,t.updateLastCalculated(v.totalPrice,"Folia szroniona")}y&&(y.style.display=t.expressMode?"block":"none"),d.style.display="block"}catch(v){alert("B\u0142\u0105d: "+v.message)}},l.onclick=()=>{if(f&&b){let v=r.options[r.selectedIndex].text,E=b.widthMm*b.heightMm/1e6,S=[`${b.widthMm}x${b.heightMm} mm`,`${E.toFixed(2)} m2`,t.expressMode?"EXPRESS":""].filter(Boolean).join(", ");t.cart.addItem({id:`fs-${Date.now()}`,category:"Folia szroniona",name:v,quantity:E,unit:"m2",unitPrice:f.tierPrice,isExpress:t.expressMode,totalPrice:f.totalPrice,optionsHint:S,payload:f})}}}};var W="razdwa_prices",D=null;function Xe(){try{let e=localStorage.getItem(W);if(e){let t=JSON.parse(e);if(t&&typeof t=="object"&&!Array.isArray(t)){let r={};for(let[a,n]of Object.entries(t))a&&typeof n=="number"&&isFinite(n)&&(r[a]=n);if(Object.keys(r).length>0)return r}}}catch{}return{...G}}function Ze(e){localStorage.setItem(W,JSON.stringify(e))}var Je={id:"ustawienia",name:"Ustawienia cen",mount(e,t){D&&(D(),D=null);let r=Xe();function a(){var d,p,u;let o=Object.keys(r).sort(),l=o.map(i=>`
        <tr data-key="${re(i)}" style="border-bottom: 1px solid rgba(255,255,255,0.08);">
          <td style="padding:4px 8px;">
            <input data-field="key" value="${re(i)}"
              style="background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);border-radius:4px;color:inherit;padding:4px 6px;width:100%;font-size:12px;font-family:monospace;">
          </td>
          <td style="padding:4px 8px;">
            <input data-field="unitPrice" type="number" step="0.01" min="0" value="${Number(r[i]).toFixed(2)}"
              style="background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);border-radius:4px;color:inherit;padding:4px 6px;width:90px;font-size:13px;text-align:right;">
          </td>
          <td style="padding:4px; text-align:center;">
            <button data-action="delete" data-key="${re(i)}"
              style="background:rgba(220,50,50,0.7);border:none;border-radius:4px;color:#fff;cursor:pointer;padding:3px 8px;font-size:13px;">\u2715</button>
          </td>
        </tr>
      `).join("");e.innerHTML=`
        <div style="padding: 20px;">
          <h2 style="margin: 0 0 8px; font-size: 20px;">\u2699\uFE0F Ustawienia \u2013 Cennik</h2>
          <p style="margin: 0 0 16px; font-size: 13px; color: rgba(255,255,255,0.6);">
            Ceny wszystkich zakres\xF3w/produkt\xF3w zapisywane w przegl\u0105darce (<code>razdwa_prices</code>).
            Klucz: <code>kategoria-zakres</code> (np. <code>druk-bw-a4-1-5</code>). \u0141\u0105cznie: <strong>${o.length}</strong> pozycji.
          </p>

          <table id="prices-table" style="width:100%; border-collapse:collapse; font-size:14px; margin-bottom:16px;">
            <thead>
              <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                <th style="text-align:left; padding:6px 8px;">Klucz (kategoria-zakres)</th>
                <th style="text-align:right; padding:6px 8px; width:120px;">Cena jedn. (z\u0142)</th>
                <th style="padding:4px; width:60px;"></th>
              </tr>
            </thead>
            <tbody>
              ${l}
            </tbody>
          </table>

          <div style="display:flex; gap:8px; flex-wrap:wrap;">
            <button id="btn-add-row"
              style="background:rgba(60,130,60,0.8);border:none;border-radius:6px;color:#fff;cursor:pointer;padding:8px 16px;font-size:14px;">
              + Dodaj pozycj\u0119
            </button>
            <button id="btn-save"
              style="background:rgba(40,100,200,0.85);border:none;border-radius:6px;color:#fff;cursor:pointer;padding:8px 16px;font-size:14px;">
              \u{1F4BE} Zapisz i od\u015Bwie\u017C
            </button>
            <button id="btn-reset"
              style="background:rgba(100,100,100,0.7);border:none;border-radius:6px;color:#fff;cursor:pointer;padding:8px 16px;font-size:14px;">
              \u{1F504} Przywr\xF3\u0107 domy\u015Blne
            </button>
          </div>

          <div id="save-msg" style="display:none; margin-top:12px; padding:8px 12px; background:rgba(50,180,50,0.25); border-radius:6px; font-size:13px;">
            \u2713 Zapisano. Inne karty zostan\u0105 od\u015Bwie\u017Cone automatycznie.
          </div>
        </div>
      `,e.querySelectorAll("[data-action='delete']").forEach(i=>{i.addEventListener("click",()=>{var m;let c=(m=i.dataset.key)!=null?m:"";c&&(delete r[c],a())})}),(d=e.querySelector("#btn-add-row"))==null||d.addEventListener("click",()=>{var m,y;let i="nowa-pozycja-"+Date.now();r[i]=0,a();let c=e.querySelectorAll("tbody tr input[data-field='key']");(m=c[c.length-1])==null||m.focus(),(y=c[c.length-1])==null||y.select()}),(p=e.querySelector("#btn-save"))==null||p.addEventListener("click",()=>{let i={};e.querySelectorAll("tbody tr[data-key]").forEach(m=>{var v,E;let y=m.querySelector("input[data-field='key']"),f=m.querySelector("input[data-field='unitPrice']"),b=(v=y==null?void 0:y.value.trim())!=null?v:"";b&&(i[b]=parseFloat((E=f==null?void 0:f.value)!=null?E:"0")||0)}),r=i,Ze(r),window.dispatchEvent(new StorageEvent("storage",{key:W}));let c=e.querySelector("#save-msg");c&&(c.style.display="block",setTimeout(()=>{c.style.display="none"},3e3))}),(u=e.querySelector("#btn-reset"))==null||u.addEventListener("click",()=>{confirm("Przywr\xF3ci\u0107 domy\u015Blne ceny? Twoje zmiany zostan\u0105 utracone.")&&(r={...G},Ze(r),a())})}a();let n=o=>{o.key===W&&(r=Xe(),a())};window.addEventListener("storage",n),D=()=>window.removeEventListener("storage",n)},unmount(){D&&(D(),D=null)}};function re(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Q(e,t){let r=Math.min(e,t);return r>=H.A0p.w?"A0p":r>=H.A0.w?"A0":r>=H.A1.w?"A1":r>=H.A2.w?"A2":r>=H.A3.w?"A3":"nieformatowy"}function X(e,t,r,a){if(e<=0||t<=0)return 0;let n=Q(e,t),o=Math.max(e,t);if(n==="nieformatowy"){let p=B[r].mb.A3;return parseFloat((o/1e3*p*a).toFixed(2))}let l=H[n];if(Math.abs(o-l.l)<=N){let p=B[r].formatowe[n];return parseFloat((p*a).toFixed(2))}else{let p=B[r].mb[n];return parseFloat((o/1e3*p*a).toFixed(2))}}var Ye=50,Ge=25.4/300;function R(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function $t(e,t){let r;return(...a)=>{clearTimeout(r),r=setTimeout(()=>e(...a),t)}}var et={id:"cad-upload",name:"CAD Upload plik\xF3w",async mount(e,t){try{let r=await fetch("categories/cad-upload.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#cadDropZone");if(!r)return;let a=e.querySelector("#cadFileInput"),n=e.querySelector("#cadFileList"),o=e.querySelector("#cadSummary"),l=e.querySelector("#cadFileCount"),d=e.querySelector("#cadTotal"),p=e.querySelector("#cadWarning"),u=e.querySelector("#cadPrzelicz"),i=e.querySelector("#cadTableBody"),c=e.querySelector("#grandTotal"),m=e.querySelector("#cadMode"),y=1,f=[];function b(){return(m==null?void 0:m.value)==="bw"?"bw":"color"}function v(g,s){let h=new Image,q=URL.createObjectURL(g);h.onload=()=>{URL.revokeObjectURL(q),s.widthPx=h.naturalWidth,s.heightPx=h.naturalHeight,s.widthMm=Math.round(h.naturalWidth*Ge),s.heightMm=Math.round(h.naturalHeight*Ge),T()},h.onerror=()=>URL.revokeObjectURL(q),h.src=q}r.addEventListener("click",()=>a.click()),r.addEventListener("keydown",g=>{(g.key==="Enter"||g.key===" ")&&a.click()}),r.addEventListener("dragenter",g=>{g.preventDefault(),r.classList.add("drag-over")}),r.addEventListener("dragover",g=>{g.preventDefault(),r.classList.add("drag-over")}),r.addEventListener("dragleave",g=>{r.contains(g.relatedTarget)||r.classList.remove("drag-over")}),r.addEventListener("drop",g=>{var s;g.preventDefault(),r.classList.remove("drag-over"),(s=g.dataTransfer)!=null&&s.files&&S(g.dataTransfer.files)}),a.addEventListener("change",g=>{let s=g.target;s.files&&S(s.files),s.value=""}),m==null||m.addEventListener("change",()=>T()),u==null||u.addEventListener("click",()=>w());let E=$t(w,300);n.addEventListener("click",g=>{let s=g.target.closest("[data-delete]");s!=null&&s.dataset.delete&&x(Number(s.dataset.delete))}),n.addEventListener("input",g=>{let s=g.target.closest(".cad-qty-input");if(!s)return;let h=f.find(rt=>String(rt.id)===s.dataset.qtyid);if(!h)return;let q=parseInt(s.value,10);if(isNaN(q)||q<1){s.value=String(h.qty);return}h.qty=Math.min(999,q);let L=b(),$=h.widthMm>0&&h.heightMm>0?X(h.widthMm,h.heightMm,L,h.qty):0,_=s.closest(".cad-file-item"),V=_==null?void 0:_.querySelector(".cad-file-price");V&&(V.textContent=$>0?k($):"\u2014"),E()});function S(g){for(let s of Array.from(g)){let h={id:y++,name:s.name,sizeMB:(s.size/1048576).toFixed(2),qty:1,widthPx:0,heightPx:0,widthMm:0,heightMm:0};f.push(h),s.type.startsWith("image/")&&v(s,h)}p&&(p.style.display=f.length>Ye?"":"none"),T()}function x(g){f=f.filter(s=>s.id!==g),p&&(p.style.display=f.length>Ye?"":"none"),T()}function T(){if(f.length===0){n.innerHTML="",o&&(o.style.display="none"),i&&(i.innerHTML=""),c&&(c.textContent="0,00 z\u0142");return}o&&(o.style.display="");let g=b();n.innerHTML=f.map(s=>{let h=s.widthMm>0&&s.heightMm>0?Q(s.widthMm,s.heightMm):"",q=s.widthMm>0&&s.heightMm>0?`${s.widthPx}\xD7${s.heightPx} px / ${s.widthMm}\xD7${s.heightMm} mm`:s.widthPx===0&&s.name.match(/\.(jpg|jpeg|png|tif|tiff)$/i)?"\u23F3 wykrywanie\u2026":"\u2014",L=s.widthMm>0&&s.heightMm>0?X(s.widthMm,s.heightMm,g,s.qty):0;return`
        <div class="cad-file-item" data-fileid="${s.id}">
          <button class="cad-delete-x" data-delete="${s.id}"
                  aria-label="Usu\u0144 ${R(s.name)}" title="Usu\u0144 plik">\u2715</button>
          <span class="cad-file-name" title="${R(s.name)}">${R(s.name)}</span>
          <span class="cad-file-size">${s.sizeMB} MB</span>
          <span style="color:var(--text-secondary,#666);font-size:0.85rem;white-space:nowrap">${R(q)}</span>
          ${h?`<span class="cad-format-badge">${R(h)}</span>`:""}
          <label class="cad-qty-label">
            Kop.:
            <input type="number" class="cad-qty-input" data-qtyid="${s.id}"
                   value="${s.qty}" min="1" max="999"
                   aria-label="Ilo\u015B\u0107 kopii dla ${R(s.name)}" />
          </label>
          <span class="cad-file-price">${L>0?k(L):"\u2014"}</span>
        </div>
      `}).join(""),w()}function w(){let g=b(),s=0,h=[];for(let L of f){let $=L.widthMm>0&&L.heightMm>0?X(L.widthMm,L.heightMm,g,L.qty):0;s+=$;let _=L.widthMm>0&&L.heightMm>0?Q(L.widthMm,L.heightMm):"\u2014",V=L.widthMm>0&&L.heightMm>0?`${_} (${L.widthMm}\xD7${L.heightMm} mm)`:"\u2014";h.push(`
          <tr>
            <td>${R(L.name)}<br><small style="color:var(--text-secondary,#666)">${V}</small></td>
            <td>${$>0?k($):"\u2014"}</td>
            <td>\u2014</td>
            <td>\u2014</td>
            <td><strong>${$>0?k($):"\u2014"}</strong></td>
          </tr>
        `)}i&&(i.innerHTML=h.length>0?h.join(""):'<tr><td colspan="5" style="text-align:center;color:var(--text-secondary,#666)">Brak plik\xF3w</td></tr>'),c&&(c.textContent=k(s)),d&&(d.textContent=k(s));let q=f.length;l&&(l.textContent=String(q)),q>0&&(t.updateLastCalculated(s,"CAD Upload"),t.cart.addItem({id:"cad-upload",category:"CAD Upload",name:`${q} plik${q===1?"":q<5?"i":"\xF3w"}`,quantity:q,unit:"szt",unitPrice:s/q,totalPrice:s,optionsHint:`${q} plik\xF3w, tryb: ${g==="color"?"kolor":"czarno-bia\u0142e"}`,payload:{files:f.map(L=>({name:L.name,qty:L.qty,widthMm:L.widthMm,heightMm:L.heightMm})),totalPrice:s}}))}}};var Z=class{constructor(){this.items=[];this.storageKey="razdwa-cart-v1";this.load()}load(){try{let t=localStorage.getItem(this.storageKey);t&&(this.items=JSON.parse(t))}catch{this.items=[]}}save(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.items))}catch{}}addItem(t){this.items.push(t),this.save()}removeItem(t){t>=0&&t<this.items.length&&(this.items.splice(t,1),this.save())}clear(){this.items=[],this.save()}getItems(){return[...this.items]}getGrandTotal(){return this.items.reduce((t,r)=>t+r.totalPrice,0)}isEmpty(){return this.items.length===0}};function tt(e,t){if(typeof XLSX=="undefined"){alert("B\u0142\u0105d: Biblioteka Excel nie zosta\u0142a wczytana.");return}let r=e.map(d=>({Kategoria:d.category,Nazwa:d.name,Ilo\u015B\u0107:d.quantity,Jednostka:d.unit,"Cena jedn.":d.unitPrice,"Express (+20%)":d.isExpress?"TAK":"NIE","Cena ca\u0142kowita":d.totalPrice,Klient:t.name,Telefon:t.phone,Email:t.email,Priorytet:t.priority})),a=XLSX.utils.json_to_sheet(r),n=XLSX.utils.book_new();XLSX.utils.book_append_sheet(n,a,"Zam\xF3wienie");let o=new Date().toISOString().slice(0,10),l=`Zamowienie_${t.name.replace(/\s+/g,"_")}_${o}.xlsx`;XLSX.writeFile(n,l)}var F=new Z;function At(e){let t=document.createElement("div");t.className="toast",t.innerText=e,document.body.appendChild(t),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>t.remove(),300)},2e3)}function J(){let e=document.getElementById("basketList"),t=document.getElementById("basketTotal"),r=document.getElementById("basketDebug");if(!e||!t||!r)return;let a=F.getItems();a.length===0?e.innerHTML=`
      <div class="basketItem">
        <div>
          <div class="basketTitle">Brak pozycji</div>
          <div class="basketMeta">Kliknij \u201EDodaj\u201D, aby zbudowa\u0107 list\u0119.</div>
        </div>
        <div class="basketPrice">\u2014</div>
      </div>
    `:e.innerHTML=a.map((o,l)=>`
      <div class="basketItem">
        <div style="min-width:0;">
          <div class="basketTitle">${o.category}: ${o.name}</div>
          <div class="basketMeta">${o.optionsHint} (${o.quantity} ${o.unit})</div>
        </div>
        <div style="display:flex; gap:10px; align-items:center;">
          <div class="basketPrice">${k(o.totalPrice)}</div>
          <button class="iconBtn" data-remove-idx="${l}" title="Usu\u0144">\xD7</button>
        </div>
      </div>
    `).join("");let n=F.getGrandTotal();t.innerText=k(n),r.innerText=JSON.stringify(a.map(o=>o.payload),null,2)}document.addEventListener("DOMContentLoaded",()=>{var l,d,p;let e=document.getElementById("viewContainer"),t=document.getElementById("categorySelector"),r=document.getElementById("categorySearch"),a=document.getElementById("globalExpress");if(document.addEventListener("click",u=>{var c;let i=u.target.closest("[data-remove-idx]");if(i){let m=parseInt((c=i.dataset.removeIdx)!=null?c:"",10);isNaN(m)||(F.removeItem(m),J())}}),!e||!t||!a||!r)return;let n=()=>({cart:{addItem:u=>{F.addItem(u),J(),At("\u2713 Dodano do listy")}},expressMode:a.checked,updateLastCalculated:(u,i)=>{let c=document.getElementById("currentPrice"),m=document.getElementById("currentHint");c&&(c.innerText=k(u)),m&&(m.innerText=i?`(${i})`:"")}}),o=new j(e,n);o.setCategories(I),o.addRoute(ye),o.addRoute(Ve),o.addRoute(Ne),o.addRoute(me),o.addRoute(we),o.addRoute(he),o.addRoute(Le),o.addRoute(ze),o.addRoute($e),o.addRoute(De),o.addRoute(Fe),o.addRoute(Oe),o.addRoute(Ke),o.addRoute(Qe),o.addRoute(et),o.addRoute(Je),I.forEach(u=>{let i=document.createElement("option");i.value=u.id,i.innerText=`${u.icon} ${u.name}`,u.implemented||(i.disabled=!0,i.innerText+=" (wkr\xF3tce)"),t.appendChild(i)}),t.addEventListener("change",()=>{let u=t.value;u?window.location.hash=`#/${u}`:window.location.hash="#/"}),r.addEventListener("input",()=>{let u=r.value.toLowerCase();Array.from(t.options).forEach((c,m)=>{if(m===0)return;let y=c.text.toLowerCase();c.hidden=!y.includes(u)})}),r.addEventListener("keydown",u=>{if(u.key==="Enter"){let i=r.value.toLowerCase(),c=Array.from(t.options).find((m,y)=>y>0&&!m.hidden&&!m.disabled);c&&(t.value=c.value,window.location.hash=`#/${c.value}`,r.value="")}}),window.addEventListener("hashchange",()=>{let i=(window.location.hash||"#/").slice(2);t.value=i}),a.addEventListener("change",()=>{let u=document.getElementById("orderSummary");u&&u.classList.toggle("is-express",a.checked);let i=window.location.hash;window.location.hash="",window.location.hash=i}),(l=document.getElementById("copyBtn"))==null||l.addEventListener("click",()=>{var c;let u=document.getElementById("basketTotal"),i=u?`Suma: ${u.innerText}`:"Brak pozycji";(c=navigator.clipboard)==null||c.writeText(i)}),(d=document.getElementById("clearBtn"))==null||d.addEventListener("click",()=>{F.clear(),J()}),(p=document.getElementById("sendBtn"))==null||p.addEventListener("click",()=>{let u={name:document.getElementById("custName").value||"Anonim",phone:document.getElementById("custPhone").value||"-",email:document.getElementById("custEmail").value||"-",priority:document.getElementById("custPriority").value};if(F.isEmpty()){alert("Lista jest pusta!");return}tt(F.getItems(),u)}),J(),o.start()});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(()=>{}).catch(()=>{})});})();
