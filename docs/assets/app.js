"use strict";(()=>{var j=class{constructor(t,r){this.routes=new Map;this.currentView=null;this.categories=[];this.container=t,this.getCtx=r,window.addEventListener("hashchange",()=>{this.handleRoute().catch(()=>{this.renderHome()})})}setCategories(t){this.categories=t}addRoute(t){this.routes.set(t.id,t)}async handleRoute(){var i;let t=window.location.hash||"#/",r=t.startsWith("#/")?t.slice(2):"";if(r=r.replace(/^\/+/,""),!r){this.renderHome();return}(i=this.currentView)!=null&&i.unmount&&this.currentView.unmount();let o=this.routes.get(r);if(o)this.currentView=o,await o.mount(this.container,this.getCtx());else try{let a=await fetch(`categories/${r}.html`);if(a.ok){this.currentView=null,this.container.innerHTML=await a.text(),this.container.querySelectorAll("script").forEach(s=>{var d;let m=document.createElement("script");m.textContent=(d=s.textContent)!=null?d:"",s.replaceWith(m)});try{let s=await fetch(`categories/${r}.js`);if(s.ok){let m=document.createElement("script");m.textContent=await s.text(),this.container.appendChild(m)}}catch{}}else this.renderHome()}catch{this.renderHome()}}renderHome(){this.container.innerHTML=`
      <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.8);">
        <h2 style="margin:0; font-size: 24px;">Witaj w kalkulatorze Raz Druku Dwa</h2>
        <p style="margin-top: 10px;">Wybierz kategori\u0119 z panelu powy\u017Cej, aby rozpocz\u0105\u0107 obliczenia.</p>
      </div>
    `}start(){this.handleRoute()}};function rt(e,t){let r=[...e].sort((a,s)=>a.min-s.min),o=r.find(a=>t>=a.min&&(a.max===null||t<=a.max));if(o)return o;let i=r.find(a=>a.min>=t);return i!=null?i:r[r.length-1]}function ae(e,t){var s;let r=((s=e.rules)!=null?s:[]).find(m=>m.type==="minimum"&&m.unit==="m2"),o=r&&t<r.value?r.value:t,i=rt(e.tiers,o);return{basePrice:e.pricing==="per_unit"?o*i.price:i.price,effectiveQuantity:o,tierPrice:i.price}}function oe(e,t,r,o){let i=0,a=[];for(let s of r){let m=o.find(d=>d.id===s);m&&(a.push(m.name),m.type==="percent"?i+=e*m.value:m.type==="fixed_per_unit"?i+=m.value*t:i+=m.value)}return{modifiersTotal:i,appliedModifiers:a}}function ie(e){return 0}function C(e,t,r=[]){var n,p;let{basePrice:o,effectiveQuantity:i,tierPrice:a}=ae(e,t),{modifiersTotal:s,appliedModifiers:m}=oe(o,i,r,(n=e.modifiers)!=null?n:[]),d=o+s;d+=ie(d),d=d;let l=((p=e.rules)!=null?p:[]).find(c=>c.type==="minimum"&&c.unit==="pln");return l&&d<l.value&&(d=l.value),{basePrice:o,effectiveQuantity:i,tierPrice:a,modifiersTotal:s,totalPrice:parseFloat(d.toFixed(2)),appliedModifiers:m}}var ne={drukA4A3:{print:{bw:{A4:[{from:1,to:5,unit:.9},{from:6,to:20,unit:.6},{from:21,to:100,unit:.35},{from:101,to:500,unit:.3},{from:501,to:999,unit:.23},{from:1e3,to:4999,unit:.19},{from:5e3,to:99999,unit:.15}],A3:[{from:1,to:5,unit:1.7},{from:6,to:20,unit:1.1},{from:21,to:100,unit:.7},{from:101,to:500,unit:.6},{from:501,to:999,unit:.45},{from:1e3,to:99999,unit:.33}]},color:{A4:[{from:1,to:10,unit:2.4},{from:11,to:40,unit:2.2},{from:41,to:100,unit:2},{from:101,to:250,unit:1.8},{from:251,to:500,unit:1.6},{from:501,to:999,unit:1.4},{from:1e3,to:99999,unit:1.1}],A3:[{from:1,to:10,unit:4.8},{from:11,to:40,unit:4.2},{from:41,to:100,unit:3.8},{from:101,to:250,unit:3},{from:251,to:500,unit:2.5},{from:501,to:999,unit:1.9},{from:1e3,to:99999,unit:1.6}]}},scan:{auto:[{from:1,to:9,unit:1},{from:10,to:49,unit:.5},{from:50,to:99,unit:.4},{from:100,to:999999999,unit:.25}],manual:[{from:1,to:4,unit:2},{from:5,to:999999999,unit:1}]},email_price:1},drukCAD:{price:{color:{formatowe:{A0p:26,A0:24,A1:12,A2:8.5,A3:5.3},mb:{A0p:21,A0:20,A1:14.5,A2:13.9,A3:12,R1067:30}},bw:{formatowe:{A0p:12.5,A0:11,A1:6,A2:4,A3:2.5},mb:{A0p:10,A0:9,A1:5,A2:4.5,A3:3.5,R1067:12.5}}},base:{A0p:{w:914,l:1292,label:"A0+"},A0:{w:841,l:1189,label:"A0"},A1:{w:594,l:841,label:"A1"},A2:{w:420,l:594,label:"A2"},A3:{w:297,l:420,label:"A3"},R1067:{w:1067,l:0,label:"Roll 1067"}},fold:{A0p:4,A0:3,A1:2,A2:1.5,A3:1,A3L:.7},wfScanPerCm:.08,tolerance:.5},wizytowki:{cyfrowe:{standardPrices:{"85x55":{noLam:{"50":65,"100":75,"150":85,"200":96,"250":110,"300":126,"400":146,"500":170,"1000":290},lam:{"50":160,"100":170,"150":180,"200":190,"250":200,"300":220,"400":240,"500":250,"1000":335}},"90x50":{noLam:{"50":70,"100":79,"150":89,"200":99,"250":120,"300":129,"400":149,"500":175,"1000":300},lam:{"50":170,"100":180,"150":190,"200":200,"250":210,"300":230,"400":250,"500":260,"1000":345}}},softtouchPrices:{"85x55":{noLam:{"50":65,"100":75,"150":85,"200":96,"250":110,"300":126,"400":145,"500":170,"1000":290},lam:{"50":170,"100":190,"150":210,"200":220,"250":230,"300":240,"400":260,"500":270,"1000":380}},"90x50":{noLam:{"50":70,"100":79,"150":89,"200":99,"250":120,"300":129,"400":149,"500":175,"1000":300},lam:{"50":170,"100":190,"150":210,"200":220,"250":230,"300":240,"400":260,"500":270,"1000":390}}},deluxe:{leadTime:"4\u20135 dni roboczych",options:{uv3d_softtouch:{label:"Maker UV 3D + folia SOFTTOUCH",prices:{"50":280,"100":320,"200":395,"250":479,"400":655,"500":778}},uv3d_gold_softtouch:{label:"Maker UV 3D + z\u0142ocenie + folia SOFTTOUCH",prices:{"50":450,"100":550,"200":650,"250":720,"400":850,"500":905}}}}}},banner:{id:"banner",title:"Bannery",unit:"m2",pricing:"per_unit",materials:[{id:"powlekany",name:"Banner powlekany",tiers:[{min:1,max:25,price:53},{min:26,max:50,price:49},{min:51,max:null,price:45}]},{id:"blockout",name:"Banner Blockout",tiers:[{min:1,max:25,price:64},{min:26,max:50,price:59},{min:51,max:null,price:55}]}],modifiers:[{id:"oczkowanie",name:"Oczkowanie (+2.50 z\u0142/m2)",type:"fixed_per_unit",value:2.5},{id:"express",name:"TRYB EXPRESS (+20%)",type:"percent",value:.2}]},laminowanie:{formats:{A3:[{min:1,max:50,price:7},{min:51,max:100,price:6},{min:101,max:200,price:5}],A4:[{min:1,max:50,price:5},{min:51,max:100,price:4.5},{min:101,max:200,price:4}],A5:[{min:1,max:50,price:4},{min:51,max:100,price:3.5},{min:101,max:200,price:3}],A6:[{min:1,max:50,price:3},{min:51,max:100,price:2.5},{min:101,max:200,price:2}]}},vouchery:[{qty:1,single:20,double:25},{qty:2,single:29,double:32},{qty:3,single:30,double:37},{qty:4,single:32,double:39},{qty:5,single:35,double:43},{qty:6,single:39,double:45},{qty:7,single:41,double:48},{qty:8,single:45,double:50},{qty:9,single:48,double:52},{qty:10,single:52,double:58},{qty:15,single:60,double:70},{qty:20,single:67,double:82},{qty:25,single:74,double:100},{qty:30,single:84,double:120}],rollUp:{name:"Roll-up Jednostronny",formats:{"85x200":{width:.85,height:2,tiers:[{min:1,max:5,price:290},{min:6,max:10,price:275}]},"100x200":{width:1,height:2,tiers:[{min:1,max:5,price:305},{min:6,max:10,price:285}]},"120x200":{width:1.2,height:2,tiers:[{min:1,max:5,price:330},{min:6,max:10,price:310}]},"150x200":{width:1.5,height:2,tiers:[{min:1,max:5,price:440},{min:6,max:10,price:425}]}},replacement:{labor:50,print_per_m2:80}},foliaSzroniona:{id:"folia-szroniona",title:"Folia szroniona",unit:"m2",pricing:"per_unit",rules:[{type:"minimum",unit:"m2",value:1}],materials:[{id:"material-only",storageId:"wydruk",name:"Tylko wydruk",tiers:[{min:1,max:5,price:65},{min:6,max:25,price:60},{min:26,max:50,price:56},{min:51,max:null,price:51}]},{id:"full-service",storageId:"oklejanie",name:"Wydruk z oklejaniem",tiers:[{min:1,max:5,price:140},{min:6,max:10,price:130},{min:11,max:20,price:120},{min:21,max:null,price:0}]}],modifiers:[{id:"express",name:"EXPRESS (+20%)",type:"percent",value:.2}]},wlepkiNaklejki:{category:"Wlepki / Naklejki",groups:[{id:"wlepki_obrys_folia",title:"Wlepki po obrysie (Folia Bia\u0142a/Trans)",unit:"m2",pricing:"per_unit",tiers:[{min:1,max:5,price:67},{min:6,max:25,price:60},{min:26,max:50,price:52},{min:51,max:null,price:48}],rules:[{type:"minimum",unit:"m2",value:1}]},{id:"wlepki_polipropylen",title:"Wlepki po obrysie - Polipropylen",unit:"m2",pricing:"per_unit",tiers:[{min:1,max:10,price:50},{min:11,max:null,price:42}],rules:[{type:"minimum",unit:"m2",value:1}]},{id:"wlepki_standard_folia",title:"Folia Bia\u0142a / Transparentna (standard)",unit:"m2",pricing:"per_unit",tiers:[{min:1,max:5,price:54},{min:6,max:25,price:50},{min:26,max:50,price:46},{min:51,max:null,price:42}],rules:[{type:"minimum",unit:"m2",value:1}]}],modifiers:[{id:"mocny_klej",name:"Mocny klej",type:"percent",value:.12},{id:"arkusze",name:"Ci\u0119te na arkusze",type:"fixed_per_unit",value:2},{id:"pojedyncze",name:"Ci\u0119te na pojedyncze sztuki",type:"fixed_per_unit",value:10},{id:"express",name:"EXPRESS",type:"percent",value:.2}]},zaproszeniaKreda:{name:"Zaproszenia KREDA - druk cyfrowy",modifiers:{satin:.12,express:.2},formats:{A6:{name:"A6 (105x148mm)",single:{normal:{"10":30,"24":40,"32":45,"50":50,"75":60,"100":68,"150":79},folded:{"10":45,"24":55,"32":60,"50":71,"75":84,"100":99,"150":126}},double:{normal:{"10":35,"24":46,"32":57,"50":66,"75":79,"100":89,"150":115},folded:{"10":58,"24":66,"32":84,"50":105,"75":125,"100":149,"150":199}}},A5:{name:"A5 (148x210mm)",single:{normal:{"10":34,"24":42,"32":48,"50":55,"75":63,"100":79,"150":110},folded:{"10":55,"24":60,"32":75,"50":95,"75":125,"100":150,"150":199}},double:{normal:{"10":40,"24":49,"32":62,"50":79,"75":96,"100":119,"150":169},folded:{"10":65,"24":80,"32":115,"50":149,"75":190,"100":235,"150":325}}},DL:{name:"DL (99x210mm)",single:{normal:{"10":35,"24":50,"32":53,"50":59,"75":70,"100":81,"150":105},folded:{"10":45,"24":55,"32":63,"50":79,"75":97,"100":115,"150":149}},double:{normal:{"10":41,"24":55,"32":64,"50":74,"75":88,"100":105,"150":135},folded:{"10":65,"24":80,"32":90,"50":115,"75":150,"100":185,"150":245}}}}},ulotkiJednostronne:{name:"Ulotki \u2013 cyfrowe jednostronne",formats:{A6:{name:"A6 (105x148)",tiers:[{min:10,max:10,price:30},{min:20,max:20,price:35},{min:30,max:30,price:40},{min:40,max:40,price:45},{min:50,max:50,price:55},{min:60,max:60,price:61},{min:70,max:70,price:65},{min:80,max:80,price:70},{min:90,max:90,price:75},{min:100,max:100,price:79},{min:150,max:150,price:90},{min:200,max:200,price:110},{min:300,max:300,price:145},{min:400,max:400,price:160},{min:500,max:500,price:190},{min:700,max:700,price:255},{min:1e3,max:1e3,price:320}]},A5:{name:"A5 (148 x 210)",tiers:[{min:10,max:10,price:35},{min:20,max:20,price:42},{min:30,max:30,price:50},{min:40,max:40,price:59},{min:50,max:50,price:69},{min:60,max:60,price:75},{min:70,max:70,price:82},{min:80,max:80,price:88},{min:90,max:90,price:93},{min:100,max:100,price:95},{min:150,max:150,price:130},{min:200,max:200,price:150},{min:300,max:300,price:210},{min:400,max:400,price:259},{min:500,max:500,price:300},{min:700,max:700,price:410},{min:1e3,max:1e3,price:530}]},DL:{name:"DL (99 x 210)",tiers:[{min:10,max:10,price:30},{min:20,max:20,price:35},{min:30,max:30,price:40},{min:40,max:40,price:45},{min:50,max:50,price:55},{min:60,max:60,price:60},{min:70,max:70,price:65},{min:80,max:80,price:70},{min:90,max:90,price:75},{min:100,max:100,price:83},{min:150,max:150,price:100},{min:200,max:200,price:120},{min:300,max:300,price:160},{min:400,max:400,price:199},{min:500,max:500,price:230},{min:700,max:700,price:310},{min:1e3,max:1e3,price:399}]}}},ulotkiDwustronne:{name:"Ulotki - Cyfrowe Dwustronne",formats:{A6:{name:"A6 (105x148)",tiers:[{min:10,max:10,price:40},{min:20,max:20,price:47},{min:30,max:30,price:49},{min:40,max:40,price:55},{min:50,max:50,price:60},{min:60,max:60,price:65},{min:70,max:70,price:70},{min:80,max:80,price:75},{min:90,max:90,price:90},{min:100,max:100,price:95},{min:150,max:150,price:120},{min:200,max:200,price:140},{min:300,max:300,price:190},{min:400,max:400,price:230},{min:500,max:500,price:270},{min:700,max:700,price:355},{min:1e3,max:1e3,price:476}]},A5:{name:"A5 (148 x 210)",tiers:[{min:10,max:10,price:45},{min:20,max:20,price:55},{min:30,max:30,price:60},{min:40,max:40,price:72},{min:50,max:50,price:90},{min:60,max:60,price:99},{min:70,max:70,price:112},{min:80,max:80,price:122},{min:90,max:90,price:130},{min:100,max:100,price:140},{min:150,max:150,price:180},{min:200,max:200,price:220},{min:300,max:300,price:310},{min:400,max:400,price:390},{min:500,max:500,price:460},{min:700,max:700,price:620},{min:1e3,max:1e3,price:790}]},DL:{name:"DL (99 x 210)",tiers:[{min:10,max:10,price:40},{min:20,max:20,price:50},{min:30,max:30,price:55},{min:40,max:40,price:65},{min:50,max:50,price:70},{min:60,max:60,price:78},{min:70,max:70,price:88},{min:80,max:80,price:99},{min:90,max:90,price:109},{min:100,max:100,price:119},{min:150,max:150,price:150},{min:200,max:200,price:179},{min:300,max:300,price:235},{min:400,max:400,price:290},{min:500,max:500,price:350},{min:700,max:700,price:460},{min:1e3,max:1e3,price:590}]}}},solwentPlakaty:{id:"solwent-plakaty",title:"SOLWENT - PLAKATY",unit:"m2",pricing:"per_unit",rules:[{type:"minimum",unit:"m2",value:1}],modifiers:[{id:"express",name:"EXPRESS",type:"percent",value:.2}],materials:[{id:"150g",name:"Papier 150g p\xF3\u0142mat",tiers:[{min:1,max:3,price:65},{min:4,max:9,price:60},{min:10,max:20,price:55},{min:21,max:40,price:50},{min:41,max:null,price:42}]},{id:"200g",name:"Papier 200g po\u0142ysk",tiers:[{min:1,max:3,price:70},{min:4,max:9,price:65},{min:10,max:20,price:59},{min:21,max:40,price:53},{min:41,max:null,price:45}]},{id:"115g",name:"Papier 115g matowy",tiers:[{min:1,max:3,price:45},{min:4,max:19,price:40},{min:20,max:null,price:35}]}]},plakaty:{id:"plakaty",title:"Plakaty",solwent:{unit:"m2",minimumM2:1,materials:[{id:"200g-polysk",name:"200g Po\u0142ysk (solwent)",tiers:[{min:1,max:3,price:70},{min:4,max:9,price:65},{min:10,max:20,price:59},{min:21,max:40,price:53},{min:41,max:null,price:45}]},{id:"blockout200g",name:"Blockout 200g Satyna (solwent)",tiers:[{min:1,max:3,price:80},{min:4,max:9,price:75},{min:10,max:20,price:70},{min:21,max:40,price:65},{min:41,max:null,price:60}]},{id:"150g-polmat",name:"150g P\xF3\u0142mat (solwent)",tiers:[{min:1,max:3,price:65},{min:4,max:9,price:60},{min:10,max:20,price:55},{min:21,max:40,price:50},{min:41,max:null,price:42}]},{id:"115g-mat",name:"115g Matowy (solwent)",tiers:[{min:1,max:3,price:45},{min:4,max:19,price:40},{min:20,max:null,price:35}]}]},formatowe:{unit:"szt",formats:["297x420","420x594","594x841","841x1189","914x1189","914x1292","rolka1067"],materials:[{id:"120g-formatowe",name:"120g Formatowe",discountGroup:"120g",prices:{"297x420":9,"420x594":12,"594x841":18,"841x1189":28,"914x1189":34,"914x1292":50,rolka1067:68}},{id:"120g-nieformatowe",name:"120g Nieformatowe",discountGroup:"120g",prices:{"297x420":28,"420x594":30,"594x841":33,"841x1189":35,"914x1292":50,rolka1067:63}},{id:"260g-satyna-formatowe",name:"260g Satyna Formatowe (fotoplakaty)",discountGroup:"260g",prices:{"297x420":23,"420x594":39,"594x841":50,"841x1189":80,"914x1292":88}},{id:"260g-satyna-nieformatowe",name:"260g Satyna Nieformatowe (fotoplakaty)",discountGroup:"260g",prices:{"297x420":27,"420x594":36,"594x841":39.5,"841x1189":66.7,"914x1292":75.3}},{id:"180g-pp-formatowe",name:"180g PP Formatowe",discountGroup:"120g",prices:{"297x420":18,"420x594":37,"610x841":45,"841x1189":70,"914x1292":74}},{id:"180g-pp-nieformatowe",name:"180g PP Nieformatowe",discountGroup:"120g",prices:{"297x420":23,"420x594":31,"610x841":34,"841x1189":62,"914x1292":70.5}}],discounts:{"120g":[{min:2,max:5,factor:.95},{min:6,max:20,factor:.92},{min:21,max:30,factor:.87}],"260g":[{min:9,max:20,factor:.93},{min:21,max:30,factor:.88}]}},modifiers:[{id:"express",name:"TRYB EXPRESS (+20%)",type:"percent",value:.2}],legacy200g:{id:"solwent-plakaty-200g",title:"SOLWENT - PLAKATY (Papier 200g po\u0142ysk)",unit:"m2",pricing:"per_unit",tiers:[{min:0,max:3,price:70},{min:3,max:9,price:65},{min:9,max:20,price:59},{min:20,max:40,price:53},{min:40,max:null,price:45}],rules:[{type:"minimum",unit:"m2",value:1}],modifiers:[{id:"EXPRESS",type:"percent",value:.2}]}},dyplomy:[{qty:1,price:20},{qty:2,price:30},{qty:3,price:32},{qty:4,price:34},{qty:5,price:35},{qty:6,price:35},{qty:7,price:36},{qty:8,price:37},{qty:9,price:39},{qty:10,price:40},{qty:15,price:45},{qty:20,price:49},{qty:30,price:58},{qty:40,price:65},{qty:50,price:75},{qty:100,price:120}],defaultPrices:{"druk-bw-a4-1-5":.9,"druk-bw-a4-6-20":.6,"druk-bw-a4-21-100":.35,"druk-bw-a4-101-500":.3,"druk-bw-a4-501-999":.23,"druk-bw-a4-1000-4999":.19,"druk-bw-a4-5000+":.15,"druk-bw-a3-1-5":1.7,"druk-bw-a3-6-20":1.1,"druk-bw-a3-21-100":.7,"druk-bw-a3-101-500":.6,"druk-bw-a3-501-999":.45,"druk-bw-a3-1000-4999":.33,"druk-bw-a3-5000+":.3,"druk-kolor-a4-1-10":2.4,"druk-kolor-a4-11-40":2.2,"druk-kolor-a4-41-100":2,"druk-kolor-a4-101-250":1.8,"druk-kolor-a4-251-500":1.6,"druk-kolor-a4-501-999":1.4,"druk-kolor-a4-1000+":1.1,"druk-kolor-a3-1-10":4.8,"druk-kolor-a3-11-40":4.2,"druk-kolor-a3-41-100":3.8,"druk-kolor-a3-101-250":3,"druk-kolor-a3-251-500":2.5,"druk-kolor-a3-501-999":1.9,"druk-kolor-a3-1000+":1.6,"skan-auto-1-9":1,"skan-auto-10-49":.5,"skan-auto-50-99":.4,"skan-auto-100+":.25,"skan-reczne-1-4":2,"skan-reczne-5+":1,"druk-email":1,"modifier-druk-zadruk25":.5,"druk-cad-kolor-fmt-a3":5.3,"druk-cad-kolor-fmt-a2":8.5,"druk-cad-kolor-fmt-a1":12,"druk-cad-kolor-fmt-a0":24,"druk-cad-kolor-fmt-a0plus":26,"druk-cad-kolor-mb-a3":12,"druk-cad-kolor-mb-a2":13.9,"druk-cad-kolor-mb-a1":14.5,"druk-cad-kolor-mb-a0":20,"druk-cad-kolor-mb-a0plus":21,"druk-cad-kolor-mb-mb1067":30,"druk-cad-bw-fmt-a3":2.5,"druk-cad-bw-fmt-a2":4,"druk-cad-bw-fmt-a1":6,"druk-cad-bw-fmt-a0":11,"druk-cad-bw-fmt-a0plus":12.5,"druk-cad-bw-mb-a3":3.5,"druk-cad-bw-mb-a2":4.5,"druk-cad-bw-mb-a1":5,"druk-cad-bw-mb-a0":9,"druk-cad-bw-mb-a0plus":10,"druk-cad-bw-mb-mb1067":12.5,"laminowanie-a3-1-50":7,"laminowanie-a3-51-100":6,"laminowanie-a3-101-200":5,"laminowanie-a4-1-50":5,"laminowanie-a4-51-100":4.5,"laminowanie-a4-101-200":4,"laminowanie-a5-1-50":4,"laminowanie-a5-51-100":3.5,"laminowanie-a5-101-200":3,"laminowanie-a6-1-50":3,"laminowanie-a6-51-100":2.5,"laminowanie-a6-101-200":2,"solwent-150g-1-3":65,"solwent-150g-4-9":60,"solwent-150g-10-20":55,"solwent-150g-21-40":50,"solwent-150g-41+":42,"solwent-200g-1-3":70,"solwent-200g-4-9":65,"solwent-200g-10-20":59,"solwent-200g-21-40":53,"solwent-200g-41+":45,"solwent-115g-1-3":45,"solwent-115g-4-19":40,"solwent-115g-20+":35,"vouchery-1-jed":20,"vouchery-2-jed":29,"vouchery-3-jed":30,"vouchery-4-jed":32,"vouchery-5-jed":35,"vouchery-6-jed":39,"vouchery-7-jed":41,"vouchery-8-jed":45,"vouchery-9-jed":48,"vouchery-10-jed":52,"vouchery-15-jed":60,"vouchery-20-jed":67,"vouchery-25-jed":74,"vouchery-30-jed":84,"vouchery-1-dwu":25,"vouchery-2-dwu":32,"vouchery-3-dwu":37,"vouchery-4-dwu":39,"vouchery-5-dwu":43,"vouchery-6-dwu":45,"vouchery-7-dwu":48,"vouchery-8-dwu":50,"vouchery-9-dwu":52,"vouchery-10-dwu":58,"vouchery-15-dwu":70,"vouchery-20-dwu":82,"vouchery-25-dwu":100,"vouchery-30-dwu":120,"banner-powlekany-1-25":53,"banner-powlekany-26-50":49,"banner-powlekany-51+":45,"banner-blockout-1-25":64,"banner-blockout-26-50":59,"banner-blockout-51+":55,"banner-oczkowanie":2.5,"rollup-85x200-1-5":290,"rollup-85x200-6-10":275,"rollup-100x200-1-5":305,"rollup-100x200-6-10":285,"rollup-120x200-1-5":330,"rollup-120x200-6-10":310,"rollup-150x200-1-5":440,"rollup-150x200-6-10":425,"rollup-wymiana-labor":50,"rollup-wymiana-m2":80,"folia-szroniona-wydruk-1-5":65,"folia-szroniona-wydruk-6-25":60,"folia-szroniona-wydruk-26-50":56,"folia-szroniona-wydruk-51+":51,"folia-szroniona-oklejanie-1-5":140,"folia-szroniona-oklejanie-6-10":130,"folia-szroniona-oklejanie-11-20":120,"wlepki-obrys-folia-1-5":67,"wlepki-obrys-folia-6-25":60,"wlepki-obrys-folia-26-50":52,"wlepki-obrys-folia-51+":48,"wlepki-polipropylen-1-10":50,"wlepki-polipropylen-11+":42,"wlepki-standard-folia-1-5":54,"wlepki-standard-folia-6-25":50,"wlepki-standard-folia-26-50":46,"wlepki-standard-folia-51+":42,"wlepki-modifier-arkusze":2,"wlepki-modifier-pojedyncze":10,"wlepki-modifier-mocny-klej":.12,"wizytowki-85x55-none-50szt":65,"wizytowki-85x55-none-100szt":75,"wizytowki-85x55-none-250szt":110,"wizytowki-85x55-none-500szt":170,"wizytowki-85x55-none-1000szt":290,"wizytowki-85x55-matt_gloss-50szt":160,"wizytowki-85x55-matt_gloss-100szt":170,"wizytowki-85x55-matt_gloss-250szt":200,"wizytowki-85x55-matt_gloss-500szt":250,"wizytowki-85x55-matt_gloss-1000szt":335,"wizytowki-90x50-none-50szt":70,"wizytowki-90x50-none-100szt":79,"wizytowki-90x50-none-250szt":120,"wizytowki-90x50-none-500szt":175,"wizytowki-90x50-none-1000szt":300,"wizytowki-90x50-matt_gloss-50szt":170,"wizytowki-90x50-matt_gloss-100szt":180,"wizytowki-90x50-matt_gloss-250szt":210,"wizytowki-90x50-matt_gloss-500szt":260,"wizytowki-90x50-matt_gloss-1000szt":345,"modifier-satyna":.12,"modifier-express":.2}};var ot=JSON.parse(JSON.stringify(ne));function S(e){let t=e.split("."),r=ot;for(let o of t){if(r==null||typeof r!="object")return;r=r[o]}return r}function W(e){return(Math.round((Number(e)||0)*100)/100).toFixed(2)}function G(e,t){return e.find(r=>t>=r.from&&t<=r.to)||null}function se(e,t){let r=Object.keys(e||{}).map(Number).filter(Number.isFinite).sort((i,a)=>i-a);if(!r.length)return null;let o=r.find(i=>t<=i);return o==null?null:o}var I=S("drukA4A3"),V=S("drukCAD.price"),N=S("drukCAD.base"),U=S("drukCAD.tolerance"),le=S("drukCAD.fold"),K=S("drukCAD.wfScanPerCm"),it="razdwa_prices";function Q(){try{if(typeof localStorage=="undefined")return{};let e=localStorage.getItem(it);if(!e)return{};let t=JSON.parse(e);if(t&&typeof t=="object"&&!Array.isArray(t))return t}catch{}return{}}function L(e,t){let r=Q();return typeof r[e]=="number"?r[e]:t}function z(e,t){let r=Q();return t.map(o=>{let i=o.max===null||o.max>5e4?`${o.min}+`:`${o.min}-${o.max}`,a=`${e}-${i}`;return typeof r[a]=="number"?{...o,price:r[a]}:o})}var tr=S("defaultPrices"),X=S("wizytowki");var nr=S("solwentPlakaty");function ce(e){let t=S("solwent-plakaty"),r=t.materials.find(a=>a.name===e.material);if(!r)throw new Error(`Unknown material: ${e.material}`);let o={id:t.id,title:t.title,unit:t.unit,pricing:t.pricing,tiers:z(`solwent-${r.id}`,r.tiers),rules:t.rules,modifiers:t.modifiers},i=[];return e.express&&i.push("express"),C(o,e.areaM2,i)}var nt="pl-PL";function st(e,t="PLN"){return new Intl.NumberFormat(nt,{style:"currency",currency:t==="PLN"?"PLN":"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}var g=st;var lt=S("solwentPlakaty"),me={id:"solwent-plakaty",name:"Solwent - Plakaty",async mount(e,t){try{let r=await fetch("categories/solwent-plakaty.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text();let i=lt.materials,a=e.querySelector("#material");a.innerHTML=i.map(s=>`<option value="${s.name}">${s.name}</option>`).join(""),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#material"),o=e.querySelector("#area"),i=e.querySelector("#calculate"),a=e.querySelector("#add-to-cart"),s=e.querySelector("#result-display"),m=e.querySelector("#unit-price"),d=e.querySelector("#total-price"),l=e.querySelector("#express-hint"),n=null;i.onclick=()=>{let p={material:r.value,areaM2:parseFloat(o.value),express:t.expressMode};try{let c=ce(p);n=c,m.innerText=g(c.tierPrice),d.innerText=g(c.totalPrice),l&&(l.style.display=t.expressMode?"block":"none"),s.style.display="block",a.disabled=!1,t.updateLastCalculated(c.totalPrice,"Solwent - Plakaty")}catch(c){alert("B\u0142\u0105d: "+c.message)}},a.onclick=()=>{n&&t.cart.addItem({id:`solwent-${Date.now()}`,category:"Solwent - Plakaty",name:r.value,quantity:parseFloat(o.value),unit:"m2",unitPrice:n.tierPrice,isExpress:t.expressMode,totalPrice:n.totalPrice,optionsHint:`${o.value}m2${t.expressMode?", EXPRESS":""}`,payload:n})}}};var xr=S("plakaty").legacy200g,ue=S("plakaty");function de(e){var l;let t=ue,r=t.solwent.materials.find(n=>n.id===e.materialId);if(!r)throw new Error(`Unknown solwent material: ${e.materialId}`);let o=(l=t.solwent.minimumM2)!=null?l:1,i=Math.max(e.areaM2,o),a=r.tiers.find(n=>i>=n.min&&(n.max===null||i<=n.max));if(!a)throw new Error(`No tier for ${i} m2`);let s=parseFloat((i*a.price).toFixed(2)),m=0,d=[];if(e.express){let n=t.modifiers.find(p=>p.id==="express");n&&(m=parseFloat((s*n.value).toFixed(2)),d.push(n.name))}return{materialName:r.name,effectiveM2:i,tierPrice:a.price,basePrice:s,modifiersTotal:m,totalPrice:parseFloat((s+m).toFixed(2)),appliedModifiers:d}}function pe(e){var c;let t=ue,r=t.formatowe.materials.find(y=>y.id===e.materialId);if(!r)throw new Error(`Unknown format material: ${e.materialId}`);let o=r.prices[e.formatKey];if(o===void 0)throw new Error(`Unknown format: ${e.formatKey}`);let i=r.discountGroup,s=((c=t.formatowe.discounts[i])!=null?c:[]).find(y=>e.qty>=y.min&&(y.max===null||e.qty<=y.max)),m=s?s.factor:1,d=parseFloat((o*m).toFixed(2)),l=parseFloat((d*e.qty).toFixed(2)),n=0,p=[];if(e.express){let y=t.modifiers.find(b=>b.id==="express");y&&(n=parseFloat((l*y.value).toFixed(2)),p.push(y.name))}return{materialName:r.name,formatKey:e.formatKey,qty:e.qty,unitPrice:o,discountFactor:m,pricePerPiece:d,basePrice:l,modifiersTotal:n,totalPrice:parseFloat((l+n).toFixed(2)),appliedModifiers:p}}var ct=S("plakaty"),mt=new Set(["200g-polysk","blockout200g","150g-polmat","115g-mat"]),ye={id:"plakaty",name:"Plakaty",async mount(e,t){try{let r=await fetch("categories/plakaty.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=ct,o=e.querySelector("#p-material"),i=e.querySelector("#p-format-group"),a=e.querySelector("#p-m2-group"),s=e.querySelector("#p-format"),m=e.querySelector("#p-qty"),d=e.querySelector("#p-area"),l=e.querySelector("#p-calculate"),n=e.querySelector("#p-add-to-cart"),p=e.querySelector("#p-result-display"),c=e.querySelector("#p-unit-price"),y=e.querySelector("#p-total-price"),b=e.querySelector("#p-express-hint"),k=[...r.solwent.materials,...r.formatowe.materials];o.innerHTML=k.map(w=>`<option value="${w.id}">${w.name}</option>`).join("");function h(w){return mt.has(w)}function v(w){let M=r.formatowe.materials.find(x=>x.id===w);if(!M)return;let u=Object.keys(M.prices);s.innerHTML=u.map(x=>`<option value="${x}">${x}</option>`).join("")}function P(){let w=o.value;h(w)?(i.style.display="none",a.style.display=""):(i.style.display="",a.style.display="none",v(w))}o.addEventListener("change",P),P();let f=null,E=null;l.onclick=()=>{let w=o.value;try{if(h(w)){let M=parseFloat(d.value)||1,u=de({materialId:w,areaM2:M,express:t.expressMode});f=u,E={type:"m2",matId:w,area:M},c.innerText=g(u.tierPrice),y.innerText=g(u.totalPrice)}else{let M=s.value,u=parseInt(m.value,10)||1,x=pe({materialId:w,formatKey:M,qty:u,express:t.expressMode});f=x,E={type:"format",matId:w,fmt:M,qty:u},c.innerText=g(x.pricePerPiece),y.innerText=g(x.totalPrice)}b&&(b.style.display=t.expressMode?"block":"none"),p.style.display="block",n.disabled=!1,t.updateLastCalculated(f.totalPrice,"Plakaty")}catch(M){alert("B\u0142\u0105d: "+M.message)}},n.onclick=()=>{if(!f||!E)return;let w=o.options[o.selectedIndex].text;if(E.type==="m2"){let M=`${E.area} m2${t.expressMode?", EXPRESS":""}`;t.cart.addItem({id:`plakaty-${Date.now()}`,category:"Plakaty",name:w,quantity:E.area,unit:"m2",unitPrice:f.tierPrice,isExpress:t.expressMode,totalPrice:f.totalPrice,optionsHint:M,payload:f})}else{let M=`${E.fmt} \xD7 ${E.qty} szt${t.expressMode?", EXPRESS":""}`;t.cart.addItem({id:`plakaty-${Date.now()}`,category:"Plakaty",name:w,quantity:E.qty,unit:"szt",unitPrice:f.pricePerPiece,isExpress:t.expressMode,totalPrice:f.totalPrice,optionsHint:M,payload:f})}}}};var fe=S("vouchery");function ut(e,t){let r=fe[0];for(let s of fe)if(e>=s.qty)r=s;else break;let o=t?"jed":"dwu",i=`vouchery-${r.qty}-${o}`,a=t?r.single:r.double;return L(i,a)}function xe(e){let t=ut(e.qty,e.sides==="single"),r=0;e.satin&&(r+=L("modifier-satyna",.12)),e.express&&(r+=L("modifier-express",.2));let o=t*r,i=t+o;return{basePrice:t,modifiersTotal:parseFloat(o.toFixed(2)),totalPrice:parseFloat(i.toFixed(2))}}var dt=1.23,we={id:"vouchery",name:"Vouchery",async mount(e,t){try{let r=await fetch("categories/vouchery.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#v-qty"),o=e.querySelector("#v-paper"),i=e.querySelector("#v-calculate"),a=e.querySelector("#v-add-to-cart"),s=e.querySelector("#v-result-display"),m=e.querySelector("#v-base-price"),d=e.querySelector("#v-modifiers-row"),l=e.querySelector("#v-modifiers-total"),n=e.querySelector("#v-netto-price"),p=e.querySelector("#v-total-price"),c=e.querySelector("#v-tier-hint"),y=e.querySelector("#v-express-hint"),b=e.querySelector("#v-satin-hint"),k=null,h=null;i.onclick=()=>{let v=e.querySelector('input[name="v-sides"]:checked'),P=v?v.value:"single",f=o.value,E=f.startsWith("satyna");h={qty:parseInt(r.value),sides:P,satin:E,express:t.expressMode};try{let w=xe(h),M=parseFloat((w.totalPrice*dt).toFixed(2));k={...w,bruttoPrice:M,isSatin:E},m.innerText=g(w.basePrice),w.modifiersTotal>0?(d.style.display="flex",l.innerText="+"+g(w.modifiersTotal)):d.style.display="none",n&&(n.innerText=g(w.totalPrice)),p.innerText=g(M),c&&(c.innerText=`Dla ${h.qty} szt cena bazowa: ${w.basePrice.toFixed(2)} z\u0142 (papier: ${f.replace("_"," ")})`),y&&(y.style.display=t.expressMode?"block":"none"),b&&(b.style.display=E?"block":"none"),s.style.display="block",a.disabled=!1,t.updateLastCalculated(M,"Vouchery")}catch(w){alert("B\u0142\u0105d: "+w.message)}},a.onclick=()=>{if(k&&h){let v=h.sides==="single"?"Jednostronne":"Dwustronne",P=k.isSatin?", Satyna":"",f=h.express?", EXPRESS":"",E=o.value;t.cart.addItem({id:`vouchery-${Date.now()}`,category:"Vouchery",name:`Vouchery A4 ${v}`,quantity:h.qty,unit:"szt",unitPrice:k.bruttoPrice/h.qty,isExpress:h.express,totalPrice:k.bruttoPrice,optionsHint:`${h.qty} szt${P}${f}, ${E.replace("_"," ")}`,payload:k})}}}};var ge=S("dyplomy");function pt(e){let t=ge[0];for(let r of ge)if(e>=r.qty)t=r;else break;return t.price}function be(e){let t=pt(e.qty),r=0,o=[];e.isSatin&&(r+=L("modifier-satyna",.12),o.push("satin")),e.express&&(r+=L("modifier-express",.2),o.push("express"));let i=t*r,a=t+i;return{basePrice:t,modifiersTotal:i,totalPrice:Math.round(a*100)/100,appliedModifiers:o}}var ke=1.23,he={id:"dyplomy",name:"Dyplomy",async mount(e,t){let r=await fetch("categories/dyplomy.html");e.innerHTML=await r.text();let o=e.querySelector("#dypSides"),i=e.querySelector("#dypQty"),a=e.querySelector("#dypPaper"),s=e.querySelector("#calcBtn"),m=e.querySelector("#addToCartBtn"),d=e.querySelector("#dypResult"),l=()=>{let n=a.value,p=n.startsWith("satyna"),c={qty:parseInt(i.value)||1,sides:parseInt(o.value)||1,isSatin:p,express:t.expressMode},y=be(c),b=parseFloat((y.totalPrice*ke).toFixed(2));d.style.display="block",e.querySelector("#resNettoPrice").textContent=g(y.totalPrice),e.querySelector("#resUnitPrice").textContent=g(y.totalPrice/c.qty),e.querySelector("#resTotalPrice").textContent=g(b);let k=e.querySelector("#resTierHint");return k&&(k.textContent=`Dla ${c.qty} szt u\u017Cyto ceny ${y.basePrice.toFixed(2)} z\u0142 (papier: ${n.replace("_"," ")})`),e.querySelector("#resDiscountHint").style.display=y.appliedModifiers.includes("bulk-discount")?"block":"none",e.querySelector("#resExpressHint").style.display=c.express?"block":"none",e.querySelector("#resSatinHint").style.display=c.isSatin?"block":"none",t.updateLastCalculated(b,"Dyplomy"),{options:c,result:y}};s.addEventListener("click",()=>l()),m.addEventListener("click",()=>{let{options:n,result:p}=l(),c=parseFloat((p.totalPrice*ke).toFixed(2));t.cart.addItem({id:`dyp-${Date.now()}`,category:"Dyplomy",name:`Dyplomy DL ${n.sides===1?"1-str":"2-str"}`,quantity:n.qty,unit:"szt",unitPrice:c/n.qty,isExpress:n.express,totalPrice:c,optionsHint:`${n.qty} szt, ${a.value.replace("_"," ")}`,payload:n})}),l()}};function Se(e,t){return t>5e4?`${e}+`:`${e}-${t}`}function B(e,t){let r=Q();return typeof r[e]=="number"?r[e]:t}function Pe(e){if(e.pages<=0)return{unitPrice:0,printTotal:0,emailTotal:e.email?I.email_price:0,inkTotal:0,grandTotal:e.email?I.email_price:0};let t=I.print[e.mode][e.format],r=G(t,e.pages);if(!r)throw new Error("Brak progu cenowego dla druku.");let o=e.mode==="bw"?"bw":"kolor",i=e.format.toLowerCase(),a=`druk-${o}-${i}-${Se(r.from,r.to)}`,s=B(a,r.unit),m=e.pages*s,d=0;e.email&&(d=B("druk-email",I.email_price));let l=0;return e.ink25&&(l=B("modifier-druk-zadruk25",.5)*s*e.ink25Qty),{unitPrice:s,printTotal:m,emailTotal:d,inkTotal:l,grandTotal:m+d+l}}function ve(e){if(e.pages<=0)return{unitPrice:0,total:0};let t=I.scan[e.type],r=G(t,e.pages);if(!r)throw new Error("Brak progu cenowego dla skanowania.");let i=`skan-${e.type==="auto"?"auto":"reczne"}-${Se(r.from,r.to)}`,a=B(i,r.unit);return{unitPrice:a,total:e.pages*a}}function Ee(e){let t=N[e.format];if(!t)throw new Error("Nieznany format CAD.");let o=Math.abs(e.lengthMm-t.l)<=U?"formatowe":"mb",i=V[e.mode][o][e.format];if(i==null)throw new Error("Brak stawki w cenniku dla CAD.");let a=e.mode==="bw"?"bw":"kolor",s=o==="formatowe"?"fmt":"mb",m=e.format.toLowerCase().replace("0p","0plus").replace("r1067","mb1067"),d=`druk-cad-${a}-${s}-${m}`,l=B(d,i),n=0;if(o==="formatowe")n=e.qty*l;else{let p=e.lengthMm/1e3;n=e.qty*p*l}return{detectedType:o,rate:l,total:parseFloat(W(n))}}function Me(e){let t=le[e.format];if(t==null)throw new Error("Brak stawki sk\u0142adania.");return{unit:t,total:e.qty*t}}function Te(e){let t=Math.round(e.lengthMm/10),r=t*K;return{cmRounded:t,unitPrice:r,total:e.qty*r}}function Le(e){let t;e.family==="deluxe"?t=X.cyfrowe.deluxe.options[e.deluxeOpt].prices:t=(e.finish==="softtouch"?X.cyfrowe.softtouchPrices:X.cyfrowe.standardPrices)[e.size][e.lam];let r=se(t,e.qty);if(r==null)throw new Error("Brak progu cenowego dla takiej ilo\u015Bci.");let o=t[r];if(e.family!=="deluxe"&&e.size){let i=e.lam==="noLam"?"none":"matt_gloss",a=`wizytowki-${e.size}-${i}-${r}szt`;o=B(a,o)}return{qtyBilled:r,total:o}}function qe(e){let t=e.family||"standard",r=e.finish||"mat",o=e.format||"85x55",i=r==="softtouch"?"lam":e.folia==="none"?"noLam":"lam",a=Le({family:t,size:o,lam:i,finish:r,deluxeOpt:e.deluxeOpt,qty:e.qty}),s=a.total;return e.express&&(s=a.total*(1+L("modifier-express",.2))),{totalPrice:parseFloat(s.toFixed(2)),basePrice:a.total,effectiveQuantity:e.qty,tierPrice:a.total/a.qtyBilled,modifiersTotal:e.express?a.total*L("modifier-express",.2):0,appliedModifiers:e.express?["TRYB EXPRESS"]:[],qtyBilled:a.qtyBilled}}var yt=1.23,ft=1.12,Ce={id:"wizytowki-druk-cyfrowy",name:"Wizyt\xF3wki - druk cyfrowy",async mount(e,t){try{let r=await fetch("categories/wizytowki-druk-cyfrowy.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#w-family"),o=e.querySelector("#standard-options"),i=e.querySelector("#deluxe-options"),a=e.querySelector("#w-finish"),s=e.querySelector("#w-size"),m=e.querySelector("#w-lam"),d=e.querySelector("#w-deluxe-opt"),l=e.querySelector("#w-paper"),n=e.querySelector("#w-qty"),p=e.querySelector("#w-calculate"),c=e.querySelector("#w-add-to-cart"),y=e.querySelector("#w-result-display"),b=e.querySelector("#w-netto-price"),k=e.querySelector("#w-total-price"),h=e.querySelector("#w-billed-qty-hint"),v=e.querySelector("#w-tier-hint"),P=e.querySelector("#w-express-hint"),f=e.querySelector("#w-satin-hint");r.onchange=()=>{let M=r.value==="deluxe";o.style.display=M?"none":"block",i.style.display=M?"block":"none"};let E=null,w=null;p.onclick=()=>{let M=l.value,u=M.startsWith("satyna");w={family:r.value,finish:a.value,format:s.value,folia:m.value==="lam"?"matt_gloss":"none",deluxeOpt:d.value,qty:parseInt(n.value),express:t.expressMode};try{let x=qe(w),T=u?parseFloat((x.totalPrice*ft).toFixed(2)):x.totalPrice,H=parseFloat((T*yt).toFixed(2));E={...x,nettoPrice:T,bruttoPrice:H,isSatin:u},b.innerText=g(T),k.innerText=g(H),h.innerText=`Rozliczono za: ${x.qtyBilled} szt.`,v&&(v.innerText=`Dla ${x.qtyBilled} szt u\u017Cyto ceny ${x.totalPrice.toFixed(2)} z\u0142 (papier: ${M.replace("_"," ")})`),P&&(P.style.display=t.expressMode?"block":"none"),f&&(f.style.display=u?"block":"none"),y.style.display="block",c.disabled=!1,t.updateLastCalculated(H,"Wizyt\xF3wki")}catch(x){alert("B\u0142\u0105d: "+x.message)}},c.onclick=()=>{if(E&&w){let M=w.family==="deluxe"?"Wizyt\xF3wki DELUXE":"Wizyt\xF3wki Standard",u=w.express?", EXPRESS":"",x=E.isSatin?", SATYNA":"",T=l.value;t.cart.addItem({id:`wizytowki-${Date.now()}`,category:"Wizyt\xF3wki",name:M,quantity:E.qtyBilled,unit:"szt",unitPrice:E.bruttoPrice/E.qtyBilled,isExpress:w.express,totalPrice:E.bruttoPrice,optionsHint:`${w.qty} szt (rozliczono ${E.qtyBilled})${x}${u}, ${T.replace("_"," ")}`,payload:E})}}}};var ee=S("rollUp");function He(e){let t=ee.formats[e.format];if(!t)throw new Error(`Unknown format: ${e.format}`);let r;if(e.isReplacement){let i=t.width*t.height,a=L("rollup-wymiana-labor",ee.replacement.labor),s=L("rollup-wymiana-m2",ee.replacement.print_per_m2),m=i*s+a;r={id:"roll-up-replacement",title:`Wymiana wk\u0142adu (${e.format})`,unit:"szt",pricing:"per_unit",tiers:[{min:1,max:null,price:m}],modifiers:[{id:"express",name:"EXPRESS",type:"percent",value:L("modifier-express",.2)}]}}else r={id:"roll-up-full",title:`Roll-up Komplet (${e.format})`,unit:"szt",pricing:"per_unit",tiers:z(`rollup-${e.format}`,t.tiers),modifiers:[{id:"express",name:"EXPRESS",type:"percent",value:L("modifier-express",.2)}]};let o=[];return e.express&&o.push("express"),C(r,e.qty,o)}var ze={id:"roll-up",name:"Roll-up",async mount(e,t){let r=await fetch("categories/roll-up.html");e.innerHTML=await r.text();let o=e.querySelector("#rollUpType"),i=e.querySelector("#rollUpFormat"),a=e.querySelector("#rollUpQty"),s=e.querySelector("#calcBtn"),m=e.querySelector("#addToCartBtn"),d=e.querySelector("#rollUpResult"),l=()=>{let n={format:i.value,qty:parseInt(a.value)||1,isReplacement:o.value==="replacement",express:t.expressMode},p=He(n);return d.style.display="block",e.querySelector("#resUnitPrice").textContent=g(p.totalPrice/n.qty),e.querySelector("#resTotalPrice").textContent=g(p.totalPrice),e.querySelector("#resExpressHint").style.display=n.express?"block":"none",t.updateLastCalculated(p.totalPrice,"Roll-up"),{options:n,result:p}};s.addEventListener("click",()=>l()),m.addEventListener("click",()=>{let{options:n,result:p}=l();t.cart.addItem({id:`rollup-${Date.now()}`,category:"Roll-up",name:`${n.isReplacement?"Wymiana wk\u0142adu":"Roll-up Komplet"} ${n.format}`,quantity:n.qty,unit:"szt",unitPrice:p.totalPrice/n.qty,isExpress:n.express,totalPrice:p.totalPrice,optionsHint:`${n.format}, ${n.qty} szt`,payload:n})}),l()}};var te=S("zaproszeniaKreda");function xt(e,t,r,o){let a=te.formats[e];if(!a)throw new Error(`Unknown format: ${e}`);let s=r===1?"single":"double",m=o?"folded":"normal",d=a[s][m],l=Object.keys(d).map(Number).sort((p,c)=>p-c),n=d[String(l[0])];for(let p of l)if(t>=p)n=d[String(p)];else break;return n}function Ae(e){let t=xt(e.format,e.qty,e.sides,e.isFolded),r=1;e.isSatin&&(r+=te.modifiers.satin),e.express&&(r+=te.modifiers.express);let o=parseFloat((t*r).toFixed(2));return{basePrice:t,totalPrice:o}}var $e=1.23,Ie={id:"zaproszenia-kreda",name:"Zaproszenia KREDA",async mount(e,t){let r=await fetch("categories/zaproszenia-kreda.html");e.innerHTML=await r.text();let o=e.querySelector("#zapFormat"),i=e.querySelector("#zapSides"),a=e.querySelector("#zapFolded"),s=e.querySelector("#zapQty"),m=e.querySelector("#zapPaper"),d=e.querySelector("#calcBtn"),l=e.querySelector("#addToCartBtn"),n=e.querySelector("#zapResult"),p=()=>{let c=m.value,y=c.startsWith("satyna"),b={format:o.value,qty:parseInt(s.value)||10,sides:parseInt(i.value)||1,isFolded:a.checked,isSatin:y,express:t.expressMode},k=Ae(b),h=parseFloat((k.totalPrice*$e).toFixed(2));n.style.display="block",e.querySelector("#resNettoPrice").textContent=g(k.totalPrice),e.querySelector("#resUnitPrice").textContent=g(k.totalPrice/b.qty),e.querySelector("#resTotalPrice").textContent=g(h);let v=e.querySelector("#resTierHint");return v&&(v.textContent=`Dla ${b.qty} szt u\u017Cyto ceny ${k.basePrice.toFixed(2)} z\u0142 (papier: ${c.replace("_"," ")})`),e.querySelector("#resExpressHint").style.display=b.express?"block":"none",e.querySelector("#resSatinHint").style.display=b.isSatin?"block":"none",t.updateLastCalculated(h,"Zaproszenia"),{options:b,result:k}};d.addEventListener("click",()=>p()),l.addEventListener("click",()=>{let{options:c,result:y}=p(),b=parseFloat((y.totalPrice*$e).toFixed(2));t.cart.addItem({id:`zap-${Date.now()}`,category:"Zaproszenia Kreda",name:`Zaproszenia ${c.format} ${c.sides===1?"1-str":"2-str"}${c.isFolded?" sk\u0142adane":""}`,quantity:c.qty,unit:"szt",unitPrice:b/c.qty,isExpress:c.express,totalPrice:b,optionsHint:`${c.qty} szt, ${m.value.replace("_"," ")}`,payload:c})}),p()}};var na=S("ulotkiDwustronne");function wt(e){let r=S("ulotki-cyfrowe-dwustronne").formats[e];if(!r)throw new Error(`Invalid format: ${e}`);return{id:`ulotki-cyfrowe-dwustronne-${e.toLowerCase()}`,title:`Ulotki Cyfrowe Dwustronne ${r.name}`,unit:"szt",pricing:"flat",tiers:r.tiers,modifiers:[{id:"express",name:"TRYB EXPRESS",type:"percent",value:L("modifier-express",.2)}]}}function De(e){let t=wt(e.format),r=[];return e.express&&r.push("express"),C(t,e.qty,r)}var ua=S("ulotkiJednostronne");function gt(e){let r=S("ulotki-cyfrowe-jednostronne").formats[e];if(!r)throw new Error(`Invalid format: ${e}`);return{id:`ulotki-cyfrowe-jednostronne-${e.toLowerCase()}`,title:`Ulotki Cyfrowe Jednostronne ${r.name}`,unit:"szt",pricing:"flat",tiers:r.tiers,modifiers:[{id:"express",name:"TRYB EXPRESS",type:"percent",value:L("modifier-express",.2)}]}}function Fe(e){let t=gt(e.format),r=[];return e.express&&r.push("express"),C(t,e.qty,r)}var bt=1.23,kt=1.12,Re={id:"ulotki-cyfrowe",name:"Ulotki cyfrowe",async mount(e,t){try{let r=await fetch("categories/ulotki-cyfrowe.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#u-format"),o=e.querySelector("#u-qty"),i=e.querySelector("#u-paper"),a=e.querySelector("#u-calculate"),s=e.querySelector("#u-add-to-cart"),m=e.querySelector("#u-result-display"),d=e.querySelector("#u-netto-price"),l=e.querySelector("#u-total-price"),n=e.querySelector("#u-tier-hint"),p=e.querySelector("#u-express-hint"),c=e.querySelector("#u-satin-hint"),y=null,b=null;a.onclick=()=>{let k=e.querySelector('input[name="sides"]:checked').value,h=i.value,v=h.startsWith("satyna");b={format:r.value,qty:parseInt(o.value),express:t.expressMode,sides:k};try{let P=k==="dwustronne"?De(b):Fe(b),f=v?parseFloat((P.totalPrice*kt).toFixed(2)):P.totalPrice,E=parseFloat((f*bt).toFixed(2));y={...P,nettoPrice:f,bruttoPrice:E,isSatin:v},d.innerText=g(f),l.innerText=g(E),n&&(n.innerText=`Dla ${b.qty} szt u\u017Cyto ceny ${P.totalPrice.toFixed(2)} z\u0142 netto (papier: ${h.replace("_"," ")})`),p&&(p.style.display=t.expressMode?"block":"none"),c&&(c.style.display=v?"block":"none"),m.style.display="block",s.disabled=!1,t.updateLastCalculated(E,"Ulotki")}catch(P){alert("B\u0142\u0105d: "+P.message)}},s.onclick=()=>{if(y&&b){let k=b.express?", EXPRESS":"",h=y.isSatin?", SATYNA":"",v=b.sides==="dwustronne"?"Dwustronne":"Jednostronne",P=i.value;t.cart.addItem({id:`ulotki-${Date.now()}`,category:"Ulotki",name:`Ulotki ${v} ${b.format}`,quantity:b.qty,unit:"szt",unitPrice:y.bruttoPrice/b.qty,isExpress:b.express,totalPrice:y.bruttoPrice,optionsHint:`${b.qty} szt, ${v}${h}${k}, ${P.replace("_"," ")}`,payload:y})}}}};function Be(e){let t=S("banner"),r=t.materials.find(a=>a.id===e.material);if(!r)throw new Error(`Unknown material: ${e.material}`);let o={id:t.id,title:t.title,unit:t.unit,pricing:t.pricing,tiers:z(`banner-${e.material}`,r.tiers),modifiers:t.modifiers.map(a=>a.id==="oczkowanie"?{...a,value:L("banner-oczkowanie",a.value)}:a)},i=[];return e.oczkowanie&&i.push("oczkowanie"),e.express&&i.push("express"),C(o,e.areaM2,i)}var Oe={id:"banner",name:"Bannery",async mount(e,t){try{let r=await fetch("categories/banner.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#b-material"),o=e.querySelector("#b-area"),i=e.querySelector("#b-oczkowanie"),a=e.querySelector("#b-calculate"),s=e.querySelector("#b-add-to-cart"),m=e.querySelector("#b-result-display"),d=e.querySelector("#b-unit-price"),l=e.querySelector("#b-total-price"),n=e.querySelector("#b-express-hint"),p=null,c=null;a.onclick=()=>{c={material:r.value,areaM2:parseFloat(o.value),oczkowanie:i.checked,express:t.expressMode};try{let y=Be(c);p=y,d.innerText=g(y.tierPrice),l.innerText=g(y.totalPrice),n&&(n.style.display=t.expressMode?"block":"none"),m.style.display="block",s.disabled=!1,t.updateLastCalculated(y.totalPrice,"Banner")}catch(y){alert("B\u0142\u0105d: "+y.message)}},s.onclick=()=>{if(p&&c){let y=r.options[r.selectedIndex].text,b=[`${c.areaM2} m2`,c.oczkowanie?"z oczkowaniem":"bez oczkowania",c.express?"EXPRESS":""].filter(Boolean).join(", ");t.cart.addItem({id:`banner-${Date.now()}`,category:"Bannery",name:y,quantity:c.areaM2,unit:"m2",unitPrice:p.tierPrice,isExpress:c.express,totalPrice:p.totalPrice,optionsHint:b,payload:p})}}}};var Ta=S("wlepkiNaklejki");function _e(e){let t=S("wlepki-naklejki"),r=t.groups.find(s=>s.id===e.groupId);if(!r)throw new Error(`Unknown group: ${e.groupId}`);let o=e.groupId.replace(/_/g,"-"),i={id:"wlepki",title:r.title,unit:r.unit,pricing:r.pricing||"per_unit",tiers:z(o,r.tiers),modifiers:t.modifiers.map(s=>{let m=`wlepki-modifier-${s.id.replace(/_/g,"-")}`;return{...s,value:L(m,s.value)}}),rules:r.rules||[{type:"minimum",unit:"m2",value:1}]},a=[...e.modifiers];return e.express&&a.push("express"),C(i,e.area,a)}var ht=S("wlepkiNaklejki"),Ve={id:"wlepki-naklejki",name:"Wlepki / Naklejki",async mount(e,t){let r=ht;try{let y=await fetch("categories/wlepki-naklejki.html");if(!y.ok)throw new Error("Failed to load template");e.innerHTML=await y.text()}catch(y){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania szablonu: ${y}</div>`;return}let o=e.querySelector("#wlepki-group"),i=e.querySelector("#wlepki-area"),a=e.querySelector("#btn-calculate"),s=e.querySelector("#btn-add-to-cart"),m=e.querySelector("#wlepki-result"),d=e.querySelector("#unit-price"),l=e.querySelector("#total-price"),n=null,p=null,c=()=>{let y=e.querySelectorAll(".wlepki-mod:checked"),b=Array.from(y).map(k=>k.value);p={groupId:o.value,area:parseFloat(i.value)||0,express:t.expressMode,modifiers:b};try{let k=_e(p);n=k,d.textContent=g(k.tierPrice),l.textContent=g(k.totalPrice),m.style.display="block",s.disabled=!1,t.updateLastCalculated(k.totalPrice,"Wlepki")}catch(k){alert("B\u0142\u0105d: "+k.message)}};a.addEventListener("click",c),s.addEventListener("click",()=>{if(!n||!p)return;let y=r.groups.find(k=>k.id===p.groupId),b=p.modifiers.map(k=>{let h=r.modifiers.find(v=>v.id===k);return h?h.name:k});p.express&&b.unshift("EXPRESS (+20%)"),t.cart.addItem({id:`wlepki-${Date.now()}`,category:"Wlepki / Naklejki",name:(y==null?void 0:y.title)||"Wlepki",quantity:p.area,unit:"m2",unitPrice:n.tierPrice,isExpress:!!p.express,totalPrice:n.totalPrice,optionsHint:b.join(", ")||"Standard",payload:n})})}};function Ne(e,t){let r=e.format.toUpperCase(),o=Pe({mode:e.mode,format:r,pages:e.printQty,email:e.email,ink25:e.surcharge,ink25Qty:e.surchargeQty}),i={total:0,unitPrice:0};e.scanType!=="none"&&e.scanQty>0&&(i=ve({type:e.scanType,pages:e.scanQty}));let a=o.grandTotal+i.total,s=a;return e.express&&(s=a*(1+L("modifier-express",.2))),{totalPrice:parseFloat(s.toFixed(2)),unitPrintPrice:o.unitPrice,totalPrintPrice:o.printTotal,unitScanPrice:i.unitPrice,totalScanPrice:i.total,emailPrice:o.emailTotal,surchargePrice:o.inkTotal,baseTotal:a}}var D=[{id:"druk-a4-a3",name:"Druk A4/A3 + skan",icon:"\u{1F5A8}\uFE0F",implemented:!0,pricing:{print_bw:[{min:1,max:5,a4:.9,a3:1.7},{min:6,max:20,a4:.6,a3:1.1},{min:21,max:100,a4:.35,a3:.7},{min:101,max:500,a4:.3,a3:.6},{min:501,max:999,a4:.23,a3:.45},{min:1e3,max:4999,a4:.19,a3:.33},{min:5e3,max:null,a4:.15,a3:.3}],print_color:[{min:1,max:10,a4:2.4,a3:4.8},{min:11,max:40,a4:2.2,a3:4.2},{min:41,max:100,a4:2,a3:3.8},{min:101,max:250,a4:1.8,a3:3},{min:251,max:500,a4:1.6,a3:2.5},{min:501,max:999,a4:1.4,a3:1.9},{min:1e3,max:null,a4:1.1,a3:1.6}],scan_auto:[{min:1,max:9,price:1},{min:10,max:49,price:.5},{min:50,max:99,price:.4},{min:100,max:null,price:.25}],scan_manual:[{min:1,max:4,price:2},{min:5,max:null,price:1}],email_cost:1,surcharge_factor:.5}},{id:"druk-cad",name:"Druk CAD wielkoformatowy",icon:"\u{1F4D0}",implemented:!0,format_prices:{bw:{"A0+":{length:1292,price:12.5},A0:{length:1189,price:11},A1:{length:841,price:6},A2:{length:594,price:4},A3:{length:420,price:2.5}},color:{"A0+":{length:1292,price:26},A0:{length:1189,price:24},A1:{length:841,price:12},A2:{length:594,price:8.5},A3:{length:420,price:5.3}}},meter_prices:{bw:{"A0+":10,A0:9,A1:5,A2:4.5,A3:3.5},color:{"A0+":21,A0:20,A1:14.5,A2:13.9,A3:12}}},{id:"solwent-plakaty",name:"Solwent - Plakaty",icon:"\u{1F5BC}\uFE0F",implemented:!0},{id:"vouchery",name:"Vouchery",icon:"\u{1F39F}\uFE0F",implemented:!0},{id:"dyplomy",name:"Dyplomy",icon:"\u{1F4DC}",implemented:!0},{id:"wizytowki-druk-cyfrowy",name:"Wizyt\xF3wki - druk cyfrowy",icon:"\u{1F4C7}",implemented:!0},{id:"zaproszenia-kreda",name:"Zaproszenia KREDA",icon:"\u2709\uFE0F",implemented:!0},{id:"ulotki-cyfrowe-dwustronne",name:"Ulotki - Cyfrowe Dwustronne",icon:"\u{1F4C4}",implemented:!0},{id:"ulotki-cyfrowe-jednostronne",name:"Ulotki \u2013 cyfrowe jednostronne",icon:"\u{1F4C4}",implemented:!0},{id:"banner",name:"Bannery",icon:"\u{1F3C1}",implemented:!0},{id:"wlepki-naklejki",name:"Wlepki / Naklejki",icon:"\u{1F3F7}\uFE0F",implemented:!0},{id:"roll-up",name:"Roll-up",icon:"\u2195\uFE0F",implemented:!0},{id:"folia-szroniona",name:"Folia szroniona",icon:"\u2744\uFE0F",implemented:!0},{id:"laminowanie",name:"Laminowanie",icon:"\u2728",implemented:!0},{id:"cad-ops",name:"CAD: sk\u0142adanie / skan",icon:"\u{1F4CF}",implemented:!0}];var je={id:"druk-a4-a3-skan",name:"Druk A4/A3 + skan",async mount(e,t){try{let r=await fetch("categories/druk-a4-a3-skan.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){var E;let r=(E=D.find(w=>w.id==="druk-a4-a3-skan"))==null?void 0:E.pricing;if(!r)return;let o=e.querySelector("#d-mode"),i=e.querySelector("#d-format"),a=e.querySelector("#d-print-qty"),s=e.querySelector("#d-email"),m=e.querySelector("#d-surcharge"),d=e.querySelector("#d-surcharge-qty"),l=e.querySelector("#surcharge-qty-row"),n=e.querySelector("#d-scan-type"),p=e.querySelector("#d-scan-qty"),c=e.querySelector("#scan-qty-row"),y=e.querySelector("#d-calculate"),b=e.querySelector("#d-add-to-cart"),k=e.querySelector("#d-result-display"),h=e.querySelector("#d-total-price"),v=e.querySelector("#d-express-hint");e.querySelectorAll(".option-card").forEach(w=>{let M=()=>{let u=w.dataset.checked==="true";w.dataset.checked=String(!u),w.classList.toggle("checked",!u),w.setAttribute("aria-checked",String(!u));let x=w.querySelector("input[type='checkbox']");x&&(x.checked=!u),w.id==="d-surcharge-card"&&(l.style.display=u?"none":"flex")};w.addEventListener("click",M),w.addEventListener("keydown",u=>{(u.key===" "||u.key==="Enter")&&(u.preventDefault(),M())})}),n.onchange=()=>{c.style.display=n.value!=="none"?"flex":"none"};let P=null,f=null;y.onclick=()=>{f={mode:o.value,format:i.value,printQty:parseInt(a.value)||0,email:s.checked,surcharge:m.checked,surchargeQty:parseInt(d.value)||0,scanType:n.value,scanQty:parseInt(p.value)||0,express:t.expressMode};try{let w=Ne(f,r);P=w,h.innerText=g(w.totalPrice),v&&(v.style.display=t.expressMode?"block":"none"),k.style.display="block",b.disabled=!1,t.updateLastCalculated(w.totalPrice,"Druk A4/A3 + skan")}catch(w){alert("B\u0142\u0105d: "+w.message)}},b.onclick=()=>{if(P&&f){let w=Date.now(),M=t.expressMode?1.2:1;if(f.printQty>0||f.scanQty>0&&f.scanType!=="none"){let u=[];f.printQty>0&&u.push(`${f.printQty} str. ${f.format.toUpperCase()} (${f.mode==="bw"?"CZ-B":"KOLOR"})`),f.scanQty>0&&f.scanType!=="none"&&u.push(`Skan ${f.scanType}: ${f.scanQty} str.`),t.expressMode&&u.push("EXPRESS");let x=(P.totalPrintPrice+P.totalScanPrice)*M;t.cart.addItem({id:`druk-${w}-main`,category:"Druk A4/A3 + skan",name:`${f.format.toUpperCase()} ${f.mode==="bw"?"CZ-B":"KOLOR"}`,quantity:f.printQty||f.scanQty,unit:f.printQty>0?"str.":"skan",unitPrice:x/(f.printQty||f.scanQty),isExpress:t.expressMode,totalPrice:parseFloat(x.toFixed(2)),optionsHint:u.join(", "),payload:{...P,type:"main"}})}if(f.email){let u=P.emailPrice*M;t.cart.addItem({id:`email-${w}-email`,category:"Druk A4/A3 + skan",name:"Wysy\u0142ka e-mail",quantity:1,unit:"szt.",unitPrice:u,isExpress:t.expressMode,totalPrice:parseFloat(u.toFixed(2)),optionsHint:t.expressMode?"EXPRESS":"",payload:{price:u,type:"email"}})}if(f.surcharge&&f.surchargeQty>0){let u=P.surchargePrice*M;t.cart.addItem({id:`surcharge-${w}-surcharge`,category:"Druk A4/A3 + skan",name:"Zadruk >25% - dop\u0142ata",quantity:f.surchargeQty,unit:"str.",unitPrice:u/f.surchargeQty,isExpress:t.expressMode,totalPrice:parseFloat(u.toFixed(2)),optionsHint:`${f.surchargeQty} str. (+50%), ${t.expressMode?"EXPRESS":""}`,payload:{price:u,type:"surcharge"}})}}}}};function We(e,t){let r=Ee({mode:e.mode,format:e.format,lengthMm:e.lengthMm,qty:e.qty||1}),o=r.total;return e.express&&(o=r.total*(1+L("modifier-express",.2))),{totalPrice:parseFloat(o.toFixed(2)),basePrice:r.total,detectedType:r.detectedType,isMeter:r.detectedType==="mb",rate:r.rate}}var Wa=S("drukCAD.price"),Ua=S("drukCAD.base");var Ue={id:"druk-cad",name:"Druk CAD wielkoformatowy",async mount(e,t){try{let r=await fetch("categories/druk-cad.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=D.find(f=>f.id==="druk-cad");if(!r)return;let o=e.querySelector("#cad-mode"),i=e.querySelector("#cad-format"),a=e.querySelector("#cad-length"),s=e.querySelector("#qty-sheets"),m=e.querySelector("#qty-sheets-group"),d=e.querySelector("#cad-use-base"),l=e.querySelector("#cad-base-info"),n=e.querySelector("#cad-calculate"),p=e.querySelector("#cad-add-to-cart"),c=e.querySelector("#cad-result-display"),y=e.querySelector("#cad-price-type"),b=e.querySelector("#cad-total-price"),k=e.querySelector("#cad-express-hint"),h=()=>{let f=i.value,E=o.value,w=r.format_prices[E][f].length;l.innerText=`Wymiar bazowy: ${w} mm`;let M=parseInt(a.value)||0,u=Math.abs(M-w)<=.5;return m.style.display=u?"grid":"none",w};i.onchange=h,o.onchange=h,a.oninput=h,d.onclick=()=>{a.value=h().toString(),h()},h();let v=null,P=null;n.onclick=()=>{P={mode:o.value,format:i.value,lengthMm:parseInt(a.value)||0,qty:parseInt(s.value)||1,express:t.expressMode};try{let f=We(P,r);v=f,y.innerText=f.isMeter?"Cena metrowa:":"Cena formatowa:",b.innerText=g(f.totalPrice),k&&(k.style.display=t.expressMode?"block":"none"),c.style.display="block",p.disabled=!1,t.updateLastCalculated(f.totalPrice,"Druk CAD")}catch(f){alert("B\u0142\u0105d: "+f.message)}},p.onclick=()=>{if(v&&P){let f=v.isMeter?"":`${P.qty} szt, `,E=[`${P.format} (${P.mode==="bw"?"CZ-B":"KOLOR"})`,`${f}${P.lengthMm} mm`,t.expressMode?"EXPRESS":""].filter(Boolean).join(", ");t.cart.addItem({id:`cad-${Date.now()}`,category:"Druk CAD wielkoformatowy",name:`${P.format} ${P.mode==="bw"?"CZ-B":"KOLOR"}`,quantity:P.lengthMm,unit:"mm",unitPrice:v.basePrice/P.lengthMm,isExpress:t.expressMode,totalPrice:v.totalPrice,optionsHint:E,payload:v})}}}};var to=S("laminowanie");function Pt(e){let r=S("laminowanie").formats[e];if(!r)throw new Error(`Invalid format: ${e}`);return{id:`laminowanie-${e.toLowerCase()}`,title:`Laminowanie ${e}`,unit:"szt",pricing:"per_unit",tiers:z(`laminowanie-${e.toLowerCase()}`,r),modifiers:[{id:"express",name:"TRYB EXPRESS",type:"percent",value:L("modifier-express",.2)}]}}function Ke(e){let t=Pt(e.format),r=[];return e.express&&r.push("express"),C(t,e.qty,r)}var Qe={id:"laminowanie",name:"Laminowanie",async mount(e,t){try{let r=await fetch("categories/laminowanie.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#lam-format"),o=e.querySelector("#lam-qty"),i=e.querySelector("#lam-calculate"),a=e.querySelector("#lam-add-to-cart"),s=e.querySelector("#lam-result-display"),m=e.querySelector("#lam-total-price"),d=e.querySelector("#lam-express-hint"),l=null,n=null,p=()=>{let c=parseInt(o.value);if(!(isNaN(c)||c<=0)){n={format:r.value,qty:c,express:t.expressMode};try{let y=Ke(n);l=y,m.innerText=g(y.totalPrice),d&&(d.style.display=t.expressMode?"block":"none"),s.style.display="block",a.disabled=!1,t.updateLastCalculated(y.totalPrice,"Laminowanie")}catch{}}};i.onclick=p,a.onclick=()=>{if(l&&n){let c=n.express?", EXPRESS":"";t.cart.addItem({id:`laminowanie-${Date.now()}`,category:"Laminowanie",name:`Laminowanie ${n.format}`,quantity:n.qty,unit:"szt",unitPrice:l.totalPrice/n.qty,isExpress:n.express,totalPrice:l.totalPrice,optionsHint:`${n.qty} szt, Format ${n.format}${c}`,payload:l})}},[r,o].forEach(c=>{c.addEventListener("change",p)}),o.addEventListener("input",p)}};var co=S("foliaSzroniona");function Xe(e){var d;let t=S("folia-szroniona"),r=t.materials.find(l=>l.id===e.serviceId);if(!r)throw new Error(`Unknown service: ${e.serviceId}`);let o=e.widthMm*e.heightMm/1e6,i={id:t.id,title:t.title,unit:t.unit,pricing:t.pricing,rules:t.rules,tiers:z(`folia-szroniona-${(d=r.storageId)!=null?d:r.id}`,r.tiers),modifiers:t.modifiers},a=[];e.express&&a.push("express");let s=C(i,o,a),m=e.serviceId==="full-service"&&o>20;return{...s,isCustom:m}}var Ze={id:"folia-szroniona",name:"Folia szroniona",async mount(e,t){try{let r=await fetch("categories/folia-szroniona.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#fs-service"),o=e.querySelector("#fs-width"),i=e.querySelector("#fs-height"),a=e.querySelector("#fs-calculate"),s=e.querySelector("#fs-add-to-cart"),m=e.querySelector("#fs-result-display"),d=e.querySelector("#fs-normal-result"),l=e.querySelector("#fs-custom-quote"),n=e.querySelector("#fs-area-val"),p=e.querySelector("#fs-unit-price"),c=e.querySelector("#fs-total-price"),y=e.querySelector("#fs-express-hint"),b=null,k=null;a.onclick=()=>{k={serviceId:r.value,widthMm:parseInt(o.value)||0,heightMm:parseInt(i.value)||0,express:t.expressMode};try{let h=Xe(k);if(b=h,h.isCustom)d.style.display="none",l.style.display="block",s.disabled=!0,t.updateLastCalculated(0,"Folia szroniona (wycena ind.)");else{d.style.display="block",l.style.display="none";let v=k.widthMm*k.heightMm/1e6;n.innerText=`${v.toFixed(2)} m2${h.effectiveQuantity>v?" (min. 1m2)":""}`,p.innerText=g(h.tierPrice),c.innerText=g(h.totalPrice),s.disabled=!1,t.updateLastCalculated(h.totalPrice,"Folia szroniona")}y&&(y.style.display=t.expressMode?"block":"none"),m.style.display="block"}catch(h){alert("B\u0142\u0105d: "+h.message)}},s.onclick=()=>{if(b&&k){let h=r.options[r.selectedIndex].text,v=k.widthMm*k.heightMm/1e6,P=[`${k.widthMm}x${k.heightMm} mm`,`${v.toFixed(2)} m2`,t.expressMode?"EXPRESS":""].filter(Boolean).join(", ");t.cart.addItem({id:`fs-${Date.now()}`,category:"Folia szroniona",name:h,quantity:v,unit:"m2",unitPrice:b.tierPrice,isExpress:t.expressMode,totalPrice:b.totalPrice,optionsHint:P,payload:b})}}}};function Je(e){return Me(e)}function Ye(e){return Te(e)}var Ge={id:"cad-ops",name:"CAD: sk\u0142adanie / skan",async mount(e,t){try{let r=await fetch("categories/cad-ops.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#fold-format"),o=e.querySelector("#fold-qty"),i=e.querySelector("#fold-add");i.onclick=()=>{let d=parseInt(o.value);if(!(isNaN(d)||d<=0))try{let l=Je({format:r.value,qty:d}),n=r.value==="A0p"?"A0+":r.value==="A3L"?"A3-poprzeczne":r.value;t.cart.addItem({id:`cad-fold-${Date.now()}`,category:"CAD",name:`Sk\u0142adanie (${n})`,quantity:d,unit:"szt",unitPrice:l.unit,totalPrice:l.total,optionsHint:`${d} szt.`,payload:l}),t.updateLastCalculated(l.total,"Sk\u0142adanie CAD")}catch(l){alert(l.message)}};let a=e.querySelector("#wf-scan-mm"),s=e.querySelector("#wf-scan-qty"),m=e.querySelector("#wf-scan-add");m.onclick=()=>{let d=parseInt(a.value),l=parseInt(s.value);if(!(isNaN(d)||d<=0||isNaN(l)||l<=0))try{let n=Ye({lengthMm:d,qty:l});t.cart.addItem({id:`cad-wf-scan-${Date.now()}`,category:"CAD",name:"Skanowanie wielkoformatowe",quantity:l,unit:"szt",unitPrice:n.unitPrice,totalPrice:n.total,optionsHint:`${l} szt, ${d} mm`,payload:n}),t.updateLastCalculated(n.total,"Skanowanie WF")}catch(n){alert(n.message)}}}};var ho=25.4/300;function Z(e,t){console.log("detectFormatFromDimensions called with:",{widthMm:e,heightMm:t}),console.log("CAD_BASE:",N);let r=Math.min(e,t),o=Math.max(e,t);console.log("shorter:",r,"longer:",o);for(let[i,a]of Object.entries(N)){if(i==="R1067")continue;let s=a.w,m=a.l;if(console.log("Checking format",i,"width:",s,"length:",m),Math.abs(r-s)<.5)return console.log("Width matches for format",i),Math.abs(o-m)<=U?(console.log("Length also matches - formatowy"),{format:i,isFormatowy:!0,isStandardWidth:!0}):(console.log("Length doesn't match - meter-based"),{format:i,isFormatowy:!1,isStandardWidth:!0})}return console.log("No standard format found - non-standard"),{format:`${Math.round(r)}mm`,isFormatowy:!1,isStandardWidth:!1}}function vt(e,t,r,o,i,a){console.log("calculateCadPrintPrice called with:",{widthMm:e,heightMm:t,format:r,isFormatowy:o,mode:i,qty:a});let s=V[i];if(console.log("CAD_PRICE:",V),console.log("prices for mode",i,":",s),o){let m=s.formatowe[r];return console.log("Format-based price for",r,":",m),m?a*m:0}else{let m=s.mb[r];if(console.log("Meter-based price for",r,":",m),!m)return 0;let d=Math.max(e,t)/1e3;return console.log("Length in meters:",d),a*d*m}}function Et(e,t,r,o,i,a){if(!i)return 0;if(t){let m={A0p:4,A0:3,A1:2,A2:1.5,A3:1,A3L:.7}[e];return m?a*m:0}else{let s=r/1e3*(o/1e3);return a*s*2.5}}function Mt(e,t,r,o){if(!r)return 0;let i=Math.max(e,t);return o*i*K}function O(e,t){let r=e.widthMm||0,o=e.heightMm||0,i=e.format||"unknown",a=e.isFormatowy||!1,s=1,m=vt(r,o,i,a,t,s),d=Et(i,a,r,o,e.folding||!1,s),l=Mt(r,o,e.scanning||!1,s);return{id:e.id||0,name:e.name||"",widthPx:e.widthPx||0,heightPx:e.heightPx||0,widthMm:r,heightMm:o,format:i,isFormatowy:a,isStandardWidth:e.isStandardWidth||!1,folding:e.folding||!1,scanning:e.scanning||!1,printPrice:m,foldingPrice:d,scanPrice:l,totalPrice:parseFloat(W(m+d+l))}}var et={id:"cad-upload",name:"CAD Upload plik\xF3w",async mount(e,t){try{let r=await fetch("categories/cad-upload.html");if(!r.ok)throw new Error("Failed to load template");e.innerHTML=await r.text(),this.initLogic(e,t)}catch(r){e.innerHTML=`<div class="error">B\u0142\u0105d \u0142adowania: ${r}</div>`}},initLogic(e,t){let r=e.querySelector("#uploadZone"),o=e.querySelector("#cadFileInput")||e.querySelector("#fileInput"),i=e.querySelector("#dpiInput"),a=e.querySelector("#colorToggle")||e.querySelector("#cadColorToggle"),s=e.querySelector("#colorSwitch"),m=e.querySelector("#filesTableBody")||e.querySelector("#cadTableBody"),d=e.querySelector("#summaryPanel")||e.querySelector("#cadSummary"),l=e.querySelector("#summaryGrid"),n=e.querySelector("#grandTotal"),p=e.querySelector("#clearBtn");if(!r||!o||!m)return;let c=[],y=!1,b=300,k=1;function h(u){return u*(25.4/b)}function v(){return y?"color":"bw"}function P(u){return O({id:u.id,name:u.name,widthPx:u.widthPx,heightPx:u.heightPx,widthMm:h(u.widthPx),heightMm:h(u.heightPx),format:u.format,isFormatowy:u.isFormatowy,isStandardWidth:u.isStandardWidth,folding:u.folding,scanning:u.scanning},v())}function f(){if(m){if(c.length===0){m.innerHTML="",d&&(d.style.display="none");return}m.innerHTML=c.map(u=>`
        <tr data-file-id="${u.id}">
          <td><strong>${Tt(u.name)}</strong></td>
          <td>${u.widthPx} \xD7 ${u.heightPx}</td>
          <td>${Math.round(u.widthMm)} \xD7 ${Math.round(u.heightMm)} mm</td>
          <td><strong>${u.format}</strong></td>
          <td>${u.isFormatowy?"Formatowy":"Metr-bie\u017C\u0105cy"}</td>
          <td>
            <input type="checkbox" class="fold-check" ${u.folding?"checked":""} />
          </td>
          <td>
            <input type="checkbox" class="scan-check" ${u.scanning?"checked":""} />
          </td>
          <td><strong>${g(u.totalPrice)}</strong></td>
        </tr>
      `).join(""),m.querySelectorAll(".fold-check").forEach((u,x)=>{u.addEventListener("change",T=>{c[x].folding=T.target.checked,c[x]=P(c[x]),f(),E()})}),m.querySelectorAll(".scan-check").forEach((u,x)=>{u.addEventListener("change",T=>{c[x].scanning=T.target.checked,c[x]=P(c[x]),f(),E()})}),E()}}function E(){if(!d||!l)return;let u=c.reduce((q,A)=>q+A.printPrice,0),x=c.reduce((q,A)=>q+A.foldingPrice,0),T=c.reduce((q,A)=>q+A.scanPrice,0),H=u+x+T;l.innerHTML=`
        <div class="summary-item">
          <span>Wydruki (${c.length} plik${c.length!==1?"i/\xF3w":""}):</span>
          <span>${g(u)}</span>
        </div>
        <div class="summary-item">
          <span>Sk\u0142adanie:</span>
          <span>${g(x)}</span>
        </div>
        <div class="summary-item">
          <span>Skanowanie:</span>
          <span>${g(T)}</span>
        </div>
        <div class="summary-item">
          <span><strong>RAZEM:</strong></span>
          <span><strong>${g(H)}</strong></span>
        </div>
      `,n&&(n.textContent=g(H)),d.style.display=c.length>0?"block":"none"}function w(u,x){let T=new FileReader;T.onload=H=>{var A;let q=new Image;q.onload=()=>{let $=h(q.naturalWidth||q.width),R=h(q.naturalHeight||q.height),_=Z($,R);x.widthPx=q.naturalWidth||q.width,x.heightPx=q.naturalHeight||q.height,x.widthMm=$,x.heightMm=R,x.format=_.format,x.isFormatowy=_.isFormatowy,x.isStandardWidth=_.isStandardWidth;let re=O(x,v());console.log("CAD FILE META AFTER PROCESSING:",re),c.push(re),f()},q.onerror=()=>{console.error("Failed to load image:",u.name);let $=O(x,v());c.push($),f()},q.src=(A=H.target)==null?void 0:A.result},T.onerror=()=>{console.error("Failed to read file:",u.name)},T.readAsDataURL(u)}function M(u){console.log("CAD FILES:",u);for(let x of Array.from(u)){console.log("Processing file:",x.name,"type:",x.type);let T={id:k++,name:x.name,widthPx:0,heightPx:0,widthMm:0,heightMm:0,format:"unknown",isFormatowy:!1,isStandardWidth:!1,folding:!1,scanning:!1,printPrice:0,foldingPrice:0,scanPrice:0,totalPrice:0};if(x.type.startsWith("image/")||x.type==="application/pdf"||x.name.match(/\.(pdf|jpe?g|png|tiff?)$/i))w(x,T);else if(x.name.match(/\.(dwg|dxf)$/i)){let H=2480+Math.random()*1e3,q=1754+Math.random()*1e3,A=h(H),$=h(q),R=Z(A,$);T.widthPx=Math.round(H),T.heightPx=Math.round(q),T.widthMm=A,T.heightMm=$,T.format=R.format,T.isFormatowy=R.isFormatowy,T.isStandardWidth=R.isStandardWidth;let _=O(T,v());c.push(_),f()}else{console.warn("Unsupported file type:",x.name,x.type),T.widthMm=0,T.heightMm=0;let H=O(T,v());console.log("CAD FILE META AFTER PROCESSING (unsupported):",H),c.push(H),f()}}}r&&(r.addEventListener("click",()=>o.click()),r.addEventListener("dragenter",u=>{u.preventDefault(),r.classList.add("drag-over")}),r.addEventListener("dragover",u=>{u.preventDefault(),r.classList.add("drag-over")}),r.addEventListener("dragleave",u=>{r.contains(u.relatedTarget)||r.classList.remove("drag-over")}),r.addEventListener("drop",u=>{u.preventDefault(),r.classList.remove("drag-over"),M(u.dataTransfer.files)})),o.addEventListener("change",u=>{M(u.target.files)}),a&&a.addEventListener("click",()=>{y=!y,s==null||s.classList.toggle("active",y),c=c.map(P),f()}),i&&i.addEventListener("change",u=>{b=parseInt(u.target.value)||300,c=c.map(x=>{x.widthMm=h(x.widthPx),x.heightMm=h(x.heightPx);let T=Z(x.widthMm,x.heightMm);return x.format=T.format,x.isFormatowy=T.isFormatowy,x.isStandardWidth=T.isStandardWidth,P(x)}),f()}),p&&p.addEventListener("click",()=>{c=[],o.value="",f()}),f()},unmount(){}};function Tt(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}var J=class{constructor(){this.items=[];this.storageKey="razdwa-cart-v1";this.load()}load(){try{let t=localStorage.getItem(this.storageKey);t&&(this.items=JSON.parse(t))}catch{this.items=[]}}save(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.items))}catch{}}addItem(t){this.items.push(t),this.save()}removeItem(t){t>=0&&t<this.items.length&&(this.items.splice(t,1),this.save())}clear(){this.items=[],this.save()}getItems(){return[...this.items]}getGrandTotal(){return this.items.reduce((t,r)=>t+r.totalPrice,0)}isEmpty(){return this.items.length===0}};function tt(e,t){if(typeof XLSX=="undefined"){alert("B\u0142\u0105d: Biblioteka Excel nie zosta\u0142a wczytana.");return}let r=e.map(m=>({Kategoria:m.category,Nazwa:m.name,Ilo\u015B\u0107:m.quantity,Jednostka:m.unit,"Cena jedn.":m.unitPrice,"Express (+20%)":m.isExpress?"TAK":"NIE","Cena ca\u0142kowita":m.totalPrice,Klient:t.name,Telefon:t.phone,Email:t.email,Priorytet:t.priority})),o=XLSX.utils.json_to_sheet(r),i=XLSX.utils.book_new();XLSX.utils.book_append_sheet(i,o,"Zam\xF3wienie");let a=new Date().toISOString().slice(0,10),s=`Zamowienie_${t.name.replace(/\s+/g,"_")}_${a}.xlsx`;XLSX.writeFile(i,s)}var F=new J;function Lt(e){let t=document.createElement("div");t.className="toast",t.innerText=e,document.body.appendChild(t),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>t.remove(),300)},2e3)}function Y(){let e=document.getElementById("basketList"),t=document.getElementById("basketTotal"),r=document.getElementById("basketDebug");if(!e||!t||!r)return;let o=F.getItems();o.length===0?e.innerHTML=`
      <div class="basketItem">
        <div>
          <div class="basketTitle">Brak pozycji</div>
          <div class="basketMeta">Kliknij \u201EDodaj\u201D, aby zbudowa\u0107 list\u0119.</div>
        </div>
        <div class="basketPrice">\u2014</div>
      </div>
    `:e.innerHTML=o.map((a,s)=>`
      <div class="basketItem">
        <div style="min-width:0;">
          <div class="basketTitle">${a.category}: ${a.name}</div>
          <div class="basketMeta">${a.optionsHint} (${a.quantity} ${a.unit})</div>
        </div>
        <div style="display:flex; gap:10px; align-items:center;">
          <div class="basketPrice">${g(a.totalPrice)}</div>
          <button class="iconBtn" data-remove-idx="${s}" title="Usu\u0144">\xD7</button>
        </div>
      </div>
    `).join("");let i=F.getGrandTotal();t.innerText=g(i),r.innerText=JSON.stringify(o.map(a=>a.payload),null,2)}document.addEventListener("DOMContentLoaded",()=>{var s,m,d;let e=document.getElementById("viewContainer"),t=document.getElementById("categorySelector"),r=document.getElementById("categorySearch"),o=document.getElementById("globalExpress");if(document.addEventListener("click",l=>{var p;let n=l.target.closest("[data-remove-idx]");if(n){let c=parseInt((p=n.dataset.removeIdx)!=null?p:"",10);isNaN(c)||(F.removeItem(c),Y())}}),!e||!t||!o||!r)return;let i=()=>({cart:{addItem:l=>{F.addItem(l),Y(),Lt("\u2713 Dodano do listy")}},expressMode:o.checked,updateLastCalculated:(l,n)=>{let p=document.getElementById("currentPrice"),c=document.getElementById("currentHint");p&&(p.innerText=g(l)),c&&(c.innerText=n?`(${n})`:"")}}),a=new j(e,i);a.setCategories(D),a.addRoute(ye),a.addRoute(je),a.addRoute(Ue),a.addRoute(me),a.addRoute(we),a.addRoute(he),a.addRoute(Ce),a.addRoute(ze),a.addRoute(Ie),a.addRoute(Re),a.addRoute(Oe),a.addRoute(Ve),a.addRoute(Qe),a.addRoute(Ze),a.addRoute(Ge),a.addRoute(et),D.forEach(l=>{let n=document.createElement("option");n.value=l.id,n.innerText=`${l.icon} ${l.name}`,l.implemented||(n.disabled=!0,n.innerText+=" (wkr\xF3tce)"),t.appendChild(n)}),t.addEventListener("change",()=>{let l=t.value;l?window.location.hash=`#/${l}`:window.location.hash="#/"}),r.addEventListener("input",()=>{let l=r.value.toLowerCase();Array.from(t.options).forEach((p,c)=>{if(c===0)return;let y=p.text.toLowerCase();p.hidden=!y.includes(l)})}),r.addEventListener("keydown",l=>{if(l.key==="Enter"){let n=r.value.toLowerCase(),p=Array.from(t.options).find((c,y)=>y>0&&!c.hidden&&!c.disabled);p&&(t.value=p.value,window.location.hash=`#/${p.value}`,r.value="")}}),window.addEventListener("hashchange",()=>{let n=(window.location.hash||"#/").slice(2);t.value=n}),o.addEventListener("change",()=>{let l=document.getElementById("orderSummary");l&&l.classList.toggle("is-express",o.checked);let n=window.location.hash;window.location.hash="",window.location.hash=n}),(s=document.getElementById("copyBtn"))==null||s.addEventListener("click",()=>{var p;let l=document.getElementById("basketTotal"),n=l?`Suma: ${l.innerText}`:"Brak pozycji";(p=navigator.clipboard)==null||p.writeText(n)}),(m=document.getElementById("clearBtn"))==null||m.addEventListener("click",()=>{F.clear(),Y()}),(d=document.getElementById("sendBtn"))==null||d.addEventListener("click",()=>{let l={name:document.getElementById("custName").value||"Anonim",phone:document.getElementById("custPhone").value||"-",email:document.getElementById("custEmail").value||"-",priority:document.getElementById("custPriority").value};if(F.isEmpty()){alert("Lista jest pusta!");return}tt(F.getItems(),l)}),Y(),a.start()});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(()=>{}).catch(()=>{})});})();
