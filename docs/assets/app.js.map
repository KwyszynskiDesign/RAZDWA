{
  "version": 3,
  "sources": ["../../src/ui/router.ts", "../../src/core/money.ts", "../../src/core/cart.ts", "../../src/ui/excel.ts", "../../data/categories.json", "../../src/categories/sample.ts", "../../src/core/price-store.ts", "../../src/core/pricing.ts", "../../data/normalized/solwent-plakaty-200g.json", "../../src/categories/plakaty.ts", "../../src/categories/vouchery.ts", "../../src/categories/dyplomy.ts", "../../src/categories/wizytowki.ts", "../../data/normalized/zaproszenia-kreda.json", "../../src/categories/zaproszenia-kreda.ts", "../../src/ui/views/zaproszenia-kreda.ts", "../../data/normalized/ulotki-cyfrowe-jednostronne.json", "../../src/categories/ulotki-cyfrowe-jednostronne.ts", "../../src/ui/views/ulotki-cyfrowe-jednostronne.ts", "../../data/normalized/banner.json", "../../src/categories/banner.ts", "../../src/ui/views/banner.ts", "../../data/normalized/wlepki-naklejki.json", "../../src/categories/wlepki-naklejki.ts", "../../src/ui/views/wlepki-naklejki.ts", "../../data/normalized/roll-up.json", "../../src/categories/roll-up.ts", "../../src/ui/views/roll-up.ts", "../../src/categories/loader.ts", "../../src/ui/views/druk-cad-advanced.ts", "../../src/core/compat.ts", "../../src/core/compat-logic.ts", "../../src/categories/druk-a4-a3-skan.ts", "../../src/ui/views/druk-a4-a3.ts", "../../src/categories/index.ts", "../../src/core/config.ts", "../../src/ui/views/settings.ts", "../../src/ui/main.ts"],
  "sourcesContent": ["import { View, ViewContext } from \"./types\";\n\nexport type CategoryModule = View;\nexport type CategoryContext = ViewContext;\n\nexport class Router {\n  private routes: Map<string, View> = new Map();\n  private currentView: View | null = null;\n  private container: HTMLElement;\n  private getCtx: () => ViewContext;\n  private categories: any[] = [];\n\n  constructor(container: HTMLElement, getCtx: () => ViewContext) {\n    this.container = container;\n    this.getCtx = getCtx;\n    window.addEventListener(\"hashchange\", () => this.handleRoute());\n  }\n\n  setCategories(categories: any[]) {\n    this.categories = categories;\n  }\n\n  addRoute(view: View) {\n    this.routes.set(view.id, view);\n  }\n\n  handleRoute() {\n    const hash = window.location.hash || \"#/\";\n    const path = hash.slice(2); // remove #/\n\n    if (this.currentView && this.currentView.unmount) {\n      this.currentView.unmount();\n    }\n\n    this.container.innerHTML = \"\";\n\n    let view = this.routes.get(path);\n    \n    // Check if it's an iframe category\n    const catDef = this.categories.find(c => c.id === path);\n    if (!view && catDef && catDef.type === 'iframe') {\n      view = {\n        id: catDef.id,\n        name: catDef.name,\n        mount: (container) => {\n          container.innerHTML = `\n            <iframe \n              src=\"${catDef.id === 'cad-kalkulator' ? 'kalkulator_cad.html' : catDef.path}\"\n              style=\"width: 100%; height: calc(100vh - 150px); border: 2px solid #e2e8f0; border-radius: 12px; display: block; background: white;\"\n              title=\"${catDef.name}\"\n              allow=\"clipboard-write\"\n            ></iframe>\n          `;\n        }\n      };\n    }\n\n    if (view) {\n      this.currentView = view;\n      \n      // Dodaj przycisk powrotu\n      const backButton = document.createElement('button');\n      backButton.className = 'back-button';\n      backButton.textContent = 'Wszystkie kategorie';\n      backButton.onclick = () => { window.location.hash = '#/'; };\n      this.container.appendChild(backButton);\n\n      // Kontener na kategori\u0119\n      const categoryContent = document.createElement('div');\n      categoryContent.className = 'category-content';\n      categoryContent.id = 'current-category';\n      this.container.appendChild(categoryContent);\n\n      view.mount(categoryContent, this.getCtx());\n    } else {\n      this.renderHome();\n    }\n  }\n\n  private renderHome() {\n    const groups: Record<string, any[]> = {};\n    this.categories.forEach(cat => {\n      const g = cat.group || \"Pozosta\u0142e\";\n      if (!groups[g]) groups[g] = [];\n      groups[g].push(cat);\n    });\n\n    let html = '';\n    for (const [groupName, cats] of Object.entries(groups)) {\n      html += `\n        <h2 class=\"category-group-title\">${groupName}</h2>\n        <div class=\"category-grid\">\n          ${cats.map(cat => `\n            <div class=\"category-card ${cat.implemented ? '' : 'coming-soon'}\"\n                 ${cat.implemented ? `onclick=\"window.location.hash='#/${cat.id}'\"` : ''}>\n              <div class=\"category-icon\">${cat.icon}</div>\n              <div class=\"category-name\">${cat.name}</div>\n              ${cat.implemented ? '' : '<div class=\"badge\">Wkr\u00F3tce</div>'}\n            </div>\n          `).join(\"\")}\n        </div>\n      `;\n    }\n\n    this.container.innerHTML = html;\n  }\n\n  start() {\n    this.handleRoute();\n  }\n}\n", "export function formatPLN(amount: number): string { return new Intl.NumberFormat(\"pl-PL\", { style: \"currency\", currency: \"PLN\" }).format(amount); }\n", "import { CartItem } from \"./types\";\n\nexport class Cart {\n  private items: CartItem[] = [];\n  private storageKey = \"razdwa-cart-v1\";\n\n  constructor() {\n    this.load();\n  }\n\n  private load() {\n    try {\n      const saved = localStorage.getItem(this.storageKey);\n      if (saved) {\n        this.items = JSON.parse(saved);\n      }\n    } catch (e) {\n      console.error(\"Failed to load cart from localStorage\", e);\n      this.items = [];\n    }\n  }\n\n  private save() {\n    try {\n      localStorage.setItem(this.storageKey, JSON.stringify(this.items));\n    } catch (e) {\n      console.error(\"Failed to save cart to localStorage\", e);\n    }\n  }\n\n  addItem(item: CartItem) {\n    this.items.push(item);\n    this.save();\n  }\n\n  removeItem(index: number) {\n    if (index >= 0 && index < this.items.length) {\n      this.items.splice(index, 1);\n      this.save();\n    }\n  }\n\n  clear() {\n    this.items = [];\n    this.save();\n  }\n\n  getItems(): CartItem[] {\n    return [...this.items];\n  }\n\n  getGrandTotal(): number {\n    return this.items.reduce((sum, item) => sum + item.totalPrice, 0);\n  }\n\n  isEmpty(): boolean {\n    return this.items.length === 0;\n  }\n}\n", "import { CartItem, CustomerData } from \"../core/types\";\n\ndeclare const XLSX: any;\n\nexport function downloadExcel(cartItems: CartItem[], customer: CustomerData) {\n  if (typeof XLSX === 'undefined') {\n    console.error(\"XLSX library not loaded from CDN\");\n    alert(\"B\u0142\u0105d: Biblioteka Excel nie zosta\u0142a wczytana.\");\n    return;\n  }\n\n  const data = cartItems.map(item => ({\n    \"Kategoria\": item.category,\n    \"Nazwa\": item.name,\n    \"Ilo\u015B\u0107\": item.quantity,\n    \"Jednostka\": item.unit,\n    \"Cena jedn.\": item.unitPrice,\n    \"Express (+20%)\": item.isExpress ? \"TAK\" : \"NIE\",\n    \"Cena ca\u0142kowita\": item.totalPrice,\n    \"Klient\": customer.name,\n    \"Telefon\": customer.phone,\n    \"Email\": customer.email,\n    \"Priorytet\": customer.priority\n  }));\n\n  const worksheet = XLSX.utils.json_to_sheet(data);\n  const workbook = XLSX.utils.book_new();\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Zam\u00F3wienie\");\n\n  // Generate filename with date\n  const date = new Date().toISOString().slice(0, 10);\n  const filename = `Zamowienie_${customer.name.replace(/\\s+/g, '_')}_${date}.xlsx`;\n\n  XLSX.writeFile(workbook, filename);\n}\n", "[\n  {\n    \"id\": \"druk-a4-a3\",\n    \"name\": \"Druk A4/A3 + skan\",\n    \"icon\": \"\uD83D\uDDA8\uFE0F\",\n    \"group\": \"Druk ma\u0142oformatowy\",\n    \"implemented\": true,\n    \"pricing\": {\n      \"print_bw\": [\n        { \"min\": 1, \"max\": 5, \"a4\": 0.90, \"a3\": 1.70 },\n        { \"min\": 6, \"max\": 20, \"a4\": 0.60, \"a3\": 1.10 },\n        { \"min\": 21, \"max\": 100, \"a4\": 0.35, \"a3\": 0.70 },\n        { \"min\": 101, \"max\": 500, \"a4\": 0.30, \"a3\": 0.60 },\n        { \"min\": 501, \"max\": 999, \"a4\": 0.23, \"a3\": 0.45 },\n        { \"min\": 1000, \"max\": 4999, \"a4\": 0.19, \"a3\": 0.33 },\n        { \"min\": 5000, \"max\": null, \"a4\": 0.15, \"a3\": 0.30 }\n      ],\n      \"print_color\": [\n        { \"min\": 1, \"max\": 10, \"a4\": 2.40, \"a3\": 4.80 },\n        { \"min\": 11, \"max\": 40, \"a4\": 2.20, \"a3\": 4.20 },\n        { \"min\": 41, \"max\": 100, \"a4\": 2.00, \"a3\": 3.80 },\n        { \"min\": 101, \"max\": 250, \"a4\": 1.80, \"a3\": 3.00 },\n        { \"min\": 251, \"max\": 500, \"a4\": 1.60, \"a3\": 2.50 },\n        { \"min\": 501, \"max\": 999, \"a4\": 1.40, \"a3\": 1.90 },\n        { \"min\": 1000, \"max\": null, \"a4\": 1.10, \"a3\": 1.60 }\n      ],\n      \"scan_auto\": [\n        { \"min\": 1, \"max\": 9, \"price\": 1.00 },\n        { \"min\": 10, \"max\": 49, \"price\": 0.50 },\n        { \"min\": 50, \"max\": 99, \"price\": 0.40 },\n        { \"min\": 100, \"max\": null, \"price\": 0.25 }\n      ],\n      \"scan_manual\": [\n        { \"min\": 1, \"max\": 4, \"price\": 2.00 },\n        { \"min\": 5, \"max\": null, \"price\": 1.00 }\n      ],\n      \"email_cost\": 1.00,\n      \"surcharge_factor\": 0.50\n    }\n  },\n  {\n    \"id\": \"ulotki-cyfrowe-jednostronne\",\n    \"name\": \"Ulotki\",\n    \"icon\": \"\uD83D\uDCC4\",\n    \"group\": \"Druk ma\u0142oformatowy\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"wizytowki-druk-cyfrowy\",\n    \"name\": \"Wizyt\u00F3wki\",\n    \"icon\": \"\uD83D\uDCC7\",\n    \"group\": \"Druk ma\u0142oformatowy\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"dyplomy\",\n    \"name\": \"Dyplomy\",\n    \"icon\": \"\uD83D\uDCDC\",\n    \"group\": \"Druk ma\u0142oformatowy\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"zaproszenia-kreda\",\n    \"name\": \"Zaproszenia\",\n    \"icon\": \"\u2709\uFE0F\",\n    \"group\": \"Druk ma\u0142oformatowy\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"vouchery\",\n    \"name\": \"Vouchery\",\n    \"icon\": \"\uD83C\uDF9F\uFE0F\",\n    \"group\": \"Druk ma\u0142oformatowy\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"druk-cad\",\n    \"name\": \"Druk CAD\",\n    \"icon\": \"\uD83D\uDCD0\",\n    \"group\": \"Druk wielkoformatowy\",\n    \"implemented\": true,\n    \"format_prices\": {\n      \"bw\": {\n        \"A0+\": { \"length\": 1292, \"price\": 12.50 },\n        \"A0\": { \"length\": 1189, \"price\": 11.00 },\n        \"A1\": { \"length\": 841, \"price\": 6.00 },\n        \"A2\": { \"length\": 594, \"price\": 4.00 },\n        \"A3\": { \"length\": 420, \"price\": 2.50 }\n      },\n      \"color\": {\n        \"A0+\": { \"length\": 1292, \"price\": 26.00 },\n        \"A0\": { \"length\": 1189, \"price\": 24.00 },\n        \"A1\": { \"length\": 841, \"price\": 12.00 },\n        \"A2\": { \"length\": 594, \"price\": 8.50 },\n        \"A3\": { \"length\": 420, \"price\": 5.30 }\n      }\n    },\n    \"meter_prices\": {\n      \"bw\": {\n        \"A0+\": 10.00,\n        \"A0\": 9.00,\n        \"A1\": 5.00,\n        \"A2\": 4.50,\n        \"A3\": 3.50\n      },\n      \"color\": {\n        \"A0+\": 21.00,\n        \"A0\": 20.00,\n        \"A1\": 14.50,\n        \"A2\": 13.90,\n        \"A3\": 12.00\n      }\n    }\n  },\n  {\n    \"id\": \"cad-ops\",\n    \"name\": \"CAD: sk\u0142adanie / skan\",\n    \"icon\": \"\uD83D\uDCCF\",\n    \"group\": \"Druk wielkoformatowy\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"solwent-plakaty\",\n    \"name\": \"Solwent - Plakaty\",\n    \"icon\": \"\uD83D\uDDBC\uFE0F\",\n    \"group\": \"Druk wielkoformatowy\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"banner\",\n    \"name\": \"Bannery\",\n    \"icon\": \"\uD83C\uDFC1\",\n    \"group\": \"Druk wielkoformatowy\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"folia-szroniona\",\n    \"name\": \"Folia szroniona\",\n    \"icon\": \"\u2744\uFE0F\",\n    \"group\": \"Druk wielkoformatowy\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"roll-up\",\n    \"name\": \"Roll-up\",\n    \"icon\": \"\u2195\uFE0F\",\n    \"group\": \"Reklama i wyko\u0144czenie\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"laminowanie\",\n    \"name\": \"Laminowanie\",\n    \"icon\": \"\u2728\",\n    \"group\": \"Reklama i wyko\u0144czenie\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"wlepki-naklejki\",\n    \"name\": \"Wlepki / Naklejki\",\n    \"icon\": \"\uD83C\uDFF7\uFE0F\",\n    \"group\": \"Reklama i wyko\u0144czenie\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"cad-kalkulator\",\n    \"name\": \"CAD - Kalkulator\",\n    \"description\": \"Wycena wydruk\u00F3w wielkiformatowych (A3-A0+)\",\n    \"icon\": \"\uD83D\uDDA8\uFE0F\",\n    \"group\": \"Druk wielkoformatowy\",\n    \"path\": \"/kalkulator-cad\",\n    \"type\": \"iframe\",\n    \"implemented\": true\n  }\n]\n", "import { CategoryModule, CategoryContext } from \"../ui/router\";\nimport { formatPLN } from \"../core/money\";\n\nexport const sampleCategory: CategoryModule = {\n  id: \"sample\",\n  name: \"Sample Category\",\n  mount: (container: HTMLElement, ctx: CategoryContext) => {\n    container.innerHTML = `\n      <div class=\"category-view\">\n        <h2>Przyk\u0142adowa Kategoria</h2>\n        <div class=\"form\">\n          <div class=\"row\">\n            <label>Ilo\u015B\u0107</label>\n            <input type=\"number\" id=\"sampleQty\" value=\"1\" min=\"1\">\n          </div>\n          <div class=\"row\">\n            <label>Cena jednostkowa</label>\n            <span>10,00 z\u0142</span>\n          </div>\n          <div class=\"actions\" style=\"margin-top: 20px;\">\n            <button id=\"addSampleBtn\" class=\"primary\">Dodaj do koszyka</button>\n          </div>\n        </div>\n      </div>\n    `;\n\n    const addBtn = container.querySelector(\"#addSampleBtn\");\n    const qtyInput = container.querySelector(\"#sampleQty\") as HTMLInputElement;\n\n    addBtn?.addEventListener(\"click\", () => {\n      const qty = parseInt(qtyInput.value) || 1;\n      const price = qty * 10;\n      ctx.cart.addItem({\n        categoryId: \"sample\",\n        categoryName: \"Sample Category\",\n        details: { qty },\n        price: price\n      });\n      alert(`Dodano do koszyka: ${qty} szt. za ${formatPLN(price)}`);\n    });\n  },\n  unmount: () => {\n    console.log(\"Unmounting sample category\");\n  }\n};\n", "/**\n * PriceStore manages all pricing data in the application.\n * It supports default values and overrides stored in localStorage.\n */\nimport { Product, PricingRule } from \"./types\";\n\nexport interface PriceEntry {\n  id: string;\n  category: string;\n  name: string;\n  defaultValue: number;\n  currentValue: number;\n}\n\nexport class PriceStore {\n  private static instance: PriceStore;\n  private overrides: Record<string, number> = {};\n  private registry: Map<string, PriceEntry> = new Map();\n  \n  // New structured database\n  private products: Product[] = [];\n  private rules: PricingRule[] = [];\n\n  private constructor() {\n    this.loadOverrides();\n    this.loadStructuredData();\n  }\n\n  public static getInstance(): PriceStore {\n    if (!PriceStore.instance) {\n      PriceStore.instance = new PriceStore();\n    }\n    return PriceStore.instance;\n  }\n\n  private loadOverrides() {\n    if (typeof localStorage === 'undefined') return;\n    try {\n      const stored = localStorage.getItem(\"price_overrides\");\n      if (stored) {\n        this.overrides = JSON.parse(stored);\n      }\n    } catch (e) {\n      console.error(\"Failed to load price overrides\", e);\n    }\n  }\n\n  private saveOverrides() {\n    if (typeof localStorage === 'undefined') return;\n    try {\n      localStorage.setItem(\"price_overrides\", JSON.stringify(this.overrides));\n    } catch (e) {\n      console.error(\"Failed to save price overrides\", e);\n    }\n  }\n\n  private loadStructuredData() {\n    if (typeof localStorage === 'undefined') return;\n    try {\n      const p = localStorage.getItem(\"price_products\");\n      const r = localStorage.getItem(\"price_rules\");\n      if (p) this.products = JSON.parse(p);\n      if (r) this.rules = JSON.parse(r);\n    } catch (e) {}\n  }\n\n  private saveStructuredData() {\n    if (typeof localStorage === 'undefined') return;\n    try {\n      localStorage.setItem(\"price_products\", JSON.stringify(this.products));\n      localStorage.setItem(\"price_rules\", JSON.stringify(this.rules));\n    } catch (e) {}\n  }\n\n  /**\n   * Registers a price point with a default value.\n   * If an override exists, it will be used.\n   */\n  public register(id: string, category: string, name: string, defaultValue: number): number {\n    const currentValue = this.overrides[id] !== undefined ? this.overrides[id] : defaultValue;\n    this.registry.set(id, { id, category, name, defaultValue, currentValue });\n    return currentValue;\n  }\n\n  /**\n   * Gets the current value for a price ID.\n   */\n  public get(id: string, defaultValue: number): number {\n    return this.overrides[id] !== undefined ? this.overrides[id] : defaultValue;\n  }\n\n  /**\n   * Bulk updates multiple prices.\n   */\n  public updatePrices(updates: Record<string, number>) {\n    for (const [id, value] of Object.entries(updates)) {\n      this.overrides[id] = value;\n      const entry = this.registry.get(id);\n      if (entry) {\n        entry.currentValue = value;\n      }\n    }\n    this.saveOverrides();\n  }\n\n  /**\n   * Returns all registered price entries for the UI.\n   */\n  public getAllEntries(): PriceEntry[] {\n    return Array.from(this.registry.values());\n  }\n\n  public getProducts(): Product[] {\n    return this.products;\n  }\n\n  public getRules(productId?: string): PricingRule[] {\n    if (productId) return this.rules.filter(r => r.product_id === productId);\n    return this.rules;\n  }\n\n  public addProduct(p: Product) {\n    if (!this.products.find(x => x.id === p.id)) {\n      this.products.push(p);\n      this.saveStructuredData();\n    }\n  }\n\n  public addRule(r: PricingRule) {\n    const idx = this.rules.findIndex(x => x.product_id === r.product_id && x.name === r.name && x.threshold === r.threshold);\n    if (idx >= 0) {\n      this.rules[idx] = r;\n    } else {\n      this.rules.push(r);\n    }\n    this.saveStructuredData();\n  }\n\n  /**\n   * Helper to register a list of tiers.\n   */\n  public registerTiers(prefix: string, category: string, tiers: any[]): any[] {\n    return tiers.map((tier, idx) => {\n      const id = `${prefix}-tier-${idx}`;\n      const name = tier.from !== undefined \n        ? `${tier.from}-${tier.to || '\u221E'} szt`\n        : `${tier.min}-${tier.max || '\u221E'} szt`;\n      \n      const priceKey = tier.unit !== undefined ? 'unit' : 'price';\n      const defaultValue = tier[priceKey];\n      const currentValue = this.register(id, category, name, defaultValue);\n      \n      return { ...tier, [priceKey]: currentValue };\n    });\n  }\n}\n\nexport const priceStore = PriceStore.getInstance();\n", "import { PriceTable, Tier, Rule, Modifier, CalculationResult } from \"./types\";\nimport { priceStore } from \"./price-store\";\n\nexport function findTier(tiers: Tier[], quantity: number): Tier {\n  const sorted = [...tiers].sort((a, b) => a.min - b.min);\n\n  // 1. Exact range match\n  const tier = sorted.find(\n    (t) => quantity >= t.min && (t.max === null || quantity <= t.max)\n  );\n  if (tier) return tier;\n\n  // 2. \"Point-based\" tiers fallback: find first tier where min >= quantity\n  const nextTier = sorted.find((t) => t.min >= quantity);\n  if (nextTier) return nextTier;\n\n  // 3. Last tier fallback\n  return sorted[sorted.length - 1];\n}\n\nexport function applyMinimumRule(quantity: number, rules?: Rule[]): number {\n  if (!rules) return quantity;\n\n  const m2Rule = rules.find(r => r.type === \"minimum\" && r.unit === \"m2\");\n  if (m2Rule && quantity < m2Rule.value) {\n    return m2Rule.value;\n  }\n\n  return quantity;\n}\n\nexport function calculatePrice(\n  table: PriceTable,\n  quantity: number,\n  activeModifierIds: string[] = []\n): CalculationResult {\n  const effectiveQuantity = applyMinimumRule(quantity, table.rules);\n  \n  // Dynamic pricing from PriceStore\n  const dynamicTiers = priceStore.registerTiers(table.id, table.title, table.tiers);\n  const tier = findTier(dynamicTiers, effectiveQuantity);\n\n  let basePrice = 0;\n  if (table.pricing === \"per_unit\") {\n    basePrice = effectiveQuantity * tier.price;\n  } else {\n    basePrice = tier.price;\n  }\n\n  let modifiersTotal = 0;\n  const appliedModifiers: string[] = [];\n\n  if (table.modifiers) {\n    for (const modId of activeModifierIds) {\n      const modifier = table.modifiers.find(m => m.id === modId);\n      if (modifier) {\n        appliedModifiers.push(modifier.name);\n        const modValue = priceStore.register(`${table.id}-mod-${modifier.id}`, table.title, modifier.name, modifier.value);\n        if (modifier.type === \"percent\") {\n          modifiersTotal += basePrice * modValue;\n        } else if (modifier.type === \"fixed_per_unit\") {\n          modifiersTotal += modValue * effectiveQuantity;\n        } else {\n          modifiersTotal += modValue;\n        }\n      }\n    }\n  }\n\n  let totalPrice = basePrice + modifiersTotal;\n\n  const plnRule = table.rules?.find(r => r.type === \"minimum\" && r.unit === \"pln\");\n  if (plnRule && totalPrice < plnRule.value) {\n    totalPrice = plnRule.value;\n  }\n\n  return {\n    basePrice,\n    effectiveQuantity,\n    tierPrice: tier.price,\n    modifiersTotal,\n    totalPrice: parseFloat(totalPrice.toFixed(2)),\n    appliedModifiers\n  };\n}\n\n/**\n * Universal calculation logic requested by user:\n * finalPrice = (basePrice \u00D7 multipliers) + additionalCosts\n */\nexport function calculateUniversal(\n  productId: string,\n  quantity: number,\n  options: {\n    sides?: number; // multiplier e.g. 1 or 1.8\n    multipliers?: number[]; // other multipliers\n    addons?: string[]; // IDs of addons to apply\n  }\n): CalculationResult {\n  const rules = priceStore.getRules(productId);\n  \n  // 1. Find base price for quantity (threshold logic)\n  const baseRules = rules.filter(r => r.type === \"base\").sort((a, b) => (a.threshold || 0) - (b.threshold || 0));\n  let selectedBase = baseRules[0];\n  for (const r of baseRules) {\n    if (quantity >= (r.threshold || 0)) {\n      selectedBase = r;\n    }\n  }\n\n  const baseValue = selectedBase ? selectedBase.value : 0;\n  \n  // 2. Apply multipliers\n  let combinedMultiplier = 1;\n  if (options.sides) combinedMultiplier *= options.sides;\n  if (options.multipliers) {\n    for (const m of options.multipliers) combinedMultiplier *= m;\n  }\n  \n  // Apply registered multiplier rules from store\n  const multiplierRules = rules.filter(r => r.type === \"multiplier\");\n  for (const r of multiplierRules) {\n    // If name matches something in options... (simplified for now)\n    // combinedMultiplier *= r.value;\n  }\n\n  const baseTotal = baseValue * combinedMultiplier;\n  \n  // 3. Add addons\n  let addonsTotal = 0;\n  const appliedModifiers: string[] = [];\n  const addonRules = rules.filter(r => r.type === \"addon\");\n  if (options.addons) {\n    for (const addonId of options.addons) {\n      const rule = addonRules.find(r => r.name === addonId);\n      if (rule) {\n        addonsTotal += rule.value;\n        appliedModifiers.push(rule.name);\n      }\n    }\n  }\n\n  const totalPrice = baseTotal + addonsTotal;\n\n  return {\n    basePrice: baseValue,\n    totalPrice: parseFloat(totalPrice.toFixed(2)),\n    effectiveQuantity: quantity,\n    tierPrice: baseValue / quantity, // approximate\n    modifiersTotal: totalPrice - baseTotal,\n    appliedModifiers\n  };\n}\n", "{ \"id\": \"solwent-plakaty-200g\", \"title\": \"SOLWENT - PLAKATY (Papier 200g po\u0142ysk)\", \"unit\": \"m2\", \"pricing\": \"per_unit\", \"tiers\": [ { \"min\": 0, \"max\": 3, \"price\": 70 }, { \"min\": 3, \"max\": 9, \"price\": 65 }, { \"min\": 9, \"max\": 20, \"price\": 59 }, { \"min\": 20, \"max\": 40, \"price\": 53 }, { \"min\": 40, \"max\": null, \"price\": 45 } ], \"rules\": [ { \"type\": \"minimum\", \"unit\": \"m2\", \"value\": 1 } ], \"modifiers\": [ { \"id\": \"EXPRESS\", \"type\": \"percent\", \"value\": 0.20 } ] }\n", "import { CategoryModule, CategoryContext } from \"../ui/router\";\nimport { calculatePrice } from \"../core/pricing\";\nimport { formatPLN } from \"../core/money\";\nimport plakatyData from \"../../data/normalized/solwent-plakaty-200g.json\";\nimport { PriceTable } from \"../core/types\";\n\nexport const plakatyCategory: CategoryModule = {\n  id: \"solwent-plakaty\",\n  name: \"Solwent - Plakaty\",\n  mount: (container: HTMLElement, ctx: CategoryContext) => {\n    const table = plakatyData as PriceTable;\n\n    container.innerHTML = `\n      <div class=\"category-view\">\n        <h2>${table.title}</h2>\n        <div class=\"form\" style=\"display: grid; gap: 15px;\">\n          <div class=\"row\" style=\"display: flex; justify-content: space-between; align-items: center;\">\n            <label>Powierzchnia (m2)</label>\n            <input type=\"number\" id=\"plakatyQty\" value=\"1\" min=\"0.1\" step=\"0.1\" style=\"width: 100px;\">\n          </div>\n          <div class=\"row\" style=\"display: flex; align-items: center; gap: 10px;\">\n            <input type=\"checkbox\" id=\"plakatyExpress\" style=\"width: auto;\">\n            <label for=\"plakatyExpress\">Tryb EXPRESS (+20%)</label>\n          </div>\n\n          <div class=\"divider\"></div>\n\n          <div class=\"summary-box\" style=\"background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px;\">\n            <div style=\"display: flex; justify-content: space-between;\">\n              <span>Cena:</span>\n              <strong id=\"plakatyResult\">0,00 z\u0142</strong>\n            </div>\n          </div>\n\n          <div class=\"actions\">\n            <button id=\"addPlakatyBtn\" class=\"primary\" style=\"width: 100%;\">Dodaj do zam\u00F3wienia</button>\n          </div>\n        </div>\n      </div>\n    `;\n\n    const qtyInput = container.querySelector(\"#plakatyQty\") as HTMLInputElement;\n    const expressCheck = container.querySelector(\"#plakatyExpress\") as HTMLInputElement;\n    const resultEl = container.querySelector(\"#plakatyResult\") as HTMLElement;\n    const addBtn = container.querySelector(\"#addPlakatyBtn\") as HTMLButtonElement;\n\n    function update() {\n      const qty = parseFloat(qtyInput.value) || 0;\n      const mods = expressCheck.checked ? [\"EXPRESS\"] : [];\n      try {\n        const res = calculatePrice(qty, table, mods);\n        resultEl.textContent = formatPLN(res.totalPrice);\n      } catch (e) {\n        resultEl.textContent = \"B\u0142\u0105d\";\n      }\n    }\n\n    qtyInput.addEventListener(\"input\", update);\n    expressCheck.addEventListener(\"change\", update);\n\n    addBtn.addEventListener(\"click\", () => {\n      const qty = parseFloat(qtyInput.value) || 0;\n      const mods = expressCheck.checked ? [\"EXPRESS\"] : [];\n      const res = calculatePrice(qty, table, mods);\n\n      ctx.cart.addItem({\n        categoryId: table.id,\n        categoryName: table.title,\n        details: { qty: `${qty} m2`, express: expressCheck.checked },\n        price: res.totalPrice\n      });\n    });\n\n    update();\n  }\n};\n", "import { CategoryModule } from \"../ui/router\";\nimport { priceStore } from \"../core/price-store\";\n\nconst VOUCHERY_DEFAULTS = [\n  { qty: 1, single: 20, double: 25 },\n  { qty: 2, single: 29, double: 32 },\n  { qty: 3, single: 30, double: 37 },\n  { qty: 4, single: 32, double: 39 },\n  { qty: 5, single: 35, double: 43 },\n  { qty: 6, single: 39, double: 45 },\n  { qty: 7, single: 41, double: 48 },\n  { qty: 8, single: 45, double: 50 },\n  { qty: 9, single: 48, double: 52 },\n  { qty: 10, single: 52, double: 58 },\n  { qty: 15, single: 60, double: 70 },\n  { qty: 20, single: 67, double: 82 },\n  { qty: 25, single: 74, double: 100 },\n  { qty: 30, single: 84, double: 120 }\n];\n\nfunction getVoucheryPricing() {\n  return VOUCHERY_DEFAULTS.map(tier => ({\n    qty: tier.qty,\n    single: priceStore.register(`vouchery-s-${tier.qty}`, 'Vouchery', `Jednostronne ${tier.qty} szt`, tier.single),\n    double: priceStore.register(`vouchery-d-${tier.qty}`, 'Vouchery', `Dwustronne ${tier.qty} szt`, tier.double)\n  }));\n}\n\nfunction getPriceForQuantity(qty: number, isSingle: boolean): number {\n  const pricing = getVoucheryPricing();\n  let selectedTier = pricing[0];\n\n  for (const tier of pricing) {\n    if (qty >= tier.qty) {\n      selectedTier = tier;\n    } else {\n      break;\n    }\n  }\n\n  return isSingle ? selectedTier.single : selectedTier.double;\n}\n\nexport interface VoucheryOptions {\n  qty: number;\n  sides: \"single\" | \"double\";\n  satin: boolean;\n  express: boolean;\n}\n\nexport function quoteVouchery(options: VoucheryOptions): any {\n  const basePrice = getPriceForQuantity(options.qty, options.sides === 'single');\n  let percentageSum = 0;\n\n  if (options.satin) {\n    percentageSum += priceStore.register('vouchery-mod-satin', 'Vouchery', 'Dop\u0142ata Satyna', 0.12);\n  }\n  if (options.express) {\n    percentageSum += priceStore.register('vouchery-mod-express', 'Vouchery', 'Dop\u0142ata Express', 0.20);\n  }\n\n  const modifiersTotal = basePrice * percentageSum;\n  const total = basePrice + modifiersTotal;\n\n  return {\n    basePrice,\n    modifiersTotal: parseFloat(modifiersTotal.toFixed(2)),\n    totalPrice: parseFloat(total.toFixed(2))\n  };\n}\n\nexport const voucheryCategory: CategoryModule = {\n  id: 'vouchery',\n  name: '\uD83C\uDF9F\uFE0F Vouchery',\n  mount: (container, ctx) => {\n    container.innerHTML = `\n      <div class=\"category-form\">\n        <h2>Vouchery - Druk Cyfrowy</h2>\n        <p style=\"color: #999; margin-bottom: 20px;\">\n          Kreda 200-350g. Cena zale\u017Cy od ilo\u015Bci.\n        </p>\n\n        <div class=\"form-group\">\n          <label>Format:</label>\n          <select id=\"format\">\n            <option value=\"A4\">A4</option>\n            <option value=\"DL\">DL</option>\n          </select>\n        </div>\n\n        <div class=\"form-group\">\n          <label>Ilo\u015B\u0107 sztuk:</label>\n          <input type=\"number\" id=\"quantity\" value=\"1\" min=\"1\" max=\"100\">\n        </div>\n\n        <div class=\"form-group\">\n          <label>Druk:</label>\n          <select id=\"sides\">\n            <option value=\"single\">Jednostronny</option>\n            <option value=\"double\">Dwustronny</option>\n          </select>\n        </div>\n\n        <div class=\"form-group\">\n          <label>Papier:</label>\n          <select id=\"paper\">\n            <option value=\"standard\">Standardowy (kreda)</option>\n            <option value=\"satin\">Satynowy (+12%)</option>\n          </select>\n        </div>\n\n        <div style=\"padding: 15px; background: #2a2a2a; border-radius: 8px; margin: 20px 0;\">\n          <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n            <span style=\"color: #999;\">Cena ca\u0142kowita:</span>\n            <strong id=\"total-price\" style=\"font-size: 24px; color: #667eea;\">0.00 z\u0142</strong>\n          </div>\n          <p id=\"price-breakdown\" style=\"color: #666; font-size: 12px; margin: 10px 0 0 0;\"></p>\n        </div>\n\n        <div style=\"display: flex; gap: 10px;\">\n          <button id=\"calculate\" class=\"btn-primary\" style=\"flex: 1;\">Oblicz cen\u0119</button>\n          <button id=\"addToBasket\" class=\"btn-success\" style=\"flex: 1;\">Dodaj do listy</button>\n        </div>\n      </div>\n    `;\n\n    let currentPrice = 0;\n\n    const calculateBtn = container.querySelector('#calculate');\n    const addBtn = container.querySelector('#addToBasket');\n    const totalDisplay = container.querySelector('#total-price');\n    const breakdownDisplay = container.querySelector('#price-breakdown');\n\n    calculateBtn?.addEventListener('click', () => {\n      const format = (container.querySelector('#format') as HTMLSelectElement).value;\n      const quantity = parseInt((container.querySelector('#quantity') as HTMLInputElement).value) || 1;\n      const sides = (container.querySelector('#sides') as HTMLSelectElement).value;\n      const paper = (container.querySelector('#paper') as HTMLSelectElement).value;\n\n      const basePrice = getPriceForQuantity(quantity, sides === 'single');\n      const satinMod = priceStore.register('vouchery-mod-satin', 'Vouchery', 'Dop\u0142ata Satyna', 0.12);\n      const expressMod = priceStore.register('vouchery-mod-express', 'Vouchery', 'Dop\u0142ata Express', 0.20);\n      \n      const paperMultiplier = paper === 'satin' ? (1 + satinMod) : 1;\n      const expressMultiplier = ctx.expressMode ? (1 + expressMod) : 1;\n\n      currentPrice = basePrice * paperMultiplier * expressMultiplier;\n\n      if (totalDisplay) {\n        totalDisplay.textContent = currentPrice.toFixed(2) + ' z\u0142';\n      }\n\n      if (breakdownDisplay) {\n        let tierInfo = VOUCHERY_PRICING[0];\n        for (const tier of VOUCHERY_PRICING) {\n          if (quantity >= tier.qty) {\n            tierInfo = tier;\n          } else {\n            break;\n          }\n        }\n        breakdownDisplay.textContent = 'Podstawa: ' + basePrice.toFixed(2) + ' z\u0142 za ' + quantity + ' szt (przedzia\u0142: ' + tierInfo.qty + '+ szt)';\n      }\n\n      ctx.updateLastCalculated(currentPrice, 'Vouchery ' + format + ' ' + (sides === 'single' ? 'jednostronne' : 'dwustronne') + ' - ' + quantity + ' szt');\n    });\n\n    addBtn?.addEventListener('click', () => {\n      if (currentPrice === 0) {\n        alert('\u26A0\uFE0F Najpierw oblicz cen\u0119!');\n        return;\n      }\n\n      const format = (container.querySelector('#format') as HTMLSelectElement).value;\n      const quantity = (container.querySelector('#quantity') as HTMLInputElement).value;\n      const sides = (container.querySelector('#sides') as HTMLSelectElement).value;\n      const paper = (container.querySelector('#paper') as HTMLSelectElement).value;\n\n      ctx.addToBasket({\n        category: 'Vouchery',\n        price: currentPrice,\n        description: format + ' ' + (sides === 'single' ? 'jednostronne' : 'dwustronne') + ', ' + quantity + ' szt, ' + (paper === 'satin' ? 'satyna' : 'standard')\n      });\n\n      alert('\u2705 Dodano: ' + currentPrice.toFixed(2) + ' z\u0142');\n    });\n  }\n};\n", "import { CategoryModule } from \"../ui/router\";\nimport { priceStore } from \"../core/price-store\";\n\nconst DEFAULT_DYPLOMY_PRICING = [\n  { qty: 1, price: 20 },\n  { qty: 2, price: 30 },\n  { qty: 3, price: 32 },\n  { qty: 4, price: 34 },\n  { qty: 5, price: 35 },\n  { qty: 6, price: 35 },\n  { qty: 7, price: 36 },\n  { qty: 8, price: 37 },\n  { qty: 9, price: 39 },\n  { qty: 10, price: 40 },\n  { qty: 15, price: 45 },\n  { qty: 20, price: 49 },\n  { qty: 30, price: 58 },\n  { qty: 40, price: 65 },\n  { qty: 50, price: 75 },\n  { qty: 100, price: 120 }\n];\n\nfunction getPriceForQuantity(qty: number): number {\n  const tiers = priceStore.registerTiers('dyplomy', 'Dyplomy', DEFAULT_DYPLOMY_PRICING.map(t => ({ min: t.qty, max: null, price: t.price })));\n  \n  let selectedTier = tiers[0];\n  for (const tier of tiers) {\n    if (qty >= tier.min) {\n      selectedTier = tier;\n    } else {\n      break;\n    }\n  }\n\n  return selectedTier.price;\n}\n\n/**\n * @deprecated Use dyplomyCategory module instead.\n * Kept for compatibility with tests.\n */\nexport function calculateDyplomy(options: { qty: number; sides?: number; isSatin: boolean; express: boolean }) {\n  const basePrice = getPriceForQuantity(options.qty);\n  let percentageSum = 0;\n\n  if (options.isSatin) {\n    percentageSum += 0.12;\n  }\n  if (options.express) {\n    percentageSum += 0.20;\n  }\n\n  const modifiersTotal = basePrice * percentageSum;\n  const totalPrice = basePrice + modifiersTotal;\n\n  return {\n    basePrice,\n    modifiersTotal,\n    totalPrice: Math.round(totalPrice * 100) / 100\n  };\n}\n\nexport const dyplomyCategory: CategoryModule = {\n  id: 'dyplomy',\n  name: '\uD83C\uDF93 Dyplomy',\n  mount: (container, ctx) => {\n    container.innerHTML = `\n      <div class=\"category-form\">\n        <h2>Dyplomy - Druk Cyfrowy</h2>\n        <p style=\"color: #999; margin-bottom: 20px;\">\n          Kreda 200-300g. Format DL dwustronny. Cena zale\u017Cy od ilo\u015Bci.\n        </p>\n\n        <div class=\"form-group\">\n          <label>Format:</label>\n          <select id=\"format\">\n            <option value=\"DL\">DL (99\u00D7210 mm) - dwustronny</option>\n          </select>\n        </div>\n\n        <div class=\"form-group\">\n          <label>Ilo\u015B\u0107 sztuk:</label>\n          <input type=\"number\" id=\"quantity\" value=\"1\" min=\"1\" max=\"200\">\n        </div>\n\n        <div class=\"form-group\">\n          <label>Gramatura papieru:</label>\n          <select id=\"gramature\">\n            <option value=\"1.0\">120g</option>\n            <option value=\"1.1\">160g (+10%)</option>\n            <option value=\"1.2\">200g (+20%)</option>\n            <option value=\"1.3\">250g (+30%)</option>\n            <option value=\"1.4\">300g (+40%)</option>\n            <option value=\"1.6\">350g (+60%)</option>\n          </select>\n        </div>\n\n        <div class=\"form-group\">\n          <label>Wyko\u0144czenie:</label>\n          <select id=\"finish\">\n            <option value=\"1.0\">Mat</option>\n            <option value=\"1.15\">Po\u0142ysk (+15%)</option>\n          </select>\n        </div>\n\n        <div id=\"price-tiers\" style=\"background: #1a1a1a; padding: 15px; border-radius: 8px; margin: 20px 0;\">\n          <h4 style=\"color: #667eea; margin: 0 0 10px 0;\">Przedzia\u0142y cenowe:</h4>\n          <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 5px; font-size: 13px; color: #ccc;\">\n            <div>1 szt \u2192 20 z\u0142</div><div>2 szt \u2192 30 z\u0142</div>\n            <div>5 szt \u2192 35 z\u0142</div><div>10 szt \u2192 40 z\u0142</div>\n            <div>20 szt \u2192 49 z\u0142</div><div>30 szt \u2192 58 z\u0142</div>\n            <div>50 szt \u2192 75 z\u0142</div><div>100 szt \u2192 120 z\u0142</div>\n          </div>\n        </div>\n\n        <div style=\"padding: 15px; background: #2a2a2a; border-radius: 8px; margin: 20px 0;\">\n          <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n            <span style=\"color: #999;\">Cena ca\u0142kowita:</span>\n            <strong id=\"total-price\" style=\"font-size: 24px; color: #667eea;\">0.00 z\u0142</strong>\n          </div>\n          <p id=\"price-breakdown\" style=\"color: #666; font-size: 12px; margin: 10px 0 0 0;\"></p>\n        </div>\n\n        <div style=\"display: flex; gap: 10px;\">\n          <button id=\"calculate\" class=\"btn-primary\" style=\"flex: 1;\">Oblicz cen\u0119</button>\n          <button id=\"addToBasket\" class=\"btn-success\" style=\"flex: 1;\">Dodaj do listy</button>\n        </div>\n      </div>\n    `;\n\n    let currentPrice = 0;\n\n    const calculateBtn = container.querySelector('#calculate');\n    const addBtn = container.querySelector('#addToBasket');\n    const totalDisplay = container.querySelector('#total-price');\n    const breakdownDisplay = container.querySelector('#price-breakdown');\n\n    calculateBtn?.addEventListener('click', () => {\n      const quantity = parseInt((container.querySelector('#quantity') as HTMLInputElement).value) || 1;\n      const gramMod = parseFloat((container.querySelector('#gramature') as HTMLSelectElement).value);\n      const finishMod = parseFloat((container.querySelector('#finish') as HTMLSelectElement).value);\n\n      const basePrice = getPriceForQuantity(quantity);\n      \n      let percentageSum = (gramMod - 1) + (finishMod - 1);\n      if (ctx.expressMode) percentageSum += 0.20;\n\n      currentPrice = basePrice * (1 + percentageSum);\n\n      if (totalDisplay) {\n        totalDisplay.textContent = `${currentPrice.toFixed(2)} z\u0142`;\n      }\n\n      if (breakdownDisplay) {\n        const tiers = priceStore.registerTiers('dyplomy', 'Dyplomy', DEFAULT_DYPLOMY_PRICING.map(t => ({ min: t.qty, max: null, price: t.price })));\n        let selectedTier = tiers[0];\n        for (const tier of tiers) {\n          if (quantity >= tier.min) {\n            selectedTier = tier;\n          } else {\n            break;\n          }\n        }\n        breakdownDisplay.textContent = `${quantity} szt, baza: ${basePrice.toFixed(2)} z\u0142 \u00D7 ${gramMod} (gramatura) \u00D7 ${finishMod} (wyko\u0144czenie)`;\n      }\n\n      ctx.updateLastCalculated(currentPrice, `Dyplomy DL - ${quantity} szt`);\n    });\n\n    addBtn?.addEventListener('click', () => {\n      if (currentPrice === 0) {\n        alert('\u26A0\uFE0F Najpierw oblicz cen\u0119!');\n        return;\n      }\n\n      const quantity = (container.querySelector('#quantity') as HTMLInputElement).value;\n      const gramature = (container.querySelector('#gramature') as HTMLSelectElement).options[(container.querySelector('#gramature') as HTMLSelectElement).selectedIndex].text;\n      const finish = (container.querySelector('#finish') as HTMLSelectElement).options[(container.querySelector('#finish') as HTMLSelectElement).selectedIndex].text;\n\n      ctx.addToBasket({\n        category: 'Dyplomy',\n        price: currentPrice,\n        description: `DL dwustronny, ${quantity} szt, ${gramature}, ${finish}`\n      });\n\n      alert(`\u2705 Dodano: ${currentPrice.toFixed(2)} z\u0142`);\n    });\n  }\n};\n", "import { CategoryModule } from \"../ui/router\";\nimport { priceStore } from \"../core/price-store\";\n\nconst DEFAULT_WIZYTOWKI_PRICING = {\n  '85x55': [\n    { qty: 50, plain: 65, foil: 160 },\n    { qty: 100, plain: 75, foil: 170 },\n    { qty: 150, plain: 85, foil: 180 },\n    { qty: 200, plain: 96, foil: 190 },\n    { qty: 250, plain: 110, foil: 200 },\n    { qty: 300, plain: 126, foil: 220 },\n    { qty: 400, plain: 146, foil: 240 },\n    { qty: 500, plain: 170, foil: 250 },\n    { qty: 1000, plain: 290, foil: 335 }\n  ],\n  '90x50': [\n    { qty: 50, plain: 70, foil: 170 },\n    { qty: 100, plain: 79, foil: 180 },\n    { qty: 150, plain: 89, foil: 190 },\n    { qty: 200, plain: 99, foil: 200 },\n    { qty: 250, plain: 120, foil: 210 },\n    { qty: 300, plain: 129, foil: 230 },\n    { qty: 400, plain: 149, foil: 250 },\n    { qty: 500, plain: 175, foil: 260 },\n    { qty: 1000, plain: 300, foil: 345 }\n  ]\n};\n\nfunction getPriceForQuantity(format: '85x55' | '90x50', qty: number, foiled: boolean): number {\n  const defaultTiers = DEFAULT_WIZYTOWKI_PRICING[format];\n  const type = foiled ? 'foil' : 'plain';\n  \n  const tiers = priceStore.registerTiers(`wizytowki-${format}-${type}`, `Wizyt\u00F3wki ${format} ${type}`, defaultTiers.map(t => ({ min: t.qty, max: null, price: foiled ? t.foil : t.plain })));\n  \n  let selectedTier = tiers[0];\n  for (const tier of tiers) {\n    if (qty >= tier.min) {\n      selectedTier = tier;\n    } else {\n      break;\n    }\n  }\n\n  return selectedTier.price;\n}\n\n/**\n * @deprecated Use wizytowkiCategory module instead.\n * Kept for compatibility with tests.\n */\nexport function quoteWizytowki(options: { format: '85x55' | '90x50'; qty: number; folia: 'none' | 'matt_gloss'; express: boolean }) {\n  const basePrice = getPriceForQuantity(options.format, options.qty, options.folia === 'matt_gloss');\n  let totalPrice = basePrice;\n  if (options.express) {\n    totalPrice *= 1.2;\n  }\n\n  return {\n    totalPrice: parseFloat(totalPrice.toFixed(2)),\n    basePrice\n  };\n}\n\nexport const wizytowkiCategory: CategoryModule = {\n  id: 'wizytowki-druk-cyfrowy',\n  name: '\uD83D\uDCBC Wizyt\u00F3wki',\n  mount: (container, ctx) => {\n    container.innerHTML = `\n      <div class=\"category-form\">\n        <h2>Wizyt\u00F3wki - Druk Cyfrowy</h2>\n        <p style=\"color: #999; margin-bottom: 20px;\">\n          Kreda mat 350g. Czas realizacji: 4-5 dni roboczych.\n        </p>\n\n        <div class=\"form-group\">\n          <label>Format:</label>\n          <select id=\"format\">\n            <option value=\"85x55\">85\u00D755 mm (standardowy)</option>\n            <option value=\"90x50\">90\u00D750 mm</option>\n          </select>\n        </div>\n\n        <div class=\"form-group\">\n          <label>Ilo\u015B\u0107 sztuk:</label>\n          <select id=\"quantity\">\n            <option value=\"50\">50 szt</option>\n            <option value=\"100\">100 szt</option>\n            <option value=\"150\">150 szt</option>\n            <option value=\"200\">200 szt</option>\n            <option value=\"250\">250 szt</option>\n            <option value=\"300\">300 szt</option>\n            <option value=\"400\">400 szt</option>\n            <option value=\"500\">500 szt</option>\n            <option value=\"1000\">1000 szt</option>\n          </select>\n        </div>\n\n        <div class=\"form-group\">\n          <label>Gramatura papieru:</label>\n          <select id=\"gramature\">\n            <option value=\"1.0\">120g</option>\n            <option value=\"1.1\">160g (+10%)</option>\n            <option value=\"1.2\">200g (+20%)</option>\n            <option value=\"1.3\">250g (+30%)</option>\n            <option value=\"1.4\">300g (+40%)</option>\n            <option value=\"1.6\" selected>350g (+60%)</option>\n          </select>\n        </div>\n\n        <div class=\"form-group\">\n          <label>Wyko\u0144czenie:</label>\n          <select id=\"finish\">\n            <option value=\"1.0\">Mat</option>\n            <option value=\"1.15\">Po\u0142ysk (+15%)</option>\n            <option value=\"foil\">Z foli\u0105 mat/b\u0142ysk (sta\u0142a cena)</option>\n          </select>\n        </div>\n\n        <div style=\"padding: 15px; background: #2a2a2a; border-radius: 8px; margin: 20px 0;\">\n          <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n            <span style=\"color: #999;\">Cena ca\u0142kowita:</span>\n            <strong id=\"total-price\" style=\"font-size: 24px; color: #667eea;\">0.00 z\u0142</strong>\n          </div>\n          <p id=\"price-breakdown\" style=\"color: #666; font-size: 12px; margin: 10px 0 0 0;\"></p>\n        </div>\n\n        <div style=\"display: flex; gap: 10px;\">\n          <button id=\"calculate\" class=\"btn-primary\" style=\"flex: 1;\">Oblicz cen\u0119</button>\n          <button id=\"addToBasket\" class=\"btn-success\" style=\"flex: 1;\">Dodaj do listy</button>\n        </div>\n      </div>\n    `;\n\n    let currentPrice = 0;\n\n    const calculateBtn = container.querySelector('#calculate');\n    const addBtn = container.querySelector('#addToBasket');\n    const totalDisplay = container.querySelector('#total-price');\n    const breakdownDisplay = container.querySelector('#price-breakdown');\n\n    calculateBtn?.addEventListener('click', () => {\n      const format = (container.querySelector('#format') as HTMLSelectElement).value as '85x55' | '90x50';\n      const quantity = parseInt((container.querySelector('#quantity') as HTMLSelectElement).value);\n      const finish = (container.querySelector('#finish') as HTMLSelectElement).value;\n      const gramMod = parseFloat((container.querySelector('#gramature') as HTMLSelectElement).value);\n\n      if (finish === 'foil') {\n        currentPrice = getPriceForQuantity(format, quantity, true);\n        if (ctx.expressMode) currentPrice *= 1.2;\n      } else {\n        const finishMod = parseFloat(finish);\n        const basePrice = getPriceForQuantity(format, quantity, false);\n        \n        let percentageSum = (gramMod - 1) + (finishMod - 1);\n        if (ctx.expressMode) percentageSum += 0.20;\n        \n        currentPrice = basePrice * (1 + percentageSum);\n      }\n\n      if (totalDisplay) {\n        totalDisplay.textContent = `${currentPrice.toFixed(2)} z\u0142`;\n      }\n\n      if (breakdownDisplay) {\n        breakdownDisplay.textContent = `Format ${format} mm, ${quantity} szt, ${finish === 'foil' ? 'z foli\u0105' : 'wyko\u0144czenie: ' + finish}`;\n      }\n\n      ctx.updateLastCalculated(currentPrice, `Wizyt\u00F3wki ${format} - ${quantity} szt`);\n    });\n\n    addBtn?.addEventListener('click', () => {\n      if (currentPrice === 0) {\n        alert('\u26A0\uFE0F Najpierw oblicz cen\u0119!');\n        return;\n      }\n\n      const format = (container.querySelector('#format') as HTMLSelectElement).value;\n      const quantity = (container.querySelector('#quantity') as HTMLSelectElement).value;\n      const finishText = (container.querySelector('#finish') as HTMLSelectElement).options[(container.querySelector('#finish') as HTMLSelectElement).selectedIndex].text;\n      const gramText = (container.querySelector('#gramature') as HTMLSelectElement).options[(container.querySelector('#gramature') as HTMLSelectElement).selectedIndex].text;\n\n      ctx.addToBasket({\n        category: 'Wizyt\u00F3wki',\n        price: currentPrice,\n        description: `${format} mm, ${quantity} szt, ${gramText}, ${finishText}`\n      });\n\n      alert(`\u2705 Dodano: ${currentPrice.toFixed(2)} z\u0142`);\n    });\n  }\n};\n", "{\n  \"name\": \"Zaproszenia KREDA - druk cyfrowy\",\n  \"modifiers\": {\n    \"satin\": 0.12,\n    \"express\": 0.20\n  },\n  \"formats\": {\n    \"A6\": {\n      \"name\": \"A6 (105x148mm)\",\n      \"single\": {\n        \"normal\": { \"10\": 30, \"24\": 40, \"32\": 45, \"50\": 50, \"75\": 60, \"100\": 68, \"150\": 79 },\n        \"folded\": { \"10\": 45, \"24\": 55, \"32\": 60, \"50\": 71, \"75\": 84, \"100\": 99, \"150\": 126 }\n      },\n      \"double\": {\n        \"normal\": { \"10\": 35, \"24\": 46, \"32\": 57, \"50\": 66, \"75\": 79, \"100\": 89, \"150\": 115 },\n        \"folded\": { \"10\": 58, \"24\": 66, \"32\": 84, \"50\": 105, \"75\": 125, \"100\": 149, \"150\": 199 }\n      }\n    },\n    \"A5\": {\n      \"name\": \"A5 (148x210mm)\",\n      \"single\": {\n        \"normal\": { \"10\": 34, \"24\": 42, \"32\": 48, \"50\": 55, \"75\": 63, \"100\": 79, \"150\": 110 },\n        \"folded\": { \"10\": 55, \"24\": 60, \"32\": 75, \"50\": 95, \"75\": 125, \"100\": 150, \"150\": 199 }\n      },\n      \"double\": {\n        \"normal\": { \"10\": 40, \"24\": 49, \"32\": 62, \"50\": 79, \"75\": 96, \"100\": 119, \"150\": 169 },\n        \"folded\": { \"10\": 65, \"24\": 80, \"32\": 115, \"50\": 149, \"75\": 190, \"100\": 235, \"150\": 325 }\n      }\n    },\n    \"DL\": {\n      \"name\": \"DL (99x210mm)\",\n      \"single\": {\n        \"normal\": { \"10\": 35, \"24\": 50, \"32\": 53, \"50\": 59, \"75\": 70, \"100\": 81, \"150\": 105 },\n        \"folded\": { \"10\": 45, \"24\": 55, \"32\": 63, \"50\": 79, \"75\": 97, \"100\": 115, \"150\": 149 }\n      },\n      \"double\": {\n        \"normal\": { \"10\": 41, \"24\": 55, \"32\": 64, \"50\": 74, \"75\": 88, \"100\": 105, \"150\": 135 },\n        \"folded\": { \"10\": 65, \"24\": 80, \"32\": 90, \"50\": 115, \"75\": 150, \"100\": 185, \"150\": 245 }\n      }\n    }\n  }\n}\n", "import { CalculationResult, Modifier } from \"../core/types\";\nimport data from \"../../data/normalized/zaproszenia-kreda.json\";\nimport { priceStore } from \"../core/price-store\";\n\nexport interface ZaproszeniaKredaOptions {\n  format: string; // \"A6\", \"A5\", \"DL\"\n  qty: number;\n  sides: number; // 1 or 2\n  isFolded: boolean;\n  gramMod: number;\n  finishMod: number;\n  express: boolean;\n}\n\nexport function calculateZaproszeniaKreda(options: ZaproszeniaKredaOptions): CalculationResult {\n  const { format, qty, sides, isFolded, gramMod, finishMod, express } = options;\n\n  const formatData = (data.formats as any)[format];\n  if (!formatData) {\n    throw new Error(`Invalid format: ${format}`);\n  }\n\n  const sidesKey = sides === 1 ? \"single\" : \"double\";\n  const typeKey = isFolded ? \"folded\" : \"normal\";\n  const priceTable = formatData[sidesKey][typeKey];\n\n  // Tier selection\n  const sortedTiers = Object.keys(priceTable)\n    .map(Number)\n    .sort((a, b) => a - b);\n\n  let selectedTier = sortedTiers[0];\n  for (const tier of sortedTiers) {\n    if (qty >= tier) {\n      selectedTier = tier;\n    }\n  }\n\n  const rawBasePrice = priceTable[selectedTier.toString()];\n  // Register in PriceStore\n  const ps = priceStore;\n  const priceId = `zap-${format}-${sidesKey}-${typeKey}-${selectedTier}`;\n  const priceName = `Zaproszenia ${format} ${sidesKey === 'single' ? '1s' : '2s'} ${typeKey === 'folded' ? 'sk\u0142' : 'norm'} (od ${selectedTier}szt)`;\n  const basePrice = ps.register(priceId, \"Zaproszenia\", priceName, rawBasePrice);\n\n  const modifiers: Modifier[] = [];\n  if (gramMod > 1) {\n    modifiers.push({\n      id: \"gramature\",\n      name: `Gramatura (${Math.round((gramMod-1)*100)}%)`,\n      type: \"percentage\",\n      value: gramMod - 1\n    });\n  }\n  if (finishMod > 1) {\n    modifiers.push({\n      id: \"finish\",\n      name: \"Wyko\u0144czenie po\u0142ysk (+15%)\",\n      type: \"percentage\",\n      value: 0.15\n    });\n  }\n  if (express) {\n    modifiers.push({\n      id: \"express\",\n      name: \"EXPRESS (+20%)\",\n      type: \"percentage\",\n      value: ps.register(\"global-express\", \"Global\", \"Express (+%)\", 0.20)\n    });\n  }\n\n  let modifiersTotal = 0;\n  const appliedModifiers: string[] = [];\n\n  for (const mod of modifiers) {\n    if (mod.type === \"percent\" || (mod.type as any) === \"percentage\") {\n      modifiersTotal += basePrice * mod.value;\n      appliedModifiers.push(mod.name);\n    }\n  }\n\n  const totalPrice = basePrice + modifiersTotal;\n\n  return {\n    basePrice,\n    effectiveQuantity: qty,\n    tierPrice: basePrice / qty,\n    modifiersTotal,\n    totalPrice: Math.round(totalPrice * 100) / 100,\n    appliedModifiers\n  };\n}\n", "import { View, ViewContext } from \"../types\";\nimport { calculateZaproszeniaKreda, ZaproszeniaKredaOptions } from \"../../categories/zaproszenia-kreda\";\nimport { formatPLN } from \"../../core/money\";\n\nexport const ZaproszeniaKredaView: View = {\n  id: \"zaproszenia-kreda\",\n  name: \"Zaproszenia KREDA\",\n  async mount(container, ctx) {\n    const response = await fetch(\"categories/zaproszenia-kreda.html\");\n    container.innerHTML = await response.text();\n\n    const formatSel = container.querySelector(\"#zapFormat\") as HTMLSelectElement;\n    const sidesSel = container.querySelector(\"#zapSides\") as HTMLSelectElement;\n    const foldedCheck = container.querySelector(\"#zapFolded\") as HTMLInputElement;\n    const qtyInput = container.querySelector(\"#zapQty\") as HTMLInputElement;\n    const gramSel = container.querySelector(\"#zapGramature\") as HTMLSelectElement;\n    const finishSel = container.querySelector(\"#zapFinish\") as HTMLSelectElement;\n    const calcBtn = container.querySelector(\"#calcBtn\") as HTMLButtonElement;\n    const addToCartBtn = container.querySelector(\"#addToCartBtn\") as HTMLButtonElement;\n    const resultArea = container.querySelector(\"#zapResult\") as HTMLElement;\n\n    const calculate = () => {\n      const options: ZaproszeniaKredaOptions = {\n        format: formatSel.value,\n        qty: parseInt(qtyInput.value) || 10,\n        sides: parseInt(sidesSel.value) || 1,\n        isFolded: foldedCheck.checked,\n        gramMod: parseFloat(gramSel.value),\n        finishMod: parseFloat(finishSel.value),\n        express: ctx.expressMode\n      };\n\n      const result = calculateZaproszeniaKreda(options);\n\n      resultArea.style.display = \"block\";\n      (container.querySelector(\"#resUnitPrice\") as HTMLElement).textContent = formatPLN(result.totalPrice / options.qty);\n      (container.querySelector(\"#resTotalPrice\") as HTMLElement).textContent = formatPLN(result.totalPrice);\n      (container.querySelector(\"#resExpressHint\") as HTMLElement).style.display = options.express ? \"block\" : \"none\";\n      (container.querySelector(\"#resFinishHint\") as HTMLElement).style.display = options.finishMod > 1 ? \"block\" : \"none\";\n\n      ctx.updateLastCalculated(result.totalPrice, \"Zaproszenia\");\n      return { options, result };\n    };\n\n    calcBtn.addEventListener(\"click\", () => calculate());\n\n    addToCartBtn.addEventListener(\"click\", () => {\n      const { options, result } = calculate();\n\n      ctx.cart.addItem({\n        id: `zap-${Date.now()}`,\n        category: \"Zaproszenia Kreda\",\n        name: `Zaproszenia ${options.format} ${options.sides === 1 ? '1-str' : '2-str'}${options.isFolded ? ' sk\u0142adane' : ''}`,\n        quantity: options.qty,\n        unit: \"szt\",\n        unitPrice: result.totalPrice / options.qty,\n        isExpress: options.express,\n        totalPrice: result.totalPrice,\n        optionsHint: `${options.qty} szt, ${gramSel.options[gramSel.selectedIndex].text}, ${finishSel.options[finishSel.selectedIndex].text}`,\n        payload: options\n      });\n    });\n\n    // Initial calculation\n    calculate();\n  }\n};\n", "{\n  \"name\": \"Ulotki \u2013 cyfrowe\",\n  \"jednostronne\": {\n    \"A6\": {\n      \"name\": \"A6 (105x148)\",\n      \"tiers\": [\n        { \"min\": 10, \"max\": 10, \"price\": 30.0 },\n        { \"min\": 20, \"max\": 20, \"price\": 35.0 },\n        { \"min\": 30, \"max\": 30, \"price\": 40.0 },\n        { \"min\": 40, \"max\": 40, \"price\": 45.0 },\n        { \"min\": 50, \"max\": 50, \"price\": 55.0 },\n        { \"min\": 60, \"max\": 60, \"price\": 61.0 },\n        { \"min\": 70, \"max\": 70, \"price\": 65.0 },\n        { \"min\": 80, \"max\": 80, \"price\": 70.0 },\n        { \"min\": 90, \"max\": 90, \"price\": 75.0 },\n        { \"min\": 100, \"max\": 100, \"price\": 79.0 },\n        { \"min\": 150, \"max\": 150, \"price\": 90.0 },\n        { \"min\": 200, \"max\": 200, \"price\": 110.0 },\n        { \"min\": 300, \"max\": 300, \"price\": 145.0 },\n        { \"min\": 400, \"max\": 400, \"price\": 160.0 },\n        { \"min\": 500, \"max\": 500, \"price\": 190.0 },\n        { \"min\": 700, \"max\": 700, \"price\": 255.0 },\n        { \"min\": 1000, \"max\": 1000, \"price\": 320.0 }\n      ]\n    },\n    \"A5\": {\n      \"name\": \"A5 (148 x 210)\",\n      \"tiers\": [\n        { \"min\": 10, \"max\": 10, \"price\": 35.0 },\n        { \"min\": 20, \"max\": 20, \"price\": 42.0 },\n        { \"min\": 30, \"max\": 30, \"price\": 50.0 },\n        { \"min\": 40, \"max\": 40, \"price\": 59.0 },\n        { \"min\": 50, \"max\": 50, \"price\": 69.0 },\n        { \"min\": 60, \"max\": 60, \"price\": 75.0 },\n        { \"min\": 70, \"max\": 70, \"price\": 82.0 },\n        { \"min\": 80, \"max\": 80, \"price\": 88.0 },\n        { \"min\": 90, \"max\": 90, \"price\": 93.0 },\n        { \"min\": 100, \"max\": 100, \"price\": 95.0 },\n        { \"min\": 150, \"max\": 150, \"price\": 130.0 },\n        { \"min\": 200, \"max\": 200, \"price\": 150.0 },\n        { \"min\": 300, \"max\": 300, \"price\": 210.0 },\n        { \"min\": 400, \"max\": 400, \"price\": 259.0 },\n        { \"min\": 500, \"max\": 500, \"price\": 300.0 },\n        { \"min\": 700, \"max\": 700, \"price\": 410.0 },\n        { \"min\": 1000, \"max\": 1000, \"price\": 530.0 }\n      ]\n    },\n    \"DL\": {\n      \"name\": \"DL (99 x 210)\",\n      \"tiers\": [\n        { \"min\": 10, \"max\": 10, \"price\": 30.0 },\n        { \"min\": 20, \"max\": 20, \"price\": 35.0 },\n        { \"min\": 30, \"max\": 30, \"price\": 40.0 },\n        { \"min\": 40, \"max\": 40, \"price\": 45.0 },\n        { \"min\": 50, \"max\": 50, \"price\": 55.0 },\n        { \"min\": 60, \"max\": 60, \"price\": 60.0 },\n        { \"min\": 70, \"max\": 70, \"price\": 65.0 },\n        { \"min\": 80, \"max\": 80, \"price\": 70.0 },\n        { \"min\": 90, \"max\": 90, \"price\": 75.0 },\n        { \"min\": 100, \"max\": 100, \"price\": 83.0 },\n        { \"min\": 150, \"max\": 150, \"price\": 100.0 },\n        { \"min\": 200, \"max\": 200, \"price\": 120.0 },\n        { \"min\": 300, \"max\": 300, \"price\": 160.0 },\n        { \"min\": 400, \"max\": 400, \"price\": 199.0 },\n        { \"min\": 500, \"max\": 500, \"price\": 230.0 },\n        { \"min\": 700, \"max\": 700, \"price\": 310.0 },\n        { \"min\": 1000, \"max\": 1000, \"price\": 399.0 }\n      ]\n    }\n  },\n  \"dwustronne\": {\n    \"A6\": {\n      \"name\": \"A6 (105x148)\",\n      \"tiers\": [\n        { \"min\": 10, \"max\": 10, \"price\": 40.0 },\n        { \"min\": 20, \"max\": 20, \"price\": 47.0 },\n        { \"min\": 30, \"max\": 30, \"price\": 49.0 },\n        { \"min\": 40, \"max\": 40, \"price\": 55.0 },\n        { \"min\": 50, \"max\": 50, \"price\": 60.0 },\n        { \"min\": 60, \"max\": 60, \"price\": 65.0 },\n        { \"min\": 70, \"max\": 70, \"price\": 70.0 },\n        { \"min\": 80, \"max\": 80, \"price\": 75.0 },\n        { \"min\": 90, \"max\": 90, \"price\": 90.0 },\n        { \"min\": 100, \"max\": 100, \"price\": 95.0 },\n        { \"min\": 150, \"max\": 150, \"price\": 120.0 },\n        { \"min\": 200, \"max\": 200, \"price\": 140.0 },\n        { \"min\": 300, \"max\": 300, \"price\": 190.0 },\n        { \"min\": 400, \"max\": 400, \"price\": 230.0 },\n        { \"min\": 500, \"max\": 500, \"price\": 270.0 },\n        { \"min\": 700, \"max\": 700, \"price\": 365.0 },\n        { \"min\": 1000, \"max\": 1000, \"price\": 476.0 }\n      ]\n    },\n    \"A5\": {\n      \"name\": \"A5 (148 x 210)\",\n      \"tiers\": [\n        { \"min\": 10, \"max\": 10, \"price\": 45.0 },\n        { \"min\": 20, \"max\": 20, \"price\": 55.0 },\n        { \"min\": 30, \"max\": 30, \"price\": 60.0 },\n        { \"min\": 40, \"max\": 40, \"price\": 72.0 },\n        { \"min\": 50, \"max\": 50, \"price\": 90.0 },\n        { \"min\": 60, \"max\": 60, \"price\": 99.0 },\n        { \"min\": 70, \"max\": 70, \"price\": 112.0 },\n        { \"min\": 80, \"max\": 80, \"price\": 122.0 },\n        { \"min\": 90, \"max\": 90, \"price\": 130.0 },\n        { \"min\": 100, \"max\": 100, \"price\": 140.0 },\n        { \"min\": 150, \"max\": 150, \"price\": 180.0 },\n        { \"min\": 200, \"max\": 200, \"price\": 220.0 },\n        { \"min\": 300, \"max\": 300, \"price\": 310.0 },\n        { \"min\": 400, \"max\": 400, \"price\": 390.0 },\n        { \"min\": 500, \"max\": 500, \"price\": 460.0 },\n        { \"min\": 700, \"max\": 700, \"price\": 620.0 },\n        { \"min\": 1000, \"max\": 1000, \"price\": 790.0 }\n      ]\n    },\n    \"DL\": {\n      \"name\": \"DL (99 x 210)\",\n      \"tiers\": [\n        { \"min\": 10, \"max\": 10, \"price\": 40.0 },\n        { \"min\": 20, \"max\": 20, \"price\": 50.0 },\n        { \"min\": 30, \"max\": 30, \"price\": 55.0 },\n        { \"min\": 40, \"max\": 40, \"price\": 65.0 },\n        { \"min\": 50, \"max\": 50, \"price\": 70.0 },\n        { \"min\": 60, \"max\": 60, \"price\": 78.0 },\n        { \"min\": 70, \"max\": 70, \"price\": 88.0 },\n        { \"min\": 80, \"max\": 80, \"price\": 99.0 },\n        { \"min\": 90, \"max\": 90, \"price\": 109.0 },\n        { \"min\": 100, \"max\": 100, \"price\": 119.0 },\n        { \"min\": 150, \"max\": 150, \"price\": 150.0 },\n        { \"min\": 200, \"max\": 200, \"price\": 179.0 },\n        { \"min\": 300, \"max\": 300, \"price\": 235.0 },\n        { \"min\": 400, \"max\": 400, \"price\": 290.0 },\n        { \"min\": 500, \"max\": 500, \"price\": 350.0 },\n        { \"min\": 700, \"max\": 700, \"price\": 460.0 },\n        { \"min\": 1000, \"max\": 1000, \"price\": 590.0 }\n      ]\n    }\n  }\n}\n", "import prices from \"../../data/normalized/ulotki-cyfrowe-jednostronne.json\";\nimport { calculatePrice } from \"../core/pricing\";\nimport { PriceTable, CalculationResult } from \"../core/types\";\nimport { priceStore } from \"../core/price-store\";\n\nexport interface UlotkiJednostronneOptions {\n  qty: number;\n  format: string;\n  mode: \"jednostronne\" | \"dwustronne\";\n  express: boolean;\n}\n\nexport function getUlotkiJednostronneTable(formatKey: string, mode: \"jednostronne\" | \"dwustronne\" = \"jednostronne\"): PriceTable {\n  const modeData = (prices as any)[mode];\n  if (!modeData) {\n    throw new Error(`Invalid mode: ${mode}`);\n  }\n  const formatData = modeData[formatKey];\n  if (!formatData) {\n    throw new Error(`Invalid format: ${formatKey} for mode ${mode}`);\n  }\n\n  return {\n    id: `ulotki-${mode}-${formatKey.toLowerCase()}`,\n    title: `Ulotki Cyfrowe ${mode === 'dwustronne' ? 'Dwustronne' : 'Jednostronne'} ${formatData.name}`,\n    unit: \"szt\",\n    pricing: \"flat\",\n    tiers: formatData.tiers,\n    modifiers: [\n      { id: \"express\", name: \"TRYB EXPRESS\", type: \"percent\", value: 0.20 }\n    ]\n  };\n}\n\nexport function quoteJednostronne(options: UlotkiJednostronneOptions): CalculationResult {\n  const table = getUlotkiJednostronneTable(options.format, options.mode);\n  const activeModifiers = [];\n  if (options.express) activeModifiers.push(\"express\");\n\n  return calculatePrice(table, options.qty, activeModifiers);\n}\n", "import { View, ViewContext } from \"../types\";\nimport { quoteJednostronne } from \"../../categories/ulotki-cyfrowe-jednostronne\";\nimport { formatPLN } from \"../../core/money\";\n\nexport const UlotkiJednostronneView: View = {\n  id: \"ulotki-cyfrowe-jednostronne\",\n  name: \"Ulotki \u2013 cyfrowe\",\n  async mount(container, ctx) {\n    try {\n      const response = await fetch(\"categories/ulotki-cyfrowe-jednostronne.html\");\n      if (!response.ok) throw new Error(\"Failed to load template\");\n      container.innerHTML = await response.text();\n\n      this.initLogic(container, ctx);\n    } catch (err) {\n      container.innerHTML = `<div class=\"error\">B\u0142\u0105d \u0142adowania: ${err}</div>`;\n    }\n  },\n\n  initLogic(container: HTMLElement, ctx: ViewContext) {\n    const formatSelect = container.querySelector(\"#uj-format\") as HTMLSelectElement;\n    const qtyInput = container.querySelector(\"#uj-qty-input\") as HTMLInputElement;\n    const addToCartBtn = container.querySelector(\"#uj-add-to-cart\") as HTMLButtonElement;\n    const resultDisplay = container.querySelector(\"#uj-result-display\") as HTMLElement;\n    const totalPriceSpan = container.querySelector(\"#uj-total-price\") as HTMLElement;\n    const unitPriceSpan = container.querySelector(\"#uj-unit-price\") as HTMLElement;\n    const displayQtySpan = container.querySelector(\"#uj-display-qty\") as HTMLElement;\n    const expressHint = container.querySelector(\"#uj-express-hint\") as HTMLElement;\n    const individualQuote = container.querySelector(\"#uj-individual-quote\") as HTMLElement;\n\n    let currentResult: any = null;\n    let currentOptions: any = null;\n\n    const calculate = () => {\n      const mode = (container.querySelector('input[name=\"uj-mode\"]:checked') as HTMLInputElement).value as \"jednostronne\" | \"dwustronne\";\n      const qty = parseInt(qtyInput.value) || 0;\n      const format = formatSelect.value;\n\n      if (qty > 1000) {\n        resultDisplay.style.display = \"none\";\n        individualQuote.style.display = \"block\";\n        addToCartBtn.disabled = true;\n        return;\n      }\n\n      if (qty < 1) {\n        resultDisplay.style.display = \"none\";\n        individualQuote.style.display = \"none\";\n        addToCartBtn.disabled = true;\n        return;\n      }\n\n      individualQuote.style.display = \"none\";\n\n      currentOptions = {\n        mode,\n        format,\n        qty,\n        express: ctx.expressMode\n      };\n\n      try {\n        const result = quoteJednostronne(currentOptions);\n        currentResult = result;\n\n        displayQtySpan.innerText = `${qty} szt`;\n        unitPriceSpan.innerText = formatPLN(result.totalPrice / qty);\n        totalPriceSpan.innerText = formatPLN(result.totalPrice);\n        \n        if (expressHint) expressHint.style.display = ctx.expressMode ? \"block\" : \"none\";\n        resultDisplay.style.display = \"block\";\n        addToCartBtn.disabled = false;\n\n        ctx.updateLastCalculated(result.totalPrice, \"Ulotki\");\n      } catch (err) {\n        console.error(err);\n        resultDisplay.style.display = \"none\";\n        addToCartBtn.disabled = true;\n      }\n    };\n\n    // Event listeners\n    container.querySelectorAll('input[name=\"uj-mode\"]').forEach(radio => {\n      radio.addEventListener('change', calculate);\n    });\n    formatSelect.onchange = calculate;\n    qtyInput.oninput = calculate;\n\n    addToCartBtn.onclick = () => {\n      if (currentResult && currentOptions) {\n        const expressLabel = currentOptions.express ? ', EXPRESS' : '';\n        const modeLabel = currentOptions.mode === 'dwustronne' ? 'Dwustronne' : 'Jednostronne';\n\n        ctx.cart.addItem({\n          id: `ulotki-cyfrowe-${Date.now()}`,\n          category: \"Ulotki\",\n          name: `Ulotki ${modeLabel} ${currentOptions.format}`,\n          quantity: currentOptions.qty,\n          unit: \"szt\",\n          unitPrice: currentResult.totalPrice / currentOptions.qty,\n          isExpress: currentOptions.express,\n          totalPrice: currentResult.totalPrice,\n          optionsHint: `${currentOptions.qty} szt, ${modeLabel}${expressLabel}`,\n          payload: currentResult\n        });\n      }\n    };\n\n    // Initial calculation\n    calculate();\n  }\n};\n", "{\n  \"id\": \"banner\",\n  \"title\": \"Bannery\",\n  \"unit\": \"m2\",\n  \"pricing\": \"per_unit\",\n  \"materials\": [\n    {\n      \"id\": \"powlekany\",\n      \"name\": \"Banner powlekany\",\n      \"tiers\": [\n        { \"min\": 1, \"max\": 25, \"price\": 53.0 },\n        { \"min\": 26, \"max\": 50, \"price\": 49.0 },\n        { \"min\": 51, \"max\": null, \"price\": 45.0 }\n      ]\n    },\n    {\n      \"id\": \"blockout\",\n      \"name\": \"Banner Blockout\",\n      \"tiers\": [\n        { \"min\": 1, \"max\": 25, \"price\": 64.0 },\n        { \"min\": 26, \"max\": 50, \"price\": 59.0 },\n        { \"min\": 51, \"max\": null, \"price\": 55.0 }\n      ]\n    }\n  ],\n  \"modifiers\": [\n    { \"id\": \"oczkowanie\", \"name\": \"Oczkowanie (+2.50 z\u0142/m2)\", \"type\": \"fixed_per_unit\", \"value\": 2.50 },\n    { \"id\": \"express\", \"name\": \"TRYB EXPRESS (+20%)\", \"type\": \"percent\", \"value\": 0.20 }\n  ]\n}\n", "import { calculatePrice } from \"../core/pricing\";\nimport { PriceTable, CalculationResult } from \"../core/types\";\nimport data from \"../../data/normalized/banner.json\";\nimport { priceStore } from \"../core/price-store\";\n\nexport interface BannerOptions {\n  material: string;\n  areaM2: number;\n  oczkowanie: boolean;\n  express?: boolean;\n}\n\nexport function calculateBanner(options: BannerOptions): CalculationResult {\n  const tableData = data as any;\n  const materialData = tableData.materials.find((m: any) => m.id === options.material);\n\n  if (!materialData) {\n    throw new Error(`Unknown material: ${options.material}`);\n  }\n\n  const category = \"Bannery\";\n  const prefix = `banner-${options.material}`;\n  \n  const dynamicTiers = priceStore.registerTiers(prefix, category, materialData.tiers);\n  const dynamicModifiers = tableData.modifiers.map((mod: any) => ({\n    ...mod,\n    value: priceStore.register(`banner-mod-${mod.id}`, category, `Dop\u0142ata ${mod.name}`, mod.value)\n  }));\n\n  const priceTable: PriceTable = {\n    id: tableData.id,\n    title: tableData.title,\n    unit: tableData.unit,\n    pricing: tableData.pricing,\n    tiers: dynamicTiers,\n    modifiers: dynamicModifiers\n  };\n\n  const activeModifiers: string[] = [];\n  if (options.oczkowanie) {\n    activeModifiers.push(\"oczkowanie\");\n  }\n  if (options.express) {\n    activeModifiers.push(\"express\");\n  }\n\n  return calculatePrice(priceTable, options.areaM2, activeModifiers);\n}\n", "import { View, ViewContext } from \"../types\";\nimport { calculateBanner } from \"../../categories/banner\";\nimport { formatPLN } from \"../../core/money\";\n\nexport const BannerView: View = {\n  id: \"banner\",\n  name: \"Bannery\",\n  async mount(container, ctx) {\n    try {\n      const response = await fetch(\"categories/banner.html\");\n      if (!response.ok) throw new Error(\"Failed to load template\");\n      container.innerHTML = await response.text();\n\n      this.initLogic(container, ctx);\n    } catch (err) {\n      container.innerHTML = `<div class=\"error\">B\u0142\u0105d \u0142adowania: ${err}</div>`;\n    }\n  },\n\n  initLogic(container: HTMLElement, ctx: ViewContext) {\n    const materialSelect = container.querySelector(\"#b-material\") as HTMLSelectElement;\n    const areaInput = container.querySelector(\"#b-area\") as HTMLInputElement;\n    const oczkowanieCheckbox = container.querySelector(\"#b-oczkowanie\") as HTMLInputElement;\n    const calculateBtn = container.querySelector(\"#b-calculate\") as HTMLButtonElement;\n    const addToCartBtn = container.querySelector(\"#b-add-to-cart\") as HTMLButtonElement;\n    const resultDisplay = container.querySelector(\"#b-result-display\") as HTMLElement;\n    const unitPriceSpan = container.querySelector(\"#b-unit-price\") as HTMLElement;\n    const totalPriceSpan = container.querySelector(\"#b-total-price\") as HTMLElement;\n    const expressHint = container.querySelector(\"#b-express-hint\") as HTMLElement;\n\n    let currentResult: any = null;\n    let currentOptions: any = null;\n\n    calculateBtn.onclick = () => {\n      currentOptions = {\n        material: materialSelect.value,\n        areaM2: parseFloat(areaInput.value),\n        oczkowanie: oczkowanieCheckbox.checked,\n        express: ctx.expressMode\n      };\n\n      try {\n        const result = calculateBanner(currentOptions);\n        currentResult = result;\n\n        unitPriceSpan.innerText = formatPLN(result.tierPrice);\n        totalPriceSpan.innerText = formatPLN(result.totalPrice);\n        if (expressHint) expressHint.style.display = ctx.expressMode ? \"block\" : \"none\";\n        resultDisplay.style.display = \"block\";\n        addToCartBtn.disabled = false;\n\n        ctx.updateLastCalculated(result.totalPrice, \"Banner\");\n      } catch (err) {\n        alert(\"B\u0142\u0105d: \" + (err as Error).message);\n      }\n    };\n\n    addToCartBtn.onclick = () => {\n      if (currentResult && currentOptions) {\n        const matName = materialSelect.options[materialSelect.selectedIndex].text;\n        const opts = [\n            `${currentOptions.areaM2} m2`,\n            currentOptions.oczkowanie ? \"z oczkowaniem\" : \"bez oczkowania\",\n            currentOptions.express ? \"EXPRESS\" : \"\"\n        ].filter(Boolean).join(\", \");\n\n        ctx.cart.addItem({\n          id: `banner-${Date.now()}`,\n          category: \"Bannery\",\n          name: matName,\n          quantity: currentOptions.areaM2,\n          unit: \"m2\",\n          unitPrice: currentResult.tierPrice,\n          isExpress: currentOptions.express,\n          totalPrice: currentResult.totalPrice,\n          optionsHint: opts,\n          payload: currentResult\n        });\n      }\n    };\n  }\n};\n", "{\n  \"category\": \"Wlepki / Naklejki\",\n  \"groups\": [\n    {\n      \"id\": \"wlepki_obrys_folia\",\n      \"title\": \"Wlepki po obrysie (Folia Bia\u0142a/Trans)\",\n      \"unit\": \"m2\",\n      \"pricing\": \"per_unit\",\n      \"tiers\": [\n        { \"min\": 1, \"max\": 5, \"price\": 67 },\n        { \"min\": 6, \"max\": 25, \"price\": 60 },\n        { \"min\": 26, \"max\": 50, \"price\": 52 },\n        { \"min\": 51, \"max\": null, \"price\": 48 }\n      ],\n      \"rules\": [\n        { \"type\": \"minimum\", \"unit\": \"m2\", \"value\": 1 }\n      ]\n    },\n    {\n      \"id\": \"wlepki_polipropylen\",\n      \"title\": \"Wlepki po obrysie - Polipropylen\",\n      \"unit\": \"m2\",\n      \"pricing\": \"per_unit\",\n      \"tiers\": [\n        { \"min\": 1, \"max\": 10, \"price\": 50 },\n        { \"min\": 11, \"max\": null, \"price\": 42 }\n      ],\n      \"rules\": [\n        { \"type\": \"minimum\", \"unit\": \"m2\", \"value\": 1 }\n      ]\n    },\n    {\n      \"id\": \"wlepki_standard_folia\",\n      \"title\": \"Folia Bia\u0142a / Transparentna (standard)\",\n      \"unit\": \"m2\",\n      \"pricing\": \"per_unit\",\n      \"tiers\": [\n        { \"min\": 1, \"max\": 5, \"price\": 54 },\n        { \"min\": 6, \"max\": 25, \"price\": 50 },\n        { \"min\": 26, \"max\": 50, \"price\": 46 },\n        { \"min\": 51, \"max\": null, \"price\": 42 }\n      ],\n      \"rules\": [\n        { \"type\": \"minimum\", \"unit\": \"m2\", \"value\": 1 }\n      ]\n    }\n  ],\n  \"modifiers\": [\n    { \"id\": \"mocny_klej\", \"name\": \"Mocny klej\", \"type\": \"percent\", \"value\": 0.12 },\n    { \"id\": \"arkusze\", \"name\": \"Ci\u0119te na arkusze\", \"type\": \"fixed_per_unit\", \"value\": 2 },\n    { \"id\": \"pojedyncze\", \"name\": \"Ci\u0119te na pojedyncze sztuki\", \"type\": \"fixed_per_unit\", \"value\": 10 },\n    { \"id\": \"express\", \"name\": \"EXPRESS\", \"type\": \"percent\", \"value\": 0.20 }\n  ]\n}\n", "import { calculatePrice } from \"../core/pricing\";\nimport { PriceTable, CalculationResult } from \"../core/types\";\nimport * as data from \"../../data/normalized/wlepki-naklejki.json\";\n\nexport interface WlepkiCalculation {\n  groupId: string;\n  area: number;\n  modifiers: string[];\n  express?: boolean;\n}\n\nexport function calculateWlepki(input: WlepkiCalculation): CalculationResult {\n  const tableData = data as any;\n  const groupData = tableData.groups.find((g: any) => g.id === input.groupId);\n\n  if (!groupData) {\n    throw new Error(`Unknown group: ${input.groupId}`);\n  }\n\n  const priceTable: PriceTable = {\n    id: `wlepki-${groupData.id}`,\n    title: groupData.title,\n    unit: groupData.unit,\n    pricing: groupData.pricing || \"per_unit\",\n    tiers: groupData.tiers,\n    modifiers: tableData.modifiers,\n    rules: groupData.rules || [{ type: \"minimum\", unit: \"m2\", value: 1 }]\n  };\n\n  const activeModifiers = [...input.modifiers];\n  if (input.express) {\n    activeModifiers.push(\"express\");\n  }\n\n  return calculatePrice(priceTable, input.area, activeModifiers);\n}\n", "import { View, ViewContext } from \"../types\";\nimport { calculateWlepki, WlepkiCalculation } from \"../../categories/wlepki-naklejki\";\nimport { formatPLN } from \"../../core/money\";\nimport * as data from \"../../../data/normalized/wlepki-naklejki.json\";\n\nexport const WlepkiView: View = {\n  id: \"wlepki-naklejki\",\n  name: \"Wlepki / Naklejki\",\n  async mount(container, ctx) {\n    const tableData = data as any;\n\n    try {\n      const response = await fetch(\"categories/wlepki-naklejki.html\");\n      if (!response.ok) throw new Error(\"Failed to load template\");\n      container.innerHTML = await response.text();\n    } catch (err) {\n      container.innerHTML = `<div class=\"error\">B\u0142\u0105d \u0142adowania szablonu: ${err}</div>`;\n      return;\n    }\n\n    const groupSelect = container.querySelector(\"#wlepki-group\") as HTMLSelectElement;\n    const areaInput = container.querySelector(\"#wlepki-area\") as HTMLInputElement;\n    const calcBtn = container.querySelector(\"#btn-calculate\") as HTMLButtonElement;\n    const addBtn = container.querySelector(\"#btn-add-to-cart\") as HTMLButtonElement;\n    const resultDiv = container.querySelector(\"#wlepki-result\") as HTMLElement;\n    const unitPriceEl = container.querySelector(\"#unit-price\") as HTMLElement;\n    const totalPriceEl = container.querySelector(\"#total-price\") as HTMLElement;\n\n    let currentResult: any = null;\n    let currentInput: WlepkiCalculation | null = null;\n\n    const calculate = () => {\n      const modCheckboxes = container.querySelectorAll(\".wlepki-mod:checked\") as NodeListOf<HTMLInputElement>;\n      const modifiers = Array.from(modCheckboxes).map(cb => cb.value);\n\n      currentInput = {\n        groupId: groupSelect.value,\n        area: parseFloat(areaInput.value) || 0,\n        express: ctx.expressMode,\n        modifiers\n      };\n\n      try {\n        const result = calculateWlepki(currentInput);\n        currentResult = result;\n\n        unitPriceEl.textContent = formatPLN(result.tierPrice);\n        totalPriceEl.textContent = formatPLN(result.totalPrice);\n        resultDiv.style.display = \"block\";\n        addBtn.disabled = false;\n\n        ctx.updateLastCalculated(result.totalPrice, \"Wlepki\");\n      } catch (err) {\n        alert(\"B\u0142\u0105d: \" + (err as Error).message);\n      }\n    };\n\n    calcBtn.addEventListener(\"click\", calculate);\n\n    addBtn.addEventListener(\"click\", () => {\n      if (!currentResult || !currentInput) return;\n\n      const group = tableData.groups.find((g: any) => g.id === currentInput!.groupId);\n\n      const modsLabel = currentInput.modifiers.map(mId => {\n        const m = tableData.modifiers.find((mod: any) => mod.id === mId);\n        return m ? m.name : mId;\n      });\n\n      if (currentInput.express) modsLabel.unshift(\"EXPRESS (+20%)\");\n\n      ctx.cart.addItem({\n        id: `wlepki-${Date.now()}`,\n        category: \"Wlepki / Naklejki\",\n        name: group?.title || \"Wlepki\",\n        quantity: currentInput.area,\n        unit: \"m2\",\n        unitPrice: currentResult.tierPrice,\n        isExpress: !!currentInput.express,\n        totalPrice: currentResult.totalPrice,\n        optionsHint: modsLabel.join(\", \") || \"Standard\",\n        payload: currentResult\n      });\n    });\n  }\n};\n", "{\n  \"name\": \"Roll-up Jednostronny\",\n  \"formats\": {\n    \"85x200\": {\n      \"width\": 0.85,\n      \"height\": 2.0,\n      \"tiers\": [\n        { \"min\": 1, \"max\": 5, \"price\": 290 },\n        { \"min\": 6, \"max\": 10, \"price\": 275 }\n      ]\n    },\n    \"100x200\": {\n      \"width\": 1.0,\n      \"height\": 2.0,\n      \"tiers\": [\n        { \"min\": 1, \"max\": 5, \"price\": 305 },\n        { \"min\": 6, \"max\": 10, \"price\": 285 }\n      ]\n    },\n    \"120x200\": {\n      \"width\": 1.2,\n      \"height\": 2.0,\n      \"tiers\": [\n        { \"min\": 1, \"max\": 5, \"price\": 330 },\n        { \"min\": 6, \"max\": 10, \"price\": 310 }\n      ]\n    },\n    \"150x200\": {\n      \"width\": 1.5,\n      \"height\": 2.0,\n      \"tiers\": [\n        { \"min\": 1, \"max\": 5, \"price\": 440 },\n        { \"min\": 6, \"max\": 10, \"price\": 425 }\n      ]\n    }\n  },\n  \"replacement\": {\n    \"labor\": 50,\n    \"print_per_m2\": 80\n  }\n}\n", "import data from \"../../data/normalized/roll-up.json\";\nimport { calculatePrice } from \"../core/pricing\";\nimport { PriceTable, CalculationResult } from \"../core/types\";\nimport { priceStore } from \"../core/price-store\";\n\nexport interface RollUpOptions {\n  format: string;\n  qty: number;\n  isReplacement: boolean;\n  express: boolean;\n}\n\nexport function calculateRollUp(options: RollUpOptions): CalculationResult {\n  const formatData = (data.formats as any)[options.format];\n  if (!formatData) {\n    throw new Error(`Unknown format: ${options.format}`);\n  }\n\n  const category = \"Roll-up\";\n  let priceTable: PriceTable;\n\n  if (options.isReplacement) {\n    const area = formatData.width * formatData.height;\n    \n    const printPerM2 = priceStore.register('rollup-repl-m2', category, 'Wymiana: Druk za m2', data.replacement.print_per_m2);\n    const labor = priceStore.register('rollup-repl-labor', category, 'Wymiana: Robocizna', data.replacement.labor);\n    \n    const pricePerSzt = (area * printPerM2) + labor;\n    const express = priceStore.register('rollup-repl-express', category, 'Dop\u0142ata Express (wymiana)', 0.20);\n\n    priceTable = {\n      id: \"roll-up-replacement\",\n      title: `Wymiana wk\u0142adu (${options.format})`,\n      unit: \"szt\",\n      pricing: \"per_unit\",\n      tiers: [{ min: 1, max: null, price: pricePerSzt }],\n      modifiers: [\n        { id: \"express\", name: \"EXPRESS\", type: \"percent\", value: express }\n      ]\n    };\n  } else {\n    const prefix = `rollup-full-${options.format}`;\n    const dynamicTiers = priceStore.registerTiers(prefix, category, formatData.tiers);\n    const express = priceStore.register(`${prefix}-express`, category, `Dop\u0142ata Express (${options.format})`, 0.20);\n\n    priceTable = {\n      id: \"roll-up-full\",\n      title: `Roll-up Komplet (${options.format})`,\n      unit: \"szt\",\n      pricing: \"per_unit\",\n      tiers: dynamicTiers,\n      modifiers: [\n        { id: \"express\", name: \"EXPRESS\", type: \"percent\", value: express }\n      ]\n    };\n  }\n\n  const activeModifiers: string[] = [];\n  if (options.express) {\n    activeModifiers.push(\"express\");\n  }\n\n  return calculatePrice(priceTable, options.qty, activeModifiers);\n}\n", "import { View, ViewContext } from \"../types\";\nimport { calculateRollUp, RollUpOptions } from \"../../categories/roll-up\";\nimport { formatPLN } from \"../../core/money\";\n\nexport const RollUpView: View = {\n  id: \"roll-up\",\n  name: \"Roll-up\",\n  async mount(container, ctx) {\n    const response = await fetch(\"categories/roll-up.html\");\n    container.innerHTML = await response.text();\n\n    const typeSel = container.querySelector(\"#rollUpType\") as HTMLSelectElement;\n    const formatSel = container.querySelector(\"#rollUpFormat\") as HTMLSelectElement;\n    const qtyInput = container.querySelector(\"#rollUpQty\") as HTMLInputElement;\n    const calcBtn = container.querySelector(\"#calcBtn\") as HTMLButtonElement;\n    const addToCartBtn = container.querySelector(\"#addToCartBtn\") as HTMLButtonElement;\n    const resultArea = container.querySelector(\"#rollUpResult\") as HTMLElement;\n\n    const calculate = () => {\n      const options: RollUpOptions = {\n        format: formatSel.value,\n        qty: parseInt(qtyInput.value) || 1,\n        isReplacement: typeSel.value === \"replacement\",\n        express: ctx.expressMode\n      };\n\n      const result = calculateRollUp(options);\n\n      resultArea.style.display = \"block\";\n      (container.querySelector(\"#resUnitPrice\") as HTMLElement).textContent = formatPLN(result.totalPrice / options.qty);\n      (container.querySelector(\"#resTotalPrice\") as HTMLElement).textContent = formatPLN(result.totalPrice);\n      (container.querySelector(\"#resExpressHint\") as HTMLElement).style.display = options.express ? \"block\" : \"none\";\n\n      ctx.updateLastCalculated(result.totalPrice, \"Roll-up\");\n      return { options, result };\n    };\n\n    calcBtn.addEventListener(\"click\", () => calculate());\n\n    addToCartBtn.addEventListener(\"click\", () => {\n      const { options, result } = calculate();\n\n      ctx.cart.addItem({\n        id: `rollup-${Date.now()}`,\n        category: \"Roll-up\",\n        name: `${options.isReplacement ? 'Wymiana wk\u0142adu' : 'Roll-up Komplet'} ${options.format}`,\n        quantity: options.qty,\n        unit: \"szt\",\n        unitPrice: result.totalPrice / options.qty,\n        isExpress: options.express,\n        totalPrice: result.totalPrice,\n        optionsHint: `${options.format}, ${options.qty} szt`,\n        payload: options\n      });\n    });\n\n    // Initial calculation\n    calculate();\n  }\n};\n", "import { CategoryModule, CategoryContext } from \"../ui/router\";\n\nexport async function loadCategoryHTML(filename: string): Promise<string> {\n  const response = await fetch(`./categories/${filename}`);\n  if (!response.ok) throw new Error(`Failed to load ${filename}`);\n  return response.text();\n}\n\nexport function createHTMLCategory(\n  id: string,\n  name: string,\n  filename: string\n): CategoryModule {\n  return {\n    id,\n    name,\n    mount: async (container: HTMLElement, ctx: CategoryContext) => {\n      container.innerHTML = '<div style=\"padding: 20px; text-align: center; color: #999;\">\u23F3 \u0141adowanie kategorii...</div>';\n      \n      try {\n        const html = await loadCategoryHTML(filename);\n        container.innerHTML = html;\n        \n        // Re-attach event listeners if needed\n        attachCategoryEventListeners(container, ctx);\n      } catch (error) {\n        container.innerHTML = `\n          <div style=\"padding: 40px; text-align: center; color: #e74c3c;\">\n            \u274C B\u0142\u0105d \u0142adowania kategorii: ${name}\n            <br><small>${error}</small>\n          </div>\n        `;\n        console.error('Category load error:', error);\n      }\n    }\n  };\n}\n\nfunction attachCategoryEventListeners(container: HTMLElement, ctx: CategoryContext) {\n  // Znajd\u017A wszystkie buttony \"Dodaj do listy\" lub \"Oblicz\"\n  const buttons = container.querySelectorAll('button[data-action]');\n  \n  buttons.forEach(btn => {\n    const action = btn.getAttribute('data-action');\n    \n    if (action === 'calculate') {\n      btn.addEventListener('click', () => {\n        // Logika obliczania ceny\n        console.log('Calculate clicked');\n      });\n    }\n    \n    if (action === 'add-to-basket') {\n      btn.addEventListener('click', () => {\n        // Logika dodawania do koszyka\n        ctx.addToBasket({\n          category: container.getAttribute('data-category-id') || 'unknown',\n          price: parseFloat(container.getAttribute('data-price') || '0'),\n          description: container.getAttribute('data-description') || ''\n        });\n      });\n    }\n  });\n}\n", "import { View, ViewContext } from \"../types\";\nimport { formatPLN } from \"../../core/money\";\nimport { priceStore } from \"../../core/price-store\";\n\nexport const DrukCADAdvancedView: View = {\n  id: \"druk-cad\",\n  name: \"Druk CAD wielkoformatowy\",\n  async mount(container, ctx) {\n    try {\n      const response = await fetch(\"categories/druk-cad-advanced.html\");\n      if (!response.ok) throw new Error(\"Failed to load template\");\n      container.innerHTML = await response.text();\n\n      this.initLogic(container, ctx);\n    } catch (err) {\n      container.innerHTML = `<div class=\"error\">B\u0142\u0105d \u0142adowania: ${err}</div>`;\n    }\n  },\n\n  initLogic(container: HTMLElement, ctx: ViewContext) {\n    const ps = priceStore;\n    const cat = \"CAD\";\n    const PRICES: any = {\n      formatowe: {\n        czb: { \n          A3: ps.register(\"cad-f-czb-A3\", cat, \"CAD A3 CZB\", 2.50),\n          A2: ps.register(\"cad-f-czb-A2\", cat, \"CAD A2 CZB\", 4.00),\n          A1: ps.register(\"cad-f-czb-A1\", cat, \"CAD A1 CZB\", 6.00),\n          A0: ps.register(\"cad-f-czb-A0\", cat, \"CAD A0 CZB\", 11.00),\n          'A0+': ps.register(\"cad-f-czb-A0p\", cat, \"CAD A0+ CZB\", 12.50)\n        },\n        kolor: { \n          A3: ps.register(\"cad-f-kol-A3\", cat, \"CAD A3 Kolor\", 5.30),\n          A2: ps.register(\"cad-f-kol-A2\", cat, \"CAD A2 Kolor\", 8.50),\n          A1: ps.register(\"cad-f-kol-A1\", cat, \"CAD A1 Kolor\", 12.00),\n          A0: ps.register(\"cad-f-kol-A0\", cat, \"CAD A0 Kolor\", 24.00),\n          'A0+': ps.register(\"cad-f-kol-A0p\", cat, \"CAD A0+ Kolor\", 26.00)\n        }\n      },\n      nieformatowe: {\n        czb: { \n          297: ps.register(\"cad-n-czb-297\", cat, \"CAD 297mm CZB (z\u0142/mb)\", 3.50),\n          420: ps.register(\"cad-n-czb-420\", cat, \"CAD 420mm CZB (z\u0142/mb)\", 4.50),\n          594: ps.register(\"cad-n-czb-594\", cat, \"CAD 594mm CZB (z\u0142/mb)\", 5.00),\n          841: ps.register(\"cad-n-czb-841\", cat, \"CAD 841mm CZB (z\u0142/mb)\", 9.00),\n          914: ps.register(\"cad-n-czb-914\", cat, \"CAD 914mm CZB (z\u0142/mb)\", 10.00),\n          1067: ps.register(\"cad-n-czb-1067\", cat, \"CAD 1067mm CZB (z\u0142/mb)\", 12.50)\n        },\n        kolor: { \n          297: ps.register(\"cad-n-kol-297\", cat, \"CAD 297mm Kolor (z\u0142/mb)\", 12.00),\n          420: ps.register(\"cad-n-kol-420\", cat, \"CAD 420mm Kolor (z\u0142/mb)\", 13.90),\n          594: ps.register(\"cad-n-kol-594\", cat, \"CAD 594mm Kolor (z\u0142/mb)\", 14.50),\n          841: ps.register(\"cad-n-kol-841\", cat, \"CAD 841mm Kolor (z\u0142/mb)\", 20.00),\n          914: ps.register(\"cad-n-kol-914\", cat, \"CAD 914mm Kolor (z\u0142/mb)\", 21.00),\n          1067: ps.register(\"cad-n-kol-1067\", cat, \"CAD 1067mm Kolor (z\u0142/mb)\", 30.00)\n        }\n      },\n      skladanie: {\n        formatowe: { \n          A3: ps.register(\"cad-s-f-A3\", cat, \"CAD Sk\u0142adanie A3\", 1.00),\n          'A3-poprzeczne': ps.register(\"cad-s-f-A3p\", cat, \"CAD Sk\u0142adanie A3L\", 0.70),\n          A2: ps.register(\"cad-s-f-A2\", cat, \"CAD Sk\u0142adanie A2\", 1.50),\n          A1: ps.register(\"cad-s-f-A1\", cat, \"CAD Sk\u0142adanie A1\", 2.00),\n          A0: ps.register(\"cad-s-f-A0\", cat, \"CAD Sk\u0142adanie A0\", 3.00),\n          'A0+': ps.register(\"cad-s-f-A0p\", cat, \"CAD Sk\u0142adanie A0+\", 4.00)\n        },\n        nieformatowe: ps.register(\"cad-s-n\", cat, \"CAD Sk\u0142adanie mb (z\u0142/m2)\", 2.50)\n      },\n      skanowanie: ps.register(\"cad-skan\", cat, \"CAD Skanowanie (z\u0142/cm)\", 0.08)\n    };\n\n    const FORMATS: any = {\n      'A3': [297, 420],\n      'A2': [420, 594],\n      'A1': [594, 841],\n      'A0': [841, 1189],\n      'A0+': [914, 1292]\n    };\n\n    const STANDARD_WIDTHS = [297, 420, 594, 841, 914, 1067];\n    const TOLERANCE = 5;\n\n    let filesData: any[] = [];\n    let isColor = false;\n    let dpi = 300;\n\n    const fileInput = container.querySelector('#fileInput') as HTMLInputElement;\n    const uploadZone = container.querySelector('#uploadZone') as HTMLElement;\n    const dpiInput = container.querySelector('#dpiInput') as HTMLInputElement;\n    const colorToggle = container.querySelector('#colorToggle') as HTMLElement;\n    const colorSwitch = container.querySelector('#colorSwitch') as HTMLElement;\n    const filesTableWrapper = container.querySelector('#filesTableWrapper') as HTMLElement;\n    const filesTableBody = container.querySelector('#filesTableBody') as HTMLElement;\n    const summaryPanel = container.querySelector('#summaryPanel') as HTMLElement;\n    const summaryGrid = container.querySelector('#summaryGrid') as HTMLElement;\n    const clearBtn = container.querySelector('#clearBtn') as HTMLElement;\n    const addAllToCartBtn = container.querySelector('#add-all-to-cart') as HTMLElement;\n\n    const pxToMm = (px: number, dpi: number) => (px * 25.4) / dpi;\n    const findClosestWidth = (width: number) => STANDARD_WIDTHS.reduce((prev, curr) => Math.abs(curr - width) < Math.abs(prev - width) ? curr : prev);\n    const isStandardWidth = (width: number) => STANDARD_WIDTHS.includes(Math.round(width));\n\n    const detectFormat = (widthMm: number, heightMm: number) => {\n      const w = Math.round(widthMm);\n      const h = Math.round(heightMm);\n      const [minDim, maxDim] = w < h ? [w, h] : [h, w];\n\n      if (!isStandardWidth(minDim)) {\n        return { format: `${minDim}mm`, isFormatowy: false, isStandardWidth: false, widthCategory: findClosestWidth(minDim) };\n      }\n\n      for (const [name, dims] of Object.entries(FORMATS)) {\n        const [fw, fh] = dims as [number, number];\n        if (minDim === fw) {\n          const isWithinTolerance = Math.abs(maxDim - fh) <= TOLERANCE;\n          return { format: name, isFormatowy: isWithinTolerance, isStandardWidth: true, widthCategory: fw, actualLength: maxDim, standardLength: fh };\n        }\n      }\n\n      return { format: `${minDim}\u00D7${maxDim}`, isFormatowy: false, isStandardWidth: true, widthCategory: minDim };\n    };\n\n    const calculatePrintPrice = (fileData: any) => {\n      const mode = isColor ? 'kolor' : 'czb';\n      const { format, isFormatowy, widthCategory } = fileData.formatInfo;\n      if (isFormatowy) {\n        return PRICES.formatowe[mode][format] || 0;\n      } else {\n        const pricePerMb = PRICES.nieformatowe[mode][widthCategory] || 0;\n        const lengthMeters = Math.max(fileData.widthMm, fileData.heightMm) / 1000;\n        return pricePerMb * lengthMeters;\n      }\n    };\n\n    const calculateFoldingPrice = (fileData: any) => {\n      if (!fileData.folding) return 0;\n      const { format, isFormatowy } = fileData.formatInfo;\n      if (isFormatowy) {\n        return PRICES.skladanie.formatowe[format] || 0;\n      } else {\n        const areaM2 = (fileData.widthMm / 1000) * (fileData.heightMm / 1000);\n        return PRICES.skladanie.nieformatowe * areaM2;\n      }\n    };\n\n    const calculateScanPrice = (fileData: any) => {\n      if (!fileData.scanning) return 0;\n      const longerSide = Math.max(fileData.widthMm, fileData.heightMm);\n      return (PRICES.skanowanie * longerSide) / 10; // Cennik m\u00F3wi 0.08 z\u0142/mm? W linku by\u0142o 0.08. \n    };\n\n    const updateDisplay = () => {\n      if (filesData.length === 0) {\n        filesTableWrapper.style.display = 'none';\n        summaryPanel.style.display = 'none';\n        return;\n      }\n\n      filesTableWrapper.style.display = 'block';\n      summaryPanel.style.display = 'block';\n\n      filesTableBody.innerHTML = filesData.map((file, idx) => {\n        const printPrice = calculatePrintPrice(file);\n        const foldingPrice = calculateFoldingPrice(file);\n        const scanPrice = calculateScanPrice(file);\n        const totalPrice = (printPrice + foldingPrice + scanPrice) * (ctx.expressMode ? 1.2 : 1);\n\n        const { format, isFormatowy, isStandardWidth } = file.formatInfo;\n        const typeBadge = !isStandardWidth ? '<span class=\"badge badge-warning\">\u26A0\uFE0F Niestandard</span>' : (isFormatowy ? '<span class=\"badge badge-formatowy\">Format</span>' : '<span class=\"badge badge-nieformatowy\">MB</span>');\n\n        return `\n          <tr>\n            <td>${file.name}</td>\n            <td>${Math.round(file.widthMm)}\u00D7${Math.round(file.heightMm)}</td>\n            <td><strong>${format}</strong></td>\n            <td>${typeBadge}</td>\n            <td><input type=\"checkbox\" ${file.folding ? 'checked' : ''} data-idx=\"${idx}\" class=\"fold-check\"></td>\n            <td><input type=\"checkbox\" ${file.scanning ? 'checked' : ''} data-idx=\"${idx}\" class=\"scan-check\"></td>\n            <td><strong>${totalPrice.toFixed(2)} z\u0142</strong></td>\n          </tr>\n        `;\n      }).join('');\n\n      // Attach dynamic listeners\n      container.querySelectorAll('.fold-check').forEach(el => {\n        el.addEventListener('change', (e: any) => {\n          filesData[parseInt(e.target.dataset.idx)].folding = e.target.checked;\n          updateDisplay();\n        });\n      });\n      container.querySelectorAll('.scan-check').forEach(el => {\n        el.addEventListener('change', (e: any) => {\n          filesData[parseInt(e.target.dataset.idx)].scanning = e.target.checked;\n          updateDisplay();\n        });\n      });\n\n      let total = 0;\n      filesData.forEach(f => {\n        total += (calculatePrintPrice(f) + calculateFoldingPrice(f) + calculateScanPrice(f)) * (ctx.expressMode ? 1.2 : 1);\n      });\n\n      summaryGrid.innerHTML = `\n        <div class=\"summary-item\"><span>Liczba plik\u00F3w:</span><span>${filesData.length}</span></div>\n        <div class=\"summary-item\"><span>Razem brutto:</span><strong>${total.toFixed(2)} z\u0142</strong></div>\n      `;\n\n      ctx.updateLastCalculated(total, `Druk CAD (${filesData.length} plik\u00F3w)`);\n    };\n\n    uploadZone.onclick = () => fileInput.click();\n    fileInput.onchange = (e: any) => {\n      const files = e.target.files;\n      for (const file of files) {\n        if (file.type.startsWith('image/') || file.type === 'application/pdf') {\n          const img = new Image();\n          const reader = new FileReader();\n          reader.onload = (re: any) => {\n            img.onload = () => {\n              const widthMm = pxToMm(img.width, dpi);\n              const heightMm = pxToMm(img.height, dpi);\n              filesData.push({\n                name: file.name,\n                widthPx: img.width, heightPx: img.height,\n                widthMm, heightMm,\n                formatInfo: detectFormat(widthMm, heightMm),\n                folding: false, scanning: false\n              });\n              updateDisplay();\n            };\n            img.src = re.target.result;\n          };\n          reader.readAsDataURL(file);\n        } else {\n           // Mock for CAD files as in user script\n           const widthMm = pxToMm(2480, dpi);\n           const heightMm = pxToMm(3508, dpi);\n           filesData.push({\n             name: file.name,\n             widthPx: 2480, heightPx: 3508,\n             widthMm, heightMm,\n             formatInfo: detectFormat(widthMm, heightMm),\n             folding: false, scanning: false\n           });\n           updateDisplay();\n        }\n      }\n    };\n\n    colorToggle.onclick = () => {\n      isColor = !isColor;\n      colorSwitch.classList.toggle('active');\n      updateDisplay();\n    };\n\n    dpiInput.onchange = () => {\n      dpi = parseInt(dpiInput.value) || 300;\n      filesData = filesData.map(f => {\n        const w = pxToMm(f.widthPx, dpi);\n        const h = pxToMm(f.heightPx, dpi);\n        return { ...f, widthMm: w, heightMm: h, formatInfo: detectFormat(w, h) };\n      });\n      updateDisplay();\n    };\n\n    clearBtn.onclick = () => {\n      filesData = [];\n      updateDisplay();\n    };\n\n    addAllToCartBtn.onclick = () => {\n      filesData.forEach(file => {\n        const printPrice = calculatePrintPrice(file);\n        const foldingPrice = calculateFoldingPrice(file);\n        const scanPrice = calculateScanPrice(file);\n        const totalPrice = (printPrice + foldingPrice + scanPrice) * (ctx.expressMode ? 1.2 : 1);\n\n        ctx.cart.addItem({\n          id: `cad-${Date.now()}-${Math.random()}`,\n          category: \"Druk CAD\",\n          name: file.name,\n          quantity: 1,\n          unit: \"szt.\",\n          unitPrice: totalPrice,\n          isExpress: ctx.expressMode,\n          totalPrice: parseFloat(totalPrice.toFixed(2)),\n          optionsHint: `${file.formatInfo.format} (${isColor ? 'Kolor' : 'CZ-B'}), ${file.folding ? 'Sk\u0142adanie' : ''}`,\n          payload: file\n        });\n      });\n      alert(`Dodano ${filesData.length} plik\u00F3w do koszyka.`);\n    };\n  }\n};\n", "import { priceStore } from \"./price-store\";\n\nexport function pickTier(tiers: any[], qty: number) {\n  return tiers.find((t) => qty >= t.from && qty <= t.to) || null;\n}\n\nexport function pickNearestCeilKey(table: any, qty: number) {\n  const keys = Object.keys(table || {})\n    .map(Number)\n    .filter(Number.isFinite)\n    .sort((a, b) => a - b);\n  if (!keys.length) return null;\n  const k = keys.find((x) => qty <= x);\n  return k == null ? null : k;\n}\n\n// Helper to register and return tiers\nconst getPrintTiers = (id: string, cat: string, defaults: any[]) => {\n  return priceStore.registerTiers(id, cat, defaults);\n};\n\nexport const PRICE: any = {\n  get print() {\n    return {\n      bw: {\n        A4: getPrintTiers('print-bw-a4', 'Druk A4/A3', [\n          { from: 1, to: 5, unit: 0.9 },\n          { from: 6, to: 20, unit: 0.6 },\n          { from: 21, to: 100, unit: 0.35 },\n          { from: 101, to: 500, unit: 0.3 },\n          { from: 501, to: 999, unit: 0.23 },\n          { from: 1000, to: 4999, unit: 0.19 },\n          { from: 5000, to: 99999, unit: 0.15 },\n        ]),\n        A3: getPrintTiers('print-bw-a3', 'Druk A4/A3', [\n          { from: 1, to: 5, unit: 1.7 },\n          { from: 6, to: 20, unit: 1.1 },\n          { from: 21, to: 100, unit: 0.7 },\n          { from: 101, to: 500, unit: 0.6 },\n          { from: 501, to: 999, unit: 0.45 },\n          { from: 1000, to: 99999, unit: 0.33 },\n        ]),\n      },\n      color: {\n        A4: getPrintTiers('print-color-a4', 'Druk A4/A3', [\n          { from: 1, to: 10, unit: 2.4 },\n          { from: 11, to: 40, unit: 2.2 },\n          { from: 41, to: 100, unit: 2.0 },\n          { from: 101, to: 250, unit: 1.8 },\n          { from: 251, to: 500, unit: 1.6 },\n          { from: 501, to: 999, unit: 1.4 },\n          { from: 1000, to: 99999, unit: 1.1 },\n        ]),\n        A3: getPrintTiers('print-color-a3', 'Druk A4/A3', [\n          { from: 1, to: 10, unit: 4.8 },\n          { from: 11, to: 40, unit: 4.2 },\n          { from: 41, to: 100, unit: 3.8 },\n          { from: 101, to: 250, unit: 3.0 },\n          { from: 251, to: 500, unit: 2.5 },\n          { from: 501, to: 999, unit: 1.9 },\n          { from: 1000, to: 99999, unit: 1.6 },\n        ]),\n      },\n    };\n  },\n  get scan() {\n    return {\n      auto: getPrintTiers('scan-auto', 'Skany', [\n        { from: 1, to: 9, unit: 1.0 },\n        { from: 10, to: 49, unit: 0.5 },\n        { from: 50, to: 99, unit: 0.4 },\n        { from: 100, to: 999999999, unit: 0.25 },\n      ]),\n      manual: getPrintTiers('scan-manual', 'Skany', [\n        { from: 1, to: 4, unit: 2.0 },\n        { from: 5, to: 999999999, unit: 1.0 },\n      ]),\n    };\n  },\n  get email_price() {\n    return priceStore.get('email-price', 1.0);\n  }\n};\n\nexport const CAD_PRICE: any = {\n  get color() {\n    return {\n      formatowe: {\n        A0p: priceStore.get('cad-color-f-a0p', 26.0),\n        A0: priceStore.get('cad-color-f-a0', 24.0),\n        A1: priceStore.get('cad-color-f-a1', 12.0),\n        A2: priceStore.get('cad-color-f-a2', 8.5),\n        A3: priceStore.get('cad-color-f-a3', 5.3)\n      },\n      mb: {\n        A0p: priceStore.get('cad-color-m-a0p', 21.0),\n        A0: priceStore.get('cad-color-m-a0', 20.0),\n        A1: priceStore.get('cad-color-m-a1', 14.5),\n        A2: priceStore.get('cad-color-m-a2', 13.9),\n        A3: priceStore.get('cad-color-m-a3', 12.0),\n        R1067: priceStore.get('cad-color-m-r1067', 30.0)\n      },\n    };\n  },\n  get bw() {\n    return {\n      formatowe: {\n        A0p: priceStore.get('cad-bw-f-a0p', 12.5),\n        A0: priceStore.get('cad-bw-f-a0', 11.0),\n        A1: priceStore.get('cad-bw-f-a1', 6.0),\n        A2: priceStore.get('cad-bw-f-a2', 4.0),\n        A3: priceStore.get('cad-bw-f-a3', 2.5)\n      },\n      mb: {\n        A0p: priceStore.get('cad-bw-m-a0p', 10.0),\n        A0: priceStore.get('cad-bw-m-a0', 9.0),\n        A1: priceStore.get('cad-bw-m-a1', 5.0),\n        A2: priceStore.get('cad-bw-m-a2', 4.5),\n        A3: priceStore.get('cad-bw-m-a3', 3.5),\n        R1067: priceStore.get('cad-bw-m-r1067', 12.5)\n      },\n    };\n  }\n};\n\nexport const CAD_BASE: any = {\n  A0p: { w: 914, l: 1292, label: \"A0+\" },\n  A0: { w: 841, l: 1189, label: \"A0\" },\n  A1: { w: 594, l: 841, label: \"A1\" },\n  A2: { w: 420, l: 594, label: \"A2\" },\n  A3: { w: 297, l: 420, label: \"A3\" },\n  R1067: { w: 1067, l: 0, label: \"Roll 1067\" },\n};\n\nexport const FORMAT_TOLERANCE_MM = 0.5;\n\nexport const FOLD_PRICE: any = {\n  get A0p() { return priceStore.get('fold-a0p', 4.0); },\n  get A0() { return priceStore.get('fold-a0', 3.0); },\n  get A1() { return priceStore.get('fold-a1', 2.0); },\n  get A2() { return priceStore.get('fold-a2', 1.5); },\n  get A3() { return priceStore.get('fold-a3', 1.0); },\n  get A3L() { return priceStore.get('fold-a3l', 0.7); },\n};\n\nexport const WF_SCAN_PRICE_CM = {\n  get value() { return priceStore.get('wf-scan-cm', 0.08); }\n};\n\nconst bizHelper = (group: string, format: string, type: string, prices: Record<number, number>) => {\n  const result: any = {};\n  for (const [qty, price] of Object.entries(prices)) {\n    const id = `biz-${group}-${format}-${type}-${qty}`;\n    const name = `Wizyt\u00F3wki ${format} ${type} ${qty} szt`;\n    result[qty] = priceStore.register(id, 'Wizyt\u00F3wki', name, price as number);\n  }\n  return result;\n};\n\nexport const BIZ: any = {\n  get cyfrowe() {\n    return {\n      standardPrices: {\n        \"85x55\": {\n          noLam: bizHelper('std', '85x55', 'bez lami', { 50: 65, 100: 75, 150: 85, 200: 96, 250: 110, 300: 126, 400: 146, 500: 170, 1000: 290 }),\n          lam: bizHelper('std', '85x55', 'lami', { 50: 160, 100: 170, 150: 180, 200: 190, 250: 200, 300: 220, 400: 240, 500: 250, 1000: 335 }),\n        },\n        \"90x50\": {\n          noLam: bizHelper('std', '90x50', 'bez lami', { 50: 70, 100: 79, 150: 89, 200: 99, 250: 120, 300: 129, 400: 149, 500: 175, 1000: 300 }),\n          lam: bizHelper('std', '90x50', 'lami', { 50: 170, 100: 180, 150: 190, 200: 200, 250: 210, 300: 230, 400: 250, 500: 260, 1000: 345 }),\n        },\n      },\n      softtouchPrices: {\n        \"85x55\": {\n          noLam: bizHelper('st', '85x55', 'bez lami', { 50: 65, 100: 75, 150: 85, 200: 96, 250: 110, 300: 126, 400: 145, 500: 170, 1000: 290 }),\n          lam: bizHelper('st', '85x55', 'lami', { 50: 170, 100: 190, 150: 210, 200: 220, 250: 230, 300: 240, 400: 260, 500: 270, 1000: 380 }),\n        },\n        \"90x50\": {\n          noLam: bizHelper('st', '90x50', 'bez lami', { 50: 70, 100: 79, 150: 89, 200: 99, 250: 120, 300: 129, 400: 149, 500: 175, 1000: 300 }),\n          lam: bizHelper('st', '90x50', 'lami', { 50: 170, 100: 190, 150: 210, 200: 220, 250: 230, 300: 240, 400: 260, 500: 270, 1000: 390 }),\n        },\n      },\n      deluxe: {\n        leadTime: \"4\u20135 dni roboczych\",\n        options: {\n          uv3d_softtouch: {\n            label: \"Maker UV 3D + folia SOFTTOUCH\",\n            prices: bizHelper('deluxe', 'UV 3D', 'Softtouch', { 50: 280, 100: 320, 200: 395, 250: 479, 400: 655, 500: 778 }),\n          },\n          uv3d_gold_softtouch: {\n            label: \"Maker UV 3D + z\u0142ocenie + folia SOFTTOUCH\",\n            prices: bizHelper('deluxe', 'UV 3D Gold', 'Softtouch', { 50: 450, 100: 550, 200: 650, 250: 720, 400: 850, 500: 905 }),\n          },\n        },\n      },\n    };\n  }\n};\n\n// Initial registration call to ensure all IDs exist in registry\nconst initRegistry = () => {\n  // Call getters once to trigger registration\n  const p = PRICE.print;\n  const s = PRICE.scan;\n  const e = PRICE.email_price;\n  const c = CAD_PRICE.color;\n  const b = CAD_PRICE.bw;\n  const f = FOLD_PRICE.A0;\n  const w = WF_SCAN_PRICE_CM.value;\n  const biz = BIZ.cyfrowe;\n};\n\ninitRegistry();\n\nexport function money(n: any) {\n  return (Math.round((Number(n) || 0) * 100) / 100).toFixed(2);\n}\n", "import {\n  PRICE,\n  CAD_PRICE,\n  CAD_BASE,\n  FORMAT_TOLERANCE_MM,\n  FOLD_PRICE,\n  WF_SCAN_PRICE_CM,\n  BIZ,\n  pickTier,\n  pickNearestCeilKey,\n  money,\n} from \"./compat\";\n\n/** A4/A3 Print calculation logic */\nexport function calculateSimplePrint(options: {\n  mode: \"bw\" | \"color\";\n  format: \"A4\" | \"A3\";\n  pages: number;\n  email: boolean;\n  ink25: boolean;\n  ink25Qty: number;\n}) {\n  if (options.pages <= 0) {\n    return {\n      unitPrice: 0,\n      printTotal: 0,\n      emailTotal: options.email ? PRICE.email_price : 0,\n      inkTotal: 0,\n      grandTotal: options.email ? PRICE.email_price : 0,\n    };\n  }\n  const tiers = (PRICE.print as any)[options.mode][options.format];\n  const tier = pickTier(tiers, options.pages);\n  if (!tier) throw new Error(\"Brak progu cenowego dla druku.\");\n\n  const unitPrice = tier.unit;\n  let total = options.pages * unitPrice;\n\n  let emailItemTotal = 0;\n  if (options.email) {\n    emailItemTotal = PRICE.email_price;\n  }\n\n  let inkItemTotal = 0;\n  if (options.ink25) {\n    inkItemTotal = 0.5 * unitPrice * options.ink25Qty;\n  }\n\n  return {\n    unitPrice,\n    printTotal: total,\n    emailTotal: emailItemTotal,\n    inkTotal: inkItemTotal,\n    grandTotal: total + emailItemTotal + inkItemTotal,\n  };\n}\n\n/** A4/A3 Scan calculation logic */\nexport function calculateSimpleScan(options: {\n  type: \"auto\" | \"manual\";\n  pages: number;\n}) {\n  if (options.pages <= 0) return { unitPrice: 0, total: 0 };\n  const tiers = (PRICE.scan as any)[options.type];\n  const tier = pickTier(tiers, options.pages);\n  if (!tier) throw new Error(\"Brak progu cenowego dla skanowania.\");\n\n  const unitPrice = tier.unit;\n  return {\n    unitPrice,\n    total: options.pages * unitPrice,\n  };\n}\n\n/** CAD calculation logic */\nexport function calculateCad(options: {\n  mode: \"bw\" | \"color\";\n  format: string;\n  lengthMm: number;\n  qty: number;\n}) {\n  const base = CAD_BASE[options.format];\n  if (!base) throw new Error(\"Nieznany format CAD.\");\n\n  const isFormatowe = Math.abs(options.lengthMm - base.l) <= FORMAT_TOLERANCE_MM;\n  const detectedType = isFormatowe ? \"formatowe\" : \"mb\";\n\n  const rate = CAD_PRICE[options.mode][detectedType][options.format];\n  if (rate == null) throw new Error(\"Brak stawki w cenniku dla CAD.\");\n\n  let total = 0;\n  if (detectedType === \"formatowe\") {\n    total = options.qty * rate;\n  } else {\n    const meters = options.lengthMm / 1000;\n    total = options.qty * meters * rate;\n  }\n\n  return {\n    detectedType,\n    rate,\n    total: parseFloat(money(total)),\n  };\n}\n\n/** CAD Folding logic */\nexport function calculateCadFold(options: { format: string; qty: number }) {\n  const unit = FOLD_PRICE[options.format];\n  if (unit == null) throw new Error(\"Brak stawki sk\u0142adania.\");\n  return {\n    unit,\n    total: options.qty * unit,\n  };\n}\n\n/** WF Scan logic */\nexport function calculateWfScan(options: { lengthMm: number; qty: number }) {\n  const cmRounded = Math.round(options.lengthMm / 10);\n  const unitPrice = cmRounded * WF_SCAN_PRICE_CM.value;\n  return {\n    cmRounded,\n    unitPrice,\n    total: options.qty * unitPrice,\n  };\n}\n\n/** Business Cards logic */\nexport function calculateBusinessCards(options: {\n  family: \"standard\" | \"deluxe\";\n  finish?: \"mat\" | \"blysk\" | \"softtouch\";\n  size?: \"85x55\" | \"90x50\";\n  lam?: \"noLam\" | \"lam\";\n  deluxeOpt?: \"uv3d_softtouch\" | \"uv3d_gold_softtouch\";\n  qty: number;\n}) {\n  let table: any;\n  if (options.family === \"deluxe\") {\n    const optObj = BIZ.cyfrowe.deluxe.options[options.deluxeOpt!];\n    table = optObj.prices;\n  } else {\n    const tablesByFinish =\n      options.finish === \"softtouch\"\n        ? BIZ.cyfrowe.softtouchPrices\n        : BIZ.cyfrowe.standardPrices;\n    table = tablesByFinish[options.size!][options.lam!];\n  }\n\n  const qtyBilled = pickNearestCeilKey(table, options.qty);\n  if (qtyBilled == null) throw new Error(\"Brak progu cenowego dla takiej ilo\u015Bci.\");\n\n  const total = table[qtyBilled];\n  return {\n    qtyBilled,\n    total,\n  };\n}\n", "import { CategoryModule } from \"../ui/router\";\nimport { calculateSimplePrint, calculateSimpleScan } from \"../core/compat-logic\";\n\nexport interface DrukA4A3SkanOptions {\n  mode: \"bw\" | \"color\";\n  format: \"A4\" | \"A3\";\n  printQty: number;\n  email: boolean;\n  surcharge: boolean;\n  surchargeQty: number;\n  scanType: \"none\" | \"auto\" | \"manual\";\n  scanQty: number;\n  express: boolean;\n}\n\nexport function calculateDrukA4A3Skan(options: DrukA4A3SkanOptions, pricing?: any) {\n  const format = options.format.toUpperCase() as \"A4\" | \"A3\";\n  const printResult = calculateSimplePrint({\n    mode: options.mode,\n    format: format,\n    pages: options.printQty,\n    email: options.email,\n    ink25: options.surcharge,\n    ink25Qty: options.surchargeQty\n  });\n\n  let scanResult = { total: 0, unitPrice: 0 };\n  if (options.scanType !== \"none\" && options.scanQty > 0) {\n    scanResult = calculateSimpleScan({\n      type: options.scanType as \"auto\" | \"manual\",\n      pages: options.scanQty\n    });\n  }\n\n  const baseTotal = printResult.grandTotal + scanResult.total;\n  let finalTotal = baseTotal;\n  if (options.express) {\n    finalTotal = baseTotal * 1.2;\n  }\n\n  return {\n    totalPrice: parseFloat(finalTotal.toFixed(2)),\n    unitPrintPrice: printResult.unitPrice,\n    totalPrintPrice: printResult.printTotal,\n    unitScanPrice: scanResult.unitPrice,\n    totalScanPrice: scanResult.total,\n    emailPrice: printResult.emailTotal,\n    surchargePrice: printResult.inkTotal,\n    baseTotal\n  };\n}\n\n// Pricing structure from official price list (synchronized with compat.ts)\nconst PRICING = {\n  czarnoBialy: {\n    A4: [\n      { min: 1, max: 5, price: 0.90 },\n      { min: 6, max: 20, price: 0.60 },\n      { min: 21, max: 100, price: 0.35 },\n      { min: 101, max: 500, price: 0.30 },\n      { min: 501, max: 999, price: 0.23 },\n      { min: 1000, max: 4999, price: 0.19 },\n      { min: 5000, max: 99999, price: 0.15 }\n    ],\n    A3: [\n      { min: 1, max: 5, price: 1.70 },\n      { min: 6, max: 20, price: 1.10 },\n      { min: 21, max: 100, price: 0.70 },\n      { min: 101, max: 500, price: 0.60 },\n      { min: 501, max: 999, price: 0.45 },\n      { min: 1000, max: 99999, price: 0.33 }\n    ]\n  },\n  kolorowy: {\n    A4: [\n      { min: 1, max: 10, price: 2.40 },\n      { min: 11, max: 40, price: 2.20 },\n      { min: 41, max: 100, price: 2.00 },\n      { min: 101, max: 250, price: 1.80 },\n      { min: 251, max: 500, price: 1.60 },\n      { min: 501, max: 999, price: 1.40 },\n      { min: 1000, max: 99999, price: 1.10 }\n    ],\n    A3: [\n      { min: 1, max: 10, price: 4.80 },\n      { min: 11, max: 40, price: 4.20 },\n      { min: 41, max: 100, price: 3.80 },\n      { min: 101, max: 250, price: 3.00 },\n      { min: 251, max: 500, price: 2.50 },\n      { min: 501, max: 999, price: 1.90 },\n      { min: 1000, max: 99999, price: 1.60 }\n    ]\n  }\n};\n\nfunction getPricePerPage(\n  format: \"A4\" | \"A3\",\n  quantity: number,\n  color: \"czarnoBialy\" | \"kolorowy\"\n): number {\n  const tiers = PRICING[color][format];\n\n  for (const tier of tiers) {\n    if (quantity >= tier.min && quantity <= tier.max) {\n      return tier.price;\n    }\n  }\n\n  // Fallback to last tier\n  return tiers[tiers.length - 1].price;\n}\n\nexport const drukA4A3Category: CategoryModule = {\n  id: 'druk-a4-a3',\n  name: '\uD83D\uDCC4 Druk A4/A3 + skan',\n  mount: (container, ctx) => {\n    container.innerHTML = `\n      <div class=\"category-form\">\n        <h2>Druk / Ksero A4/A3</h2>\n        <p style=\"color: #999; margin-bottom: 20px;\">\n          Cena za stron\u0119 zale\u017Cy od nak\u0142adu. Im wi\u0119cej stron, tym ni\u017Csza cena jednostkowa.\n        </p>\n\n        <div class=\"form-group\">\n          <label>Format:</label>\n          <select id=\"format\">\n            <option value=\"A4\">A4 (210\u00D7297 mm)</option>\n            <option value=\"A3\">A3 (297\u00D7420 mm)</option>\n          </select>\n        </div>\n\n        <div class=\"form-group\">\n          <label>Ilo\u015B\u0107 stron:</label>\n          <input type=\"number\" id=\"quantity\" value=\"1\" min=\"1\" max=\"10000\" step=\"1\">\n          <small style=\"color: #666;\">Ca\u0142kowita liczba stron do wydruku</small>\n        </div>\n\n        <div class=\"form-group\">\n          <label>Druk:</label>\n          <select id=\"color\">\n            <option value=\"czarnoBialy\">Czarno-bia\u0142y</option>\n            <option value=\"kolorowy\">Kolorowy</option>\n          </select>\n        </div>\n\n        <div id=\"price-tiers\" style=\"background: #1a1a1a; padding: 15px; border-radius: 8px; margin: 20px 0;\">\n          <h4 style=\"color: #667eea; margin: 0 0 10px 0;\">Przedzia\u0142y cenowe:</h4>\n          <div id=\"tiers-list\"></div>\n        </div>\n\n        <div style=\"padding: 15px; background: #2a2a2a; border-radius: 8px; margin: 20px 0;\">\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;\">\n            <span style=\"color: #999;\">Cena za stron\u0119:</span>\n            <strong id=\"price-per-page\" style=\"font-size: 18px; color: #667eea;\">0.00 z\u0142/str</strong>\n          </div>\n          <div style=\"display: flex; justify-content: space-between; align-items: center;\">\n            <span style=\"color: #999;\">Cena ca\u0142kowita:</span>\n            <strong id=\"total-price\" style=\"font-size: 24px; color: #667eea;\">0.00 z\u0142</strong>\n          </div>\n          <p id=\"price-breakdown\" style=\"color: #666; font-size: 12px; margin: 10px 0 0 0;\"></p>\n        </div>\n\n        <div style=\"display: flex; gap: 10px;\">\n          <button id=\"calculate\" class=\"btn-primary\" style=\"flex: 1;\">Oblicz cen\u0119</button>\n          <button id=\"addToBasket\" class=\"btn-success\" style=\"flex: 1;\">Dodaj do listy</button>\n        </div>\n      </div>\n    `;\n\n    let currentPrice = 0;\n    let currentPricePerPage = 0;\n\n    const formatSelect = container.querySelector('#format') as HTMLSelectElement;\n    const quantityInput = container.querySelector('#quantity') as HTMLInputElement;\n    const colorSelect = container.querySelector('#color') as HTMLSelectElement;\n    const calculateBtn = container.querySelector('#calculate');\n    const addBtn = container.querySelector('#addToBasket');\n    const tiersList = container.querySelector('#tiers-list');\n    const pricePerPageDisplay = container.querySelector('#price-per-page');\n    const totalDisplay = container.querySelector('#total-price');\n    const breakdownDisplay = container.querySelector('#price-breakdown');\n\n    // Update tiers display when format or color changes\n    function updateTiersDisplay() {\n      const format = formatSelect.value as \"A4\" | \"A3\";\n      const color = colorSelect.value as \"czarnoBialy\" | \"kolorowy\";\n      const tiers = PRICING[color][format];\n\n      if (tiersList) {\n        tiersList.innerHTML = tiers.map(tier => {\n          const rangeText = tier.max >= 99999 \n            ? `${tier.min}+ str` \n            : `${tier.min}-${tier.max} str`;\n          return `<div style=\"display: flex; justify-content: space-between; padding: 5px 0; color: #ccc;\">\n            <span>${rangeText}</span>\n            <span style=\"color: #667eea;\">${tier.price.toFixed(2)} z\u0142/str</span>\n          </div>`;\n        }).join('');\n      }\n    }\n\n    formatSelect.addEventListener('change', updateTiersDisplay);\n    colorSelect.addEventListener('change', updateTiersDisplay);\n    updateTiersDisplay();\n\n    calculateBtn?.addEventListener('click', () => {\n      const format = formatSelect.value as \"A4\" | \"A3\";\n      const quantity = parseInt(quantityInput.value) || 1;\n      const color = colorSelect.value as \"czarnoBialy\" | \"kolorowy\";\n\n      currentPricePerPage = getPricePerPage(format, quantity, color);\n      currentPrice = currentPricePerPage * quantity;\n      if (ctx.expressMode) currentPrice *= 1.2;\n\n      if (pricePerPageDisplay) {\n        pricePerPageDisplay.textContent = `${currentPricePerPage.toFixed(2)} z\u0142/str`;\n      }\n\n      if (totalDisplay) {\n        totalDisplay.textContent = `${currentPrice.toFixed(2)} z\u0142`;\n      }\n\n      if (breakdownDisplay) {\n        const colorLabel = color === \"czarnoBialy\" ? \"Czarno-bia\u0142y\" : \"Kolorowy\";\n        breakdownDisplay.textContent = `${colorLabel}, ${format}, ${quantity} str \u00D7 ${currentPricePerPage.toFixed(2)} z\u0142 = ${currentPrice.toFixed(2)} z\u0142`;\n      }\n\n      ctx.updateLastCalculated(currentPrice, `Druk ${format} ${color === \"czarnoBialy\" ? \"CZ-B\" : \"KOLOR\"} - ${quantity} str`);\n    });\n\n    addBtn?.addEventListener('click', () => {\n      if (currentPrice === 0) {\n        alert('\u26A0\uFE0F Najpierw oblicz cen\u0119!');\n        return;\n      }\n\n      const format = formatSelect.value;\n      const quantity = quantityInput.value;\n      const color = colorSelect.value === \"czarnoBialy\" ? \"CZ-B\" : \"KOLOR\";\n\n      ctx.addToBasket({\n        category: 'Druk A4/A3',\n        price: currentPrice,\n        description: `${format}, ${quantity} str, ${color} (${currentPricePerPage.toFixed(2)} z\u0142/str)`\n      });\n\n      alert(`\u2705 Dodano: ${currentPrice.toFixed(2)} z\u0142`);\n    });\n  }\n};\n", "import { View, ViewContext } from \"../types\";\nimport { calculateDrukA4A3Skan } from \"../../categories/druk-a4-a3-skan\";\nimport { formatPLN } from \"../../core/money\";\nimport { PRICE } from \"../../core/compat\";\n\nexport const DrukA4A3SkanView: View = {\n  id: \"druk-a4-a3\",\n  name: \"Druk A4/A3 + skan\",\n  async mount(container, ctx) {\n    try {\n      const response = await fetch(\"categories/druk-a4-a3-skan.html\");\n      if (!response.ok) throw new Error(\"Failed to load template\");\n      container.innerHTML = await response.text();\n\n      this.initLogic(container, ctx);\n    } catch (err) {\n      container.innerHTML = `<div class=\"error\">B\u0142\u0105d \u0142adowania: ${err}</div>`;\n    }\n  },\n\n  initLogic(container: HTMLElement, ctx: ViewContext) {\n    const modeSelect = container.querySelector(\"#d-mode\") as HTMLSelectElement;\n    const formatSelect = container.querySelector(\"#d-format\") as HTMLSelectElement;\n    const printQtyInput = container.querySelector(\"#d-print-qty\") as HTMLInputElement;\n    const emailCheck = container.querySelector(\"#d-email\") as HTMLInputElement;\n    const surchargeCheck = container.querySelector(\"#d-surcharge\") as HTMLInputElement;\n    const surchargeQtyInput = container.querySelector(\"#d-surcharge-qty\") as HTMLInputElement;\n    const surchargeQtyRow = container.querySelector(\"#surcharge-qty-row\") as HTMLElement;\n    const scanTypeSelect = container.querySelector(\"#d-scan-type\") as HTMLSelectElement;\n    const scanQtyInput = container.querySelector(\"#d-scan-qty\") as HTMLInputElement;\n    const scanQtyRow = container.querySelector(\"#scan-qty-row\") as HTMLElement;\n\n    const calculateBtn = container.querySelector(\"#d-calculate\") as HTMLButtonElement;\n    const addToCartBtn = container.querySelector(\"#d-add-to-cart\") as HTMLButtonElement;\n    const resultDisplay = container.querySelector(\"#d-result-display\") as HTMLElement;\n    const totalPriceSpan = container.querySelector(\"#d-total-price\") as HTMLElement;\n    const expressHint = container.querySelector(\"#d-express-hint\") as HTMLElement;\n    const tierTable = container.querySelector(\"#tier-table\") as HTMLElement;\n\n    const updateTiers = () => {\n      if (!tierTable || !modeSelect || !formatSelect) return;\n      const mode = modeSelect.value; // 'bw' or 'color'\n      const format = formatSelect.value.toUpperCase(); // 'A4' or 'A3'\n      \n      const p = PRICE.print;\n      const tiers = p[mode][format];\n      \n      if (tiers) {\n        tierTable.innerHTML = tiers.map((t: any) => \n          `<div>${t.from}-${t.to >= 99999 ? '\u221E' : t.to} szt.</div><div style=\"text-align: right;\">${t.unit.toFixed(2)} z\u0142</div>`\n        ).join('');\n      }\n    };\n\n    if (modeSelect) modeSelect.onchange = updateTiers;\n    if (formatSelect) formatSelect.onchange = updateTiers;\n    updateTiers();\n\n    if (surchargeCheck && surchargeQtyRow) {\n      surchargeCheck.onchange = () => {\n        surchargeQtyRow.style.display = surchargeCheck.checked ? \"flex\" : \"none\";\n      };\n    }\n\n    if (scanTypeSelect && scanQtyRow) {\n      scanTypeSelect.onchange = () => {\n        scanQtyRow.style.display = scanTypeSelect.value !== \"none\" ? \"flex\" : \"none\";\n      };\n    }\n\n    let currentResult: any = null;\n    let currentOptions: any = null;\n\n    if (calculateBtn) {\n      calculateBtn.onclick = () => {\n        currentOptions = {\n          mode: modeSelect.value,\n          format: formatSelect.value,\n          printQty: parseInt(printQtyInput.value) || 0,\n          email: emailCheck.checked,\n          surcharge: surchargeCheck.checked,\n          surchargeQty: parseInt(surchargeQtyInput.value) || 0,\n          scanType: scanTypeSelect.value,\n          scanQty: parseInt(scanQtyInput.value) || 0,\n          express: ctx.expressMode\n        };\n\n        try {\n        const result = calculateDrukA4A3Skan(currentOptions);\n          currentResult = result;\n\n          totalPriceSpan.innerText = formatPLN(result.totalPrice);\n          if (expressHint) expressHint.style.display = ctx.expressMode ? \"block\" : \"none\";\n          resultDisplay.style.display = \"block\";\n          addToCartBtn.disabled = false;\n\n          ctx.updateLastCalculated(result.totalPrice, \"Druk A4/A3 + skan\");\n        } catch (err) {\n          alert(\"B\u0142\u0105d: \" + (err as Error).message);\n        }\n      };\n    }\n\n    if (addToCartBtn) {\n      addToCartBtn.onclick = () => {\n        if (currentResult && currentOptions) {\n          const timestamp = Date.now();\n          const expressFactor = ctx.expressMode ? 1.2 : 1;\n\n          // 1. G\u0142\u00F3wny produkt: Druk + Skan\n          if (currentOptions.printQty > 0 || (currentOptions.scanQty > 0 && currentOptions.scanType !== 'none')) {\n            const details = [];\n            if (currentOptions.printQty > 0) {\n              details.push(`${currentOptions.printQty} str. ${currentOptions.format.toUpperCase()} (${currentOptions.mode === 'bw' ? 'CZ-B' : 'KOLOR'})`);\n            }\n            if (currentOptions.scanQty > 0 && currentOptions.scanType !== 'none') {\n              details.push(`Skan ${currentOptions.scanType}: ${currentOptions.scanQty} str.`);\n            }\n            if (ctx.expressMode) details.push(\"EXPRESS\");\n\n            const mainPrice = (currentResult.totalPrintPrice + currentResult.totalScanPrice) * expressFactor;\n\n            ctx.cart.addItem({\n              id: `druk-${timestamp}-main`,\n              category: \"Druk A4/A3 + skan\",\n              name: `${currentOptions.format.toUpperCase()} ${currentOptions.mode === 'bw' ? 'CZ-B' : 'KOLOR'}`,\n              quantity: currentOptions.printQty || currentOptions.scanQty,\n              unit: currentOptions.printQty > 0 ? \"str.\" : \"skan\",\n              unitPrice: mainPrice / (currentOptions.printQty || currentOptions.scanQty),\n              isExpress: ctx.expressMode,\n              totalPrice: parseFloat(mainPrice.toFixed(2)),\n              optionsHint: details.join(\", \"),\n              payload: { ...currentResult, type: 'main' }\n            });\n          }\n\n          // 2. Osobny produkt: Wysy\u0142ka e-mail\n          if (currentOptions.email) {\n            const emailPrice = currentResult.emailPrice * expressFactor;\n            ctx.cart.addItem({\n              id: `email-${timestamp}-email`,\n              category: \"Druk A4/A3 + skan\",\n              name: \"Wysy\u0142ka e-mail\",\n              quantity: 1,\n              unit: \"szt.\",\n              unitPrice: emailPrice,\n              isExpress: ctx.expressMode,\n              totalPrice: parseFloat(emailPrice.toFixed(2)),\n              optionsHint: ctx.expressMode ? \"EXPRESS\" : \"\",\n              payload: { price: emailPrice, type: 'email' }\n            });\n          }\n\n          // 3. Osobny produkt: Dop\u0142ata za zadruk >25%\n          if (currentOptions.surcharge && currentOptions.surchargeQty > 0) {\n            const surchargePrice = currentResult.surchargePrice * expressFactor;\n            ctx.cart.addItem({\n              id: `surcharge-${timestamp}-surcharge`,\n              category: \"Druk A4/A3 + skan\",\n              name: \"Zadruk >25% - dop\u0142ata\",\n              quantity: currentOptions.surchargeQty,\n              unit: \"str.\",\n              unitPrice: surchargePrice / currentOptions.surchargeQty,\n              isExpress: ctx.expressMode,\n              totalPrice: parseFloat(surchargePrice.toFixed(2)),\n              optionsHint: `${currentOptions.surchargeQty} str. (+50%), ${ctx.expressMode ? \"EXPRESS\" : \"\"}`,\n              payload: { price: surchargePrice, type: 'surcharge' }\n            });\n          }\n        }\n      };\n    }\n  }\n};\n", "import { sampleCategory } from \"./sample\";\nimport { plakatyCategory } from \"./plakaty\";\nimport { voucheryCategory } from \"./vouchery\";\nimport { dyplomyCategory } from \"./dyplomy\";\nimport { wizytowkiCategory } from \"./wizytowki\";\nimport { ZaproszeniaKredaView as zaproszeniaKredaCategory } from \"../ui/views/zaproszenia-kreda\";\nimport { UlotkiJednostronneView as ulotkiJednostronneCategory } from \"../ui/views/ulotki-cyfrowe-jednostronne\";\nimport { BannerView as banneryCategory } from \"../ui/views/banner\";\nimport { WlepkiView as wlepkiCategory } from \"../ui/views/wlepki-naklejki\";\nimport { RollUpView as rollupCategory } from \"../ui/views/roll-up\";\nimport { createHTMLCategory } from \"./loader\";\nimport { DrukCADAdvancedView as drukCADCategory } from \"../ui/views/druk-cad-advanced\";\nimport { DrukA4A3SkanView as drukA4A3Category } from \"../ui/views/druk-a4-a3\";\n\nexport const categories = [\n  // Istniej\u0105ce kategorie JS\n  sampleCategory,\n  plakatyCategory,\n  voucheryCategory,\n  dyplomyCategory,\n  wizytowkiCategory,\n  zaproszeniaKredaCategory,\n  ulotkiJednostronneCategory,\n  banneryCategory,\n  wlepkiCategory,\n  rollupCategory,\n  \n  // Nowe kategorie z pe\u0142n\u0105 logik\u0105\n  drukCADCategory,\n  drukA4A3Category,\n\n  // Pozosta\u0142e kategorie HTML\n  createHTMLCategory('cad-ops', '\uD83D\uDDFA\uFE0F CAD OPS', 'cad-ops.html'),\n  createHTMLCategory('folia-szroniona', '\u2728 Folia Szroniona', 'folia-szroniona.html'),\n  createHTMLCategory('laminowanie', '\uD83D\uDD12 Laminowanie', 'laminowanie.html'),\n];\n", "/**\n * Application configuration\n */\nexport const CONFIG = {\n  // Simple PIN for settings access. \n  // In a real app, this should be handled by a backend.\n  SETTINGS_PIN: \"2024\", // Default PIN\n};\n", "import { View, ViewContext } from \"../types\";\nimport { priceStore, PriceEntry } from \"../../core/price-store\";\nimport { formatPLN } from \"../../core/money\";\n\nexport const SettingsView: View = {\n  id: \"settings\",\n  name: \"\u2699\uFE0F Ustawienia\",\n  mount: (container: HTMLElement, ctx: ViewContext) => {\n    const entries = priceStore.getAllEntries();\n    const categories = Array.from(new Set(entries.map(e => e.category))).sort();\n\n    container.innerHTML = `\n      <div class=\"category-view\" style=\"max-width: 1000px; margin: 0 auto;\">\n        <div class=\"view-header\">\n          <h2>\u2699\uFE0F Zarz\u0105dzanie cenami</h2>\n        </div>\n\n        <div class=\"settings-tabs\" style=\"display: flex; gap: 5px; margin-bottom: 20px;\">\n          <button class=\"tab-btn active\" data-tab=\"tab-ceny\">Ceny</button>\n          <button class=\"tab-btn\" data-tab=\"tab-mnozniki\">Mno\u017Cniki</button>\n          <button class=\"tab-btn\" data-tab=\"tab-progi\">Progi ilo\u015Bciowe</button>\n          <button class=\"tab-btn\" data-tab=\"tab-ogolne\">Og\u00F3lne</button>\n        </div>\n\n        <div id=\"tab-ceny\" class=\"tab-content active\">\n          <div class=\"card\">\n            <div class=\"sticky-actions\">\n              <div style=\"display: flex; gap: 10px; align-items: center;\">\n                <label style=\"margin: 0;\">Filtruj kategori\u0119:</label>\n                <select id=\"filter-category\" style=\"width: 200px;\">\n                  <option value=\"\">Wszystkie</option>\n                  ${categories.map(cat => `<option value=\"${cat}\">${cat}</option>`).join(\"\")}\n                </select>\n              </div>\n              <button id=\"save-prices-top\" class=\"btn-success save-btn\">Zapisz ceny</button>\n            </div>\n\n            <div class=\"settings-table-container\">\n              <table class=\"settings-table\">\n                <thead>\n                  <tr>\n                    <th>Kategoria</th>\n                    <th>Produkt / Pr\u00F3g</th>\n                    <th>Aktualna cena</th>\n                    <th>Nowa cena</th>\n                  </tr>\n                </thead>\n                <tbody id=\"price-table-body\">\n                  <!-- Rows will be injected here -->\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n\n        <div id=\"tab-mnozniki\" class=\"tab-content\" style=\"display: none;\">\n          <div class=\"card\">\n            <h3>Wsp\u00F3\u0142czynniki i mno\u017Cniki</h3>\n            <p style=\"color: #94a3b8;\">Zarz\u0105dzaj mno\u017Cnikami dla dwustronno\u015Bci, ekspresu i innych.</p>\n            <div class=\"settings-table-container\">\n              <table class=\"settings-table\">\n                <thead>\n                  <tr><th>Nazwa</th><th>Warto\u015B\u0107</th></tr>\n                </thead>\n                <tbody>\n                  <tr><td>Dwustronno\u015B\u0107 (Standard)</td><td>1.8x</td></tr>\n                  <tr><td>Tryb EXPRESS</td><td>1.2x</td></tr>\n                  <tr><td>Druk Satyna (+12%)</td><td>1.12x</td></tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n\n        <div id=\"tab-progi\" class=\"tab-content\" style=\"display: none;\">\n          <div class=\"card\">\n            <h3>Progi ilo\u015Bciowe</h3>\n            <p style=\"color: #94a3b8;\">Definiuj progi dla kalkulacji uniwersalnej.</p>\n            <!-- Content for thresholds -->\n          </div>\n        </div>\n\n        <div id=\"tab-ogolne\" class=\"tab-content\" style=\"display: none;\">\n          <div class=\"card\">\n            <h3>Ustawienia og\u00F3lne</h3>\n            <div class=\"form-group\">\n              <label>Nazwa drukarni:</label>\n              <input type=\"text\" class=\"form-control\" value=\"RazDwa\">\n            </div>\n            <div class=\"form-group\">\n              <label>Waluta:</label>\n              <input type=\"text\" class=\"form-control\" value=\"PLN\">\n            </div>\n          </div>\n        </div>\n\n        <div id=\"save-success\" class=\"modal-overlay\" style=\"display: none; background: rgba(16, 185, 129, 0.2);\">\n           <div class=\"modal-content\" style=\"border-color: #10b981;\">\n              <h3 style=\"color: #10b981;\">\u2705 Sukces</h3>\n              <p>Ceny zosta\u0142y zaktualizowane!</p>\n              <button id=\"close-success\" class=\"btn-success\" style=\"margin-top: 20px;\">OK</button>\n           </div>\n        </div>\n      </div>\n    `;\n\n    const tableBody = container.querySelector(\"#price-table-body\") as HTMLElement;\n    const filterSelect = container.querySelector(\"#filter-category\") as HTMLSelectElement;\n    const successModal = container.querySelector(\"#save-success\") as HTMLElement;\n    const closeSuccessBtn = container.querySelector(\"#close-success\") as HTMLElement;\n\n    function renderTable(filter: string = \"\") {\n      const filteredEntries = filter \n        ? entries.filter(e => e.category === filter)\n        : entries;\n\n      tableBody.innerHTML = filteredEntries.map(e => `\n        <tr data-category=\"${e.category}\">\n          <td style=\"color: #94a3b8;\">${e.category}</td>\n          <td><strong>${e.name}</strong></td>\n          <td>${e.currentValue.toFixed(2)} z\u0142</td>\n          <td>\n            <input type=\"number\" step=\"0.01\" min=\"0\" \n                   class=\"price-input\" data-id=\"${e.id}\" \n                   placeholder=\"${e.currentValue.toFixed(2)}\">\n          </td>\n        </tr>\n      `).join(\"\");\n    }\n\n    function handleSave() {\n      const inputs = container.querySelectorAll(\".price-input\") as NodeListOf<HTMLInputElement>;\n      const updates: Record<string, number> = {};\n      let changedCount = 0;\n\n      inputs.forEach(input => {\n        const val = input.value;\n        if (val !== \"\" && !isNaN(parseFloat(val))) {\n          const newPrice = parseFloat(val);\n          const id = input.getAttribute(\"data-id\")!;\n          const entry = entries.find(e => e.id === id);\n          \n          if (entry && entry.currentValue !== newPrice) {\n            updates[id] = newPrice;\n            changedCount++;\n          }\n        }\n      });\n\n      if (changedCount > 0) {\n        priceStore.updatePrices(updates);\n        // Refresh local entries\n        const updatedEntries = priceStore.getAllEntries();\n        entries.forEach(e => {\n          if (updates[e.id] !== undefined) e.currentValue = updates[e.id];\n        });\n        \n        renderTable(filterSelect.value);\n        if (successModal) successModal.style.display = \"flex\";\n      } else {\n        alert(\"Brak zmian do zapisania.\");\n      }\n    }\n\n    // Tab switching logic\n    const tabBtns = container.querySelectorAll(\".tab-btn\");\n    const tabContents = container.querySelectorAll(\".tab-content\");\n\n    tabBtns.forEach(btn => {\n      btn.addEventListener(\"click\", () => {\n        const tabId = btn.getAttribute(\"data-tab\");\n        \n        tabBtns.forEach(b => b.classList.remove(\"active\"));\n        btn.classList.add(\"active\");\n\n        tabContents.forEach(content => {\n          if (content.id === tabId) {\n            (content as HTMLElement).style.display = \"block\";\n          } else {\n            (content as HTMLElement).style.display = \"none\";\n          }\n        });\n      });\n    });\n\n    filterSelect.addEventListener(\"change\", () => renderTable(filterSelect.value));\n    container.querySelectorAll(\".save-btn\").forEach(btn => btn.addEventListener(\"click\", handleSave));\n    closeSuccessBtn?.addEventListener(\"click\", () => {\n      if (successModal) successModal.style.display = \"none\";\n    });\n\n    renderTable();\n  }\n};\n", "import { Router } from \"./router\";\nimport { ViewContext } from \"./types\";\nimport { formatPLN } from \"../core/money\";\nimport { Cart } from \"../core/cart\";\nimport { downloadExcel } from \"./excel\";\nimport { CustomerData } from \"../core/types\";\nimport categories from \"../../data/categories.json\";\nimport { categories as categoryModules } from \"../categories/index\";\nimport { CONFIG } from \"../core/config\";\nimport { SettingsView } from \"./views/settings\";\n\nconst cart = new Cart();\n\nfunction updateCartUI() {\n  const listEl = document.getElementById(\"basket-items\");\n  const totalEl = document.getElementById(\"basket-total\");\n  const debugEl = document.getElementById(\"json-preview\");\n\n  if (!listEl || !totalEl || !debugEl) return;\n\n  const items = cart.getItems();\n\n  if (items.length === 0) {\n    listEl.innerHTML = `\n      <p style=\"color: #999; text-align: center; padding: 20px;\">\n        Brak pozycji<br>\n        <small>Kliknij \u201EDodaj\u201D, aby zbudowa\u0107 list\u0119.</small>\n      </p>\n    `;\n    totalEl.textContent = '0,00 z\u0142';\n  } else {\n    listEl.innerHTML = items.map((item, idx) => `\n      <div class=\"basket-item\" style=\"padding: 12px; border-radius: 8px; margin-bottom: 8px;\">\n        <div style=\"display: flex; justify-content: space-between; align-items: start;\">\n          <div style=\"flex: 1; min-width: 0;\">\n            <strong style=\"color: #003B5C; font-size: 14px; display: block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\">\n              ${item.category}: ${item.name}\n            </strong>\n            <p style=\"color: #64748b; font-size: 12px; margin: 4px 0 0 0;\">\n              ${item.optionsHint} (${item.quantity} ${item.unit})\n            </p>\n          </div>\n          <div style=\"text-align: right; margin-left: 10px; flex-shrink: 0;\">\n            <strong style=\"color: #667eea; font-size: 14px;\">${formatPLN(item.totalPrice)}</strong>\n            <button onclick=\"window.removeItem(${idx})\" style=\"display: block; width: 100%; margin-top: 4px; background: none; border: none; color: #f56565; cursor: pointer; font-size: 12px; text-align: right; padding: 0;\">\u2715 usu\u0144</button>\n          </div>\n        </div>\n      </div>\n    `).join(\"\");\n\n    const total = cart.getGrandTotal();\n    totalEl.innerText = formatPLN(total);\n  }\n\n  debugEl.innerText = JSON.stringify(items.map(i => i.payload), null, 2);\n}\n\n// Global exposure for the 'onclick' in generated HTML\n(window as any).removeItem = (idx: number) => {\n  cart.removeItem(idx);\n  updateCartUI();\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const viewContainer = document.getElementById(\"viewContainer\");\n  const categorySelector = document.getElementById(\"categorySelector\") as HTMLSelectElement;\n  const categorySearch = document.getElementById(\"categorySearch\") as HTMLInputElement;\n  const globalExpress = document.getElementById(\"tryb-express\") as HTMLInputElement;\n\n  if (!viewContainer || !categorySelector || !globalExpress || !categorySearch) return;\n\n  const getCtx = (): ViewContext => ({\n    cart: {\n      addItem: (item) => {\n        cart.addItem(item);\n        updateCartUI();\n      }\n    },\n    addToBasket: (item) => {\n      cart.addItem({\n        id: `item-${Date.now()}`,\n        category: item.category,\n        name: item.description || \"Produkt\",\n        quantity: 1,\n        unit: \"szt.\",\n        unitPrice: item.price,\n        isExpress: globalExpress.checked,\n        totalPrice: item.price,\n        optionsHint: item.description || \"\",\n        payload: item\n      });\n      updateCartUI();\n    },\n    expressMode: globalExpress.checked,\n    updateLastCalculated: (price, hint) => {\n      const currentPriceEl = document.getElementById(\"last-calculated\");\n      const currentHintEl = document.getElementById(\"currentHint\");\n      if (currentPriceEl) currentPriceEl.innerText = formatPLN(price);\n      if (currentHintEl) currentHintEl.innerText = hint ? `(${hint})` : \"\";\n    }\n  });\n\n  const router = new Router(viewContainer, getCtx);\n  router.setCategories(categories);\n  \n  // Register all categories from the index\n  categoryModules.forEach(module => {\n    router.addRoute(module);\n  });\n\n  // Register settings view\n  router.addRoute(SettingsView);\n\n  // Populate category selector with optgroups\n  const groups: Record<string, HTMLOptGroupElement> = {};\n  categories.forEach(cat => {\n    const groupName = (cat as any).group || \"Inne\";\n    if (!groups[groupName]) {\n      const group = document.createElement(\"optgroup\");\n      group.label = groupName;\n      categorySelector.appendChild(group);\n      groups[groupName] = group;\n    }\n\n    const opt = document.createElement(\"option\");\n    opt.value = cat.id;\n    opt.innerText = `${cat.icon} ${cat.name}`;\n    if (!cat.implemented) {\n      opt.disabled = true;\n      opt.innerText += \" (wkr\u00F3tce)\";\n    }\n    groups[groupName].appendChild(opt);\n  });\n\n  categorySelector.addEventListener(\"change\", () => {\n    const val = categorySelector.value;\n    if (val) {\n      window.location.hash = `#/${val}`;\n    } else {\n      window.location.hash = \"#/\";\n    }\n  });\n\n  categorySearch.addEventListener(\"input\", () => {\n    const filter = categorySearch.value.toLowerCase();\n    const options = Array.from(categorySelector.options);\n    options.forEach((opt, idx) => {\n      if (idx === 0) return; // Skip \"Wybierz kategori\u0119...\"\n      const text = opt.text.toLowerCase();\n      (opt as any).hidden = !text.includes(filter);\n    });\n  });\n\n  categorySearch.addEventListener(\"keydown\", (e) => {\n    if (e.key === \"Enter\") {\n      const filter = categorySearch.value.toLowerCase();\n      const firstVisible = Array.from(categorySelector.options).find((opt, idx) => {\n        return idx > 0 && !(opt as any).hidden && !(opt as any).disabled;\n      });\n      if (firstVisible) {\n        categorySelector.value = firstVisible.value;\n        window.location.hash = `#/${firstVisible.value}`;\n        categorySearch.value = \"\";\n      }\n    }\n  });\n\n  // Keep selector in sync with hash\n  window.addEventListener(\"hashchange\", () => {\n    const hash = window.location.hash || \"#/\";\n    const path = hash.slice(2); // remove #/\n    categorySelector.value = path;\n  });\n\n  // Re-render view when express mode changes\n  globalExpress.addEventListener(\"change\", () => {\n    // Triger route refresh\n    const currentHash = window.location.hash;\n    window.location.hash = \"\";\n    window.location.hash = currentHash;\n  });\n\n  // Clear basket\n  document.getElementById(\"clear-basket\")?.addEventListener(\"click\", () => {\n    cart.clear();\n    updateCartUI();\n  });\n\n  // Excel download\n  document.getElementById(\"export-excel\")?.addEventListener(\"click\", () => {\n    const customer: CustomerData = {\n      name: (document.getElementById(\"client-name\") as HTMLInputElement).value || \"Anonim\",\n      phone: (document.getElementById(\"client-phone\") as HTMLInputElement).value || \"-\",\n      email: (document.getElementById(\"client-email\") as HTMLInputElement).value || \"-\",\n      priority: (document.getElementById(\"priority\") as HTMLSelectElement).value\n    };\n\n    if (cart.isEmpty()) {\n      alert(\"Lista jest pusta!\");\n      return;\n    }\n\n    downloadExcel(cart.getItems(), customer);\n  });\n\n  // Copy JSON\n  document.getElementById(\"copy-json\")?.addEventListener(\"click\", () => {\n    const items = cart.getItems();\n    const json = JSON.stringify(items.map(i => i.payload), null, 2);\n    navigator.clipboard.writeText(json).then(() => {\n      alert(\"JSON skopiowany do schowka!\");\n    });\n  });\n\n  updateCartUI();\n  router.start();\n\n  // Settings Logic\n  const settingsBtn = document.getElementById(\"settings-btn\");\n  const pinModal = document.getElementById(\"pin-modal\");\n  const pinInput = document.getElementById(\"pin-input\") as HTMLInputElement;\n  const pinSubmit = document.getElementById(\"pin-submit\");\n  const pinCancel = document.getElementById(\"pin-cancel\");\n  const pinError = document.getElementById(\"pin-error\");\n\n  settingsBtn?.addEventListener(\"click\", () => {\n    if (pinModal) pinModal.style.display = \"flex\";\n    pinInput?.focus();\n  });\n\n  pinCancel?.addEventListener(\"click\", () => {\n    if (pinModal) pinModal.style.display = \"none\";\n    if (pinInput) pinInput.value = \"\";\n    if (pinError) pinError.style.display = \"none\";\n  });\n\n  const verifyPin = () => {\n    if (pinInput?.value === CONFIG.SETTINGS_PIN) {\n      if (pinModal) pinModal.style.display = \"none\";\n      pinInput.value = \"\";\n      if (pinError) pinError.style.display = \"none\";\n      window.location.hash = \"#/settings\";\n    } else {\n      if (pinError) pinError.style.display = \"block\";\n      if (pinInput) {\n        pinInput.value = \"\";\n        pinInput.focus();\n      }\n    }\n  };\n\n  pinSubmit?.addEventListener(\"click\", verifyPin);\n  pinInput?.addEventListener(\"keydown\", (e) => {\n    if (e.key === \"Enter\") verifyPin();\n  });\n});\n\n// Service Worker Registration\nif (\"serviceWorker\" in navigator) {\n  window.addEventListener(\"load\", () => {\n    navigator.serviceWorker.register(\"./sw.js\")\n      .then(reg => console.log(\"SW registered\", reg))\n      .catch(err => console.error(\"SW failed\", err));\n  });\n}\n"],
  "mappings": "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",
  "names": ["Router", "container", "getCtx", "categories", "view", "path", "catDef", "c", "backButton", "categoryContent", "groups", "cat", "g", "html", "groupName", "cats", "formatPLN", "amount", "Cart", "saved", "e", "item", "index", "sum", "downloadExcel", "cartItems", "customer", "data", "item", "worksheet", "workbook", "date", "filename", "categories_default", "sampleCategory", "container", "ctx", "addBtn", "qtyInput", "qty", "price", "formatPLN", "PriceStore", "_PriceStore", "stored", "e", "p", "id", "category", "name", "defaultValue", "currentValue", "updates", "value", "entry", "productId", "x", "r", "idx", "prefix", "tiers", "tier", "priceKey", "priceStore", "findTier", "tiers", "quantity", "sorted", "a", "b", "tier", "t", "nextTier", "applyMinimumRule", "rules", "m2Rule", "r", "calculatePrice", "table", "activeModifierIds", "effectiveQuantity", "dynamicTiers", "priceStore", "basePrice", "modifiersTotal", "appliedModifiers", "modId", "modifier", "modValue", "totalPrice", "plnRule", "solwent_plakaty_200g_default", "plakatyCategory", "container", "ctx", "table", "solwent_plakaty_200g_default", "qtyInput", "expressCheck", "resultEl", "addBtn", "update", "qty", "mods", "res", "calculatePrice", "formatPLN", "VOUCHERY_DEFAULTS", "getVoucheryPricing", "tier", "priceStore", "getPriceForQuantity", "qty", "isSingle", "pricing", "selectedTier", "voucheryCategory", "container", "ctx", "currentPrice", "calculateBtn", "addBtn", "totalDisplay", "breakdownDisplay", "format", "quantity", "sides", "paper", "basePrice", "getPriceForQuantity", "satinMod", "priceStore", "expressMod", "paperMultiplier", "expressMultiplier", "tierInfo", "tier", "DEFAULT_DYPLOMY_PRICING", "getPriceForQuantity", "qty", "tiers", "priceStore", "t", "selectedTier", "tier", "dyplomyCategory", "container", "ctx", "currentPrice", "calculateBtn", "addBtn", "totalDisplay", "breakdownDisplay", "quantity", "gramMod", "finishMod", "basePrice", "getPriceForQuantity", "percentageSum", "tiers", "priceStore", "DEFAULT_DYPLOMY_PRICING", "t", "selectedTier", "tier", "gramature", "finish", "DEFAULT_WIZYTOWKI_PRICING", "getPriceForQuantity", "format", "qty", "foiled", "defaultTiers", "type", "tiers", "priceStore", "t", "selectedTier", "tier", "wizytowkiCategory", "container", "ctx", "currentPrice", "calculateBtn", "addBtn", "totalDisplay", "breakdownDisplay", "format", "quantity", "finish", "gramMod", "getPriceForQuantity", "finishMod", "basePrice", "percentageSum", "finishText", "gramText", "zaproszenia_kreda_default", "calculateZaproszeniaKreda", "options", "format", "qty", "sides", "isFolded", "gramMod", "finishMod", "express", "formatData", "zaproszenia_kreda_default", "sidesKey", "typeKey", "priceTable", "sortedTiers", "a", "b", "selectedTier", "tier", "rawBasePrice", "ps", "priceStore", "priceId", "priceName", "basePrice", "modifiers", "modifiersTotal", "appliedModifiers", "mod", "totalPrice", "ZaproszeniaKredaView", "container", "ctx", "response", "formatSel", "sidesSel", "foldedCheck", "qtyInput", "gramSel", "finishSel", "calcBtn", "addToCartBtn", "resultArea", "calculate", "options", "result", "calculateZaproszeniaKreda", "formatPLN", "ulotki_cyfrowe_jednostronne_default", "getUlotkiJednostronneTable", "formatKey", "mode", "modeData", "ulotki_cyfrowe_jednostronne_default", "formatData", "quoteJednostronne", "options", "table", "activeModifiers", "calculatePrice", "UlotkiJednostronneView", "container", "ctx", "response", "err", "formatSelect", "qtyInput", "addToCartBtn", "resultDisplay", "totalPriceSpan", "unitPriceSpan", "displayQtySpan", "expressHint", "individualQuote", "currentResult", "currentOptions", "calculate", "mode", "qty", "format", "result", "quoteJednostronne", "formatPLN", "radio", "expressLabel", "modeLabel", "banner_default", "calculateBanner", "options", "tableData", "banner_default", "materialData", "m", "category", "prefix", "dynamicTiers", "priceStore", "dynamicModifiers", "mod", "priceTable", "activeModifiers", "calculatePrice", "BannerView", "container", "ctx", "response", "err", "materialSelect", "areaInput", "oczkowanieCheckbox", "calculateBtn", "addToCartBtn", "resultDisplay", "unitPriceSpan", "totalPriceSpan", "expressHint", "currentResult", "currentOptions", "result", "calculateBanner", "formatPLN", "matName", "opts", "wlepki_naklejki_exports", "__export", "category", "wlepki_naklejki_default", "groups", "modifiers", "calculateWlepki", "input", "tableData", "wlepki_naklejki_exports", "groupData", "g", "priceTable", "activeModifiers", "calculatePrice", "WlepkiView", "container", "ctx", "tableData", "wlepki_naklejki_exports", "response", "err", "groupSelect", "areaInput", "calcBtn", "addBtn", "resultDiv", "unitPriceEl", "totalPriceEl", "currentResult", "currentInput", "calculate", "modCheckboxes", "modifiers", "cb", "result", "calculateWlepki", "formatPLN", "group", "modsLabel", "mId", "m", "mod", "roll_up_default", "calculateRollUp", "options", "formatData", "roll_up_default", "category", "priceTable", "area", "printPerM2", "priceStore", "labor", "pricePerSzt", "express", "prefix", "dynamicTiers", "activeModifiers", "calculatePrice", "RollUpView", "container", "ctx", "response", "typeSel", "formatSel", "qtyInput", "calcBtn", "addToCartBtn", "resultArea", "calculate", "options", "result", "calculateRollUp", "formatPLN", "loadCategoryHTML", "filename", "response", "createHTMLCategory", "id", "name", "container", "ctx", "html", "attachCategoryEventListeners", "error", "btn", "action", "DrukCADAdvancedView", "container", "ctx", "response", "err", "ps", "priceStore", "cat", "PRICES", "FORMATS", "STANDARD_WIDTHS", "TOLERANCE", "filesData", "isColor", "dpi", "fileInput", "uploadZone", "dpiInput", "colorToggle", "colorSwitch", "filesTableWrapper", "filesTableBody", "summaryPanel", "summaryGrid", "clearBtn", "addAllToCartBtn", "pxToMm", "px", "findClosestWidth", "width", "prev", "curr", "isStandardWidth", "detectFormat", "widthMm", "heightMm", "h", "minDim", "maxDim", "name", "dims", "fw", "fh", "isWithinTolerance", "calculatePrintPrice", "fileData", "mode", "format", "isFormatowy", "widthCategory", "pricePerMb", "lengthMeters", "calculateFoldingPrice", "areaM2", "calculateScanPrice", "longerSide", "updateDisplay", "file", "idx", "printPrice", "foldingPrice", "scanPrice", "totalPrice", "typeBadge", "el", "e", "total", "f", "files", "img", "reader", "re", "w", "pickTier", "tiers", "qty", "t", "getPrintTiers", "id", "cat", "defaults", "priceStore", "PRICE", "CAD_PRICE", "FOLD_PRICE", "priceStore", "WF_SCAN_PRICE_CM", "bizHelper", "group", "format", "type", "prices", "result", "qty", "price", "id", "name", "BIZ", "initRegistry", "p", "PRICE", "s", "e", "c", "CAD_PRICE", "b", "f", "w", "biz", "calculateSimplePrint", "options", "PRICE", "tiers", "tier", "pickTier", "unitPrice", "total", "emailItemTotal", "inkItemTotal", "calculateSimpleScan", "calculateDrukA4A3Skan", "options", "pricing", "format", "printResult", "calculateSimplePrint", "scanResult", "calculateSimpleScan", "baseTotal", "finalTotal", "DrukA4A3SkanView", "container", "ctx", "response", "err", "modeSelect", "formatSelect", "printQtyInput", "emailCheck", "surchargeCheck", "surchargeQtyInput", "surchargeQtyRow", "scanTypeSelect", "scanQtyInput", "scanQtyRow", "calculateBtn", "addToCartBtn", "resultDisplay", "totalPriceSpan", "expressHint", "tierTable", "updateTiers", "mode", "format", "tiers", "PRICE", "t", "currentResult", "currentOptions", "result", "calculateDrukA4A3Skan", "formatPLN", "timestamp", "expressFactor", "details", "mainPrice", "emailPrice", "surchargePrice", "categories", "sampleCategory", "plakatyCategory", "voucheryCategory", "dyplomyCategory", "wizytowkiCategory", "ZaproszeniaKredaView", "UlotkiJednostronneView", "BannerView", "WlepkiView", "RollUpView", "DrukCADAdvancedView", "DrukA4A3SkanView", "createHTMLCategory", "CONFIG", "SettingsView", "container", "ctx", "entries", "priceStore", "categories", "e", "cat", "tableBody", "filterSelect", "successModal", "closeSuccessBtn", "renderTable", "filter", "filteredEntries", "handleSave", "inputs", "updates", "changedCount", "input", "val", "newPrice", "id", "entry", "updatedEntries", "tabBtns", "tabContents", "btn", "tabId", "b", "content", "cart", "Cart", "updateCartUI", "listEl", "totalEl", "debugEl", "items", "item", "idx", "formatPLN", "total", "viewContainer", "categorySelector", "categorySearch", "globalExpress", "getCtx", "price", "hint", "currentPriceEl", "currentHintEl", "router", "Router", "categories_default", "categories", "module", "SettingsView", "groups", "cat", "groupName", "group", "opt", "val", "filter", "text", "e", "firstVisible", "path", "currentHash", "customer", "downloadExcel", "json", "i", "settingsBtn", "pinModal", "pinInput", "pinSubmit", "pinCancel", "pinError", "verifyPin", "CONFIG", "reg", "err"]
}
