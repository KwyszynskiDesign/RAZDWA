{
  "version": 3,
  "sources": ["../../src/ui/router.ts", "../../src/core/money.ts", "../../src/core/cart.ts", "../../src/ui/excel.ts", "../../data/categories.json", "../../src/categories/sample.ts", "../../src/core/pricing.ts", "../../data/normalized/solwent-plakaty-200g.json", "../../src/categories/plakaty.ts", "../../src/categories/vouchery.ts", "../../data/normalized/dyplomy.json", "../../src/categories/dyplomy.ts", "../../src/ui/views/dyplomy.ts", "../../src/core/compat.ts", "../../src/core/compat-logic.ts", "../../src/categories/wizytowki-druk-cyfrowy.ts", "../../src/ui/views/wizytowki-druk-cyfrowy.ts", "../../data/normalized/zaproszenia-kreda.json", "../../src/categories/zaproszenia-kreda.ts", "../../src/ui/views/zaproszenia-kreda.ts", "../../data/normalized/ulotki-cyfrowe-dwustronne.json", "../../src/categories/ulotki-cyfrowe-dwustronne.ts", "../../src/ui/views/ulotki-cyfrowe-dwustronne.ts", "../../data/normalized/ulotki-cyfrowe-jednostronne.json", "../../src/categories/ulotki-cyfrowe-jednostronne.ts", "../../src/ui/views/ulotki-cyfrowe-jednostronne.ts", "../../data/normalized/banner.json", "../../src/categories/banner.ts", "../../src/ui/views/banner.ts", "../../data/normalized/wlepki-naklejki.json", "../../src/categories/wlepki-naklejki.ts", "../../src/ui/views/wlepki-naklejki.ts", "../../data/normalized/roll-up.json", "../../src/categories/roll-up.ts", "../../src/ui/views/roll-up.ts", "../../src/categories/loader.ts", "../../src/categories/index.ts", "../../src/ui/main.ts"],
  "sourcesContent": ["import { View, ViewContext } from \"./types\";\n\nexport type CategoryModule = View;\nexport type CategoryContext = ViewContext;\n\nexport class Router {\n  private routes: Map<string, View> = new Map();\n  private currentView: View | null = null;\n  private container: HTMLElement;\n  private getCtx: () => ViewContext;\n  private categories: any[] = [];\n\n  constructor(container: HTMLElement, getCtx: () => ViewContext) {\n    this.container = container;\n    this.getCtx = getCtx;\n    window.addEventListener(\"hashchange\", () => this.handleRoute());\n  }\n\n  setCategories(categories: any[]) {\n    this.categories = categories;\n  }\n\n  addRoute(view: View) {\n    this.routes.set(view.id, view);\n  }\n\n  handleRoute() {\n    const hash = window.location.hash || \"#/\";\n    const path = hash.slice(2); // remove #/\n\n    if (this.currentView && this.currentView.unmount) {\n      this.currentView.unmount();\n    }\n\n    this.container.innerHTML = \"\";\n\n    const view = this.routes.get(path);\n    if (view) {\n      this.currentView = view;\n      view.mount(this.container, this.getCtx());\n    } else {\n      this.renderHome();\n    }\n  }\n\n  private renderHome() {\n    this.container.innerHTML = `\n      <div class=\"category-grid\">\n        ${this.categories.map(cat => `\n          <div class=\"category-card ${cat.implemented ? '' : 'coming-soon'}\"\n               ${cat.implemented ? `onclick=\"window.location.hash='#/${cat.id}'\"` : ''}>\n            <div class=\"category-icon\">${cat.icon}</div>\n            <div class=\"category-name\">${cat.name}</div>\n            ${cat.implemented ? '' : '<div class=\"badge\">Wkr\u00F3tce</div>'}\n          </div>\n        `).join(\"\")}\n      </div>\n    `;\n  }\n\n  start() {\n    this.handleRoute();\n  }\n}\n", "export function formatPLN(amount: number): string { return new Intl.NumberFormat(\"pl-PL\", { style: \"currency\", currency: \"PLN\" }).format(amount); }\n", "import { CartItem } from \"./types\";\n\nexport class Cart {\n  private items: CartItem[] = [];\n  private storageKey = \"razdwa-cart-v1\";\n\n  constructor() {\n    this.load();\n  }\n\n  private load() {\n    try {\n      const saved = localStorage.getItem(this.storageKey);\n      if (saved) {\n        this.items = JSON.parse(saved);\n      }\n    } catch (e) {\n      console.error(\"Failed to load cart from localStorage\", e);\n      this.items = [];\n    }\n  }\n\n  private save() {\n    try {\n      localStorage.setItem(this.storageKey, JSON.stringify(this.items));\n    } catch (e) {\n      console.error(\"Failed to save cart to localStorage\", e);\n    }\n  }\n\n  addItem(item: CartItem) {\n    this.items.push(item);\n    this.save();\n  }\n\n  removeItem(index: number) {\n    if (index >= 0 && index < this.items.length) {\n      this.items.splice(index, 1);\n      this.save();\n    }\n  }\n\n  clear() {\n    this.items = [];\n    this.save();\n  }\n\n  getItems(): CartItem[] {\n    return [...this.items];\n  }\n\n  getGrandTotal(): number {\n    return this.items.reduce((sum, item) => sum + item.totalPrice, 0);\n  }\n\n  isEmpty(): boolean {\n    return this.items.length === 0;\n  }\n}\n", "import { CartItem, CustomerData } from \"../core/types\";\n\ndeclare const XLSX: any;\n\nexport function downloadExcel(cartItems: CartItem[], customer: CustomerData) {\n  if (typeof XLSX === 'undefined') {\n    console.error(\"XLSX library not loaded from CDN\");\n    alert(\"B\u0142\u0105d: Biblioteka Excel nie zosta\u0142a wczytana.\");\n    return;\n  }\n\n  const data = cartItems.map(item => ({\n    \"Kategoria\": item.category,\n    \"Nazwa\": item.name,\n    \"Ilo\u015B\u0107\": item.quantity,\n    \"Jednostka\": item.unit,\n    \"Cena jedn.\": item.unitPrice,\n    \"Express (+20%)\": item.isExpress ? \"TAK\" : \"NIE\",\n    \"Cena ca\u0142kowita\": item.totalPrice,\n    \"Klient\": customer.name,\n    \"Telefon\": customer.phone,\n    \"Email\": customer.email,\n    \"Priorytet\": customer.priority\n  }));\n\n  const worksheet = XLSX.utils.json_to_sheet(data);\n  const workbook = XLSX.utils.book_new();\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Zam\u00F3wienie\");\n\n  // Generate filename with date\n  const date = new Date().toISOString().slice(0, 10);\n  const filename = `Zamowienie_${customer.name.replace(/\\s+/g, '_')}_${date}.xlsx`;\n\n  XLSX.writeFile(workbook, filename);\n}\n", "[\n  {\n    \"id\": \"druk-a4-a3\",\n    \"name\": \"Druk A4/A3 + skan\",\n    \"icon\": \"\uD83D\uDDA8\uFE0F\",\n    \"implemented\": true,\n    \"pricing\": {\n      \"print_bw\": [\n        { \"min\": 1, \"max\": 5, \"a4\": 0.90, \"a3\": 1.70 },\n        { \"min\": 6, \"max\": 20, \"a4\": 0.60, \"a3\": 1.10 },\n        { \"min\": 21, \"max\": 100, \"a4\": 0.35, \"a3\": 0.70 },\n        { \"min\": 101, \"max\": 500, \"a4\": 0.30, \"a3\": 0.60 },\n        { \"min\": 501, \"max\": 999, \"a4\": 0.23, \"a3\": 0.45 },\n        { \"min\": 1000, \"max\": 4999, \"a4\": 0.19, \"a3\": 0.33 },\n        { \"min\": 5000, \"max\": null, \"a4\": 0.15, \"a3\": 0.30 }\n      ],\n      \"print_color\": [\n        { \"min\": 1, \"max\": 10, \"a4\": 2.40, \"a3\": 4.80 },\n        { \"min\": 11, \"max\": 40, \"a4\": 2.20, \"a3\": 4.20 },\n        { \"min\": 41, \"max\": 100, \"a4\": 2.00, \"a3\": 3.80 },\n        { \"min\": 101, \"max\": 250, \"a4\": 1.80, \"a3\": 3.00 },\n        { \"min\": 251, \"max\": 500, \"a4\": 1.60, \"a3\": 2.50 },\n        { \"min\": 501, \"max\": 999, \"a4\": 1.40, \"a3\": 1.90 },\n        { \"min\": 1000, \"max\": null, \"a4\": 1.10, \"a3\": 1.60 }\n      ],\n      \"scan_auto\": [\n        { \"min\": 1, \"max\": 9, \"price\": 1.00 },\n        { \"min\": 10, \"max\": 49, \"price\": 0.50 },\n        { \"min\": 50, \"max\": 99, \"price\": 0.40 },\n        { \"min\": 100, \"max\": null, \"price\": 0.25 }\n      ],\n      \"scan_manual\": [\n        { \"min\": 1, \"max\": 4, \"price\": 2.00 },\n        { \"min\": 5, \"max\": null, \"price\": 1.00 }\n      ],\n      \"email_cost\": 1.00,\n      \"surcharge_factor\": 0.50\n    }\n  },\n  {\n    \"id\": \"druk-cad\",\n    \"name\": \"Druk CAD wielkoformatowy\",\n    \"icon\": \"\uD83D\uDCD0\",\n    \"implemented\": true,\n    \"format_prices\": {\n      \"bw\": {\n        \"A0+\": { \"length\": 1292, \"price\": 12.50 },\n        \"A0\": { \"length\": 1189, \"price\": 11.00 },\n        \"A1\": { \"length\": 841, \"price\": 6.00 },\n        \"A2\": { \"length\": 594, \"price\": 4.00 },\n        \"A3\": { \"length\": 420, \"price\": 2.50 }\n      },\n      \"color\": {\n        \"A0+\": { \"length\": 1292, \"price\": 26.00 },\n        \"A0\": { \"length\": 1189, \"price\": 24.00 },\n        \"A1\": { \"length\": 841, \"price\": 12.00 },\n        \"A2\": { \"length\": 594, \"price\": 8.50 },\n        \"A3\": { \"length\": 420, \"price\": 5.30 }\n      }\n    },\n    \"meter_prices\": {\n      \"bw\": {\n        \"A0+\": 10.00,\n        \"A0\": 9.00,\n        \"A1\": 5.00,\n        \"A2\": 4.50,\n        \"A3\": 3.50\n      },\n      \"color\": {\n        \"A0+\": 21.00,\n        \"A0\": 20.00,\n        \"A1\": 14.50,\n        \"A2\": 13.90,\n        \"A3\": 12.00\n      }\n    }\n  },\n  { \"id\": \"solwent-plakaty\", \"name\": \"Solwent - Plakaty\", \"icon\": \"\uD83D\uDDBC\uFE0F\", \"implemented\": true },\n  { \"id\": \"vouchery\", \"name\": \"Vouchery\", \"icon\": \"\uD83C\uDF9F\uFE0F\", \"implemented\": true },\n  { \"id\": \"dyplomy\", \"name\": \"Dyplomy\", \"icon\": \"\uD83D\uDCDC\", \"implemented\": true },\n  { \"id\": \"wizytowki-druk-cyfrowy\", \"name\": \"Wizyt\u00F3wki - druk cyfrowy\", \"icon\": \"\uD83D\uDCC7\", \"implemented\": true },\n  { \"id\": \"zaproszenia-kreda\", \"name\": \"Zaproszenia KREDA\", \"icon\": \"\u2709\uFE0F\", \"implemented\": true },\n  { \"id\": \"ulotki-cyfrowe-dwustronne\", \"name\": \"Ulotki - Cyfrowe Dwustronne\", \"icon\": \"\uD83D\uDCC4\", \"implemented\": true },\n  { \"id\": \"ulotki-cyfrowe-jednostronne\", \"name\": \"Ulotki - Cyfrowe Jednostronne\", \"icon\": \"\uD83D\uDCC4\", \"implemented\": true },\n  { \"id\": \"banner\", \"name\": \"Bannery\", \"icon\": \"\uD83C\uDFC1\", \"implemented\": true },\n  { \"id\": \"wlepki-naklejki\", \"name\": \"Wlepki / Naklejki\", \"icon\": \"\uD83C\uDFF7\uFE0F\", \"implemented\": true },\n  { \"id\": \"roll-up\", \"name\": \"Roll-up\", \"icon\": \"\u2195\uFE0F\", \"implemented\": true },\n  {\n    \"id\": \"folia-szroniona\",\n    \"name\": \"Folia szroniona\",\n    \"icon\": \"\u2744\uFE0F\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"laminowanie\",\n    \"name\": \"Laminowanie\",\n    \"icon\": \"\u2728\",\n    \"implemented\": true\n  },\n  {\n    \"id\": \"cad-ops\",\n    \"name\": \"CAD: sk\u0142adanie / skan\",\n    \"icon\": \"\uD83D\uDCCF\",\n    \"implemented\": true\n  }\n]\n", "import { CategoryModule, CategoryContext } from \"../ui/router\";\nimport { formatPLN } from \"../core/money\";\n\nexport const sampleCategory: CategoryModule = {\n  id: \"sample\",\n  name: \"Sample Category\",\n  mount: (container: HTMLElement, ctx: CategoryContext) => {\n    container.innerHTML = `\n      <div class=\"category-view\">\n        <h2>Przyk\u0142adowa Kategoria</h2>\n        <div class=\"form\">\n          <div class=\"row\">\n            <label>Ilo\u015B\u0107</label>\n            <input type=\"number\" id=\"sampleQty\" value=\"1\" min=\"1\">\n          </div>\n          <div class=\"row\">\n            <label>Cena jednostkowa</label>\n            <span>10,00 z\u0142</span>\n          </div>\n          <div class=\"actions\" style=\"margin-top: 20px;\">\n            <button id=\"addSampleBtn\" class=\"primary\">Dodaj do koszyka</button>\n          </div>\n        </div>\n      </div>\n    `;\n\n    const addBtn = container.querySelector(\"#addSampleBtn\");\n    const qtyInput = container.querySelector(\"#sampleQty\") as HTMLInputElement;\n\n    addBtn?.addEventListener(\"click\", () => {\n      const qty = parseInt(qtyInput.value) || 1;\n      const price = qty * 10;\n      ctx.cart.addItem({\n        categoryId: \"sample\",\n        categoryName: \"Sample Category\",\n        details: { qty },\n        price: price\n      });\n      alert(`Dodano do koszyka: ${qty} szt. za ${formatPLN(price)}`);\n    });\n  },\n  unmount: () => {\n    console.log(\"Unmounting sample category\");\n  }\n};\n", "import { PriceTable, Tier, Rule, Modifier, CalculationResult } from \"./types\";\n\nexport function findTier(tiers: Tier[], quantity: number): Tier {\n  const sorted = [...tiers].sort((a, b) => a.min - b.min);\n\n  // 1. Exact range match\n  const tier = sorted.find(\n    (t) => quantity >= t.min && (t.max === null || quantity <= t.max)\n  );\n  if (tier) return tier;\n\n  // 2. \"Point-based\" tiers fallback: find first tier where min >= quantity\n  const nextTier = sorted.find((t) => t.min >= quantity);\n  if (nextTier) return nextTier;\n\n  // 3. Last tier fallback\n  return sorted[sorted.length - 1];\n}\n\nexport function applyMinimumRule(quantity: number, rules?: Rule[]): number {\n  if (!rules) return quantity;\n\n  const m2Rule = rules.find(r => r.type === \"minimum\" && r.unit === \"m2\");\n  if (m2Rule && quantity < m2Rule.value) {\n    return m2Rule.value;\n  }\n\n  return quantity;\n}\n\nexport function calculatePrice(\n  table: PriceTable,\n  quantity: number,\n  activeModifierIds: string[] = []\n): CalculationResult {\n  const effectiveQuantity = applyMinimumRule(quantity, table.rules);\n  const tier = findTier(table.tiers, effectiveQuantity);\n\n  let basePrice = 0;\n  if (table.pricing === \"per_unit\") {\n    basePrice = effectiveQuantity * tier.price;\n  } else {\n    basePrice = tier.price;\n  }\n\n  let modifiersTotal = 0;\n  const appliedModifiers: string[] = [];\n\n  if (table.modifiers) {\n    for (const modId of activeModifierIds) {\n      const modifier = table.modifiers.find(m => m.id === modId);\n      if (modifier) {\n        appliedModifiers.push(modifier.name);\n        if (modifier.type === \"percent\") {\n          modifiersTotal += basePrice * modifier.value;\n        } else if (modifier.type === \"fixed_per_unit\") {\n          modifiersTotal += modifier.value * effectiveQuantity;\n        } else {\n          modifiersTotal += modifier.value;\n        }\n      }\n    }\n  }\n\n  let totalPrice = basePrice + modifiersTotal;\n\n  const plnRule = table.rules?.find(r => r.type === \"minimum\" && r.unit === \"pln\");\n  if (plnRule && totalPrice < plnRule.value) {\n    totalPrice = plnRule.value;\n  }\n\n  return {\n    basePrice,\n    effectiveQuantity,\n    tierPrice: tier.price,\n    modifiersTotal,\n    totalPrice: parseFloat(totalPrice.toFixed(2)),\n    appliedModifiers\n  };\n}\n", "{ \"id\": \"solwent-plakaty-200g\", \"title\": \"SOLWENT - PLAKATY (Papier 200g po\u0142ysk)\", \"unit\": \"m2\", \"pricing\": \"per_unit\", \"tiers\": [ { \"min\": 0, \"max\": 3, \"price\": 70 }, { \"min\": 3, \"max\": 9, \"price\": 65 }, { \"min\": 9, \"max\": 20, \"price\": 59 }, { \"min\": 20, \"max\": 40, \"price\": 53 }, { \"min\": 40, \"max\": null, \"price\": 45 } ], \"rules\": [ { \"type\": \"minimum\", \"unit\": \"m2\", \"value\": 1 } ], \"modifiers\": [ { \"id\": \"EXPRESS\", \"type\": \"percent\", \"value\": 20 } ] }\n", "import { CategoryModule, CategoryContext } from \"../ui/router\";\nimport { calculatePrice } from \"../core/pricing\";\nimport { formatPLN } from \"../core/money\";\nimport plakatyData from \"../../data/normalized/solwent-plakaty-200g.json\";\nimport { PriceTable } from \"../core/types\";\n\nexport const plakatyCategory: CategoryModule = {\n  id: \"solwent-plakaty\",\n  name: \"Solwent - Plakaty\",\n  mount: (container: HTMLElement, ctx: CategoryContext) => {\n    const table = plakatyData as PriceTable;\n\n    container.innerHTML = `\n      <div class=\"category-view\">\n        <h2>${table.title}</h2>\n        <div class=\"form\" style=\"display: grid; gap: 15px;\">\n          <div class=\"row\" style=\"display: flex; justify-content: space-between; align-items: center;\">\n            <label>Powierzchnia (m2)</label>\n            <input type=\"number\" id=\"plakatyQty\" value=\"1\" min=\"0.1\" step=\"0.1\" style=\"width: 100px;\">\n          </div>\n          <div class=\"row\" style=\"display: flex; align-items: center; gap: 10px;\">\n            <input type=\"checkbox\" id=\"plakatyExpress\" style=\"width: auto;\">\n            <label for=\"plakatyExpress\">Tryb EXPRESS (+20%)</label>\n          </div>\n\n          <div class=\"divider\"></div>\n\n          <div class=\"summary-box\" style=\"background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px;\">\n            <div style=\"display: flex; justify-content: space-between;\">\n              <span>Cena:</span>\n              <strong id=\"plakatyResult\">0,00 z\u0142</strong>\n            </div>\n          </div>\n\n          <div class=\"actions\">\n            <button id=\"addPlakatyBtn\" class=\"primary\" style=\"width: 100%;\">Dodaj do zam\u00F3wienia</button>\n          </div>\n        </div>\n      </div>\n    `;\n\n    const qtyInput = container.querySelector(\"#plakatyQty\") as HTMLInputElement;\n    const expressCheck = container.querySelector(\"#plakatyExpress\") as HTMLInputElement;\n    const resultEl = container.querySelector(\"#plakatyResult\") as HTMLElement;\n    const addBtn = container.querySelector(\"#addPlakatyBtn\") as HTMLButtonElement;\n\n    function update() {\n      const qty = parseFloat(qtyInput.value) || 0;\n      const mods = expressCheck.checked ? [\"EXPRESS\"] : [];\n      try {\n        const res = calculatePrice(qty, table, mods);\n        resultEl.textContent = formatPLN(res.totalPrice);\n      } catch (e) {\n        resultEl.textContent = \"B\u0142\u0105d\";\n      }\n    }\n\n    qtyInput.addEventListener(\"input\", update);\n    expressCheck.addEventListener(\"change\", update);\n\n    addBtn.addEventListener(\"click\", () => {\n      const qty = parseFloat(qtyInput.value) || 0;\n      const mods = expressCheck.checked ? [\"EXPRESS\"] : [];\n      const res = calculatePrice(qty, table, mods);\n\n      ctx.cart.addItem({\n        categoryId: table.id,\n        categoryName: table.title,\n        details: { qty: `${qty} m2`, express: expressCheck.checked },\n        price: res.totalPrice\n      });\n    });\n\n    update();\n  }\n};\n", "import data from \"../../data/normalized/vouchery.json\";\nimport { CalculationResult } from \"../core/types\";\n\nexport interface VoucheryOptions {\n  qty: number;\n  sides: \"single\" | \"double\";\n  satin: boolean;\n  express: boolean;\n}\n\nexport function quoteVouchery(options: VoucheryOptions): any {\n  const tiers = data as any[];\n\n  // Find the exact tier or the next one\n  let tier = tiers.find(t => t.qty === options.qty);\n  if (!tier) {\n    // If not exact, find the first tier where t.qty >= options.qty\n    tier = tiers.find(t => t.qty >= options.qty);\n  }\n  if (!tier) {\n    tier = tiers[tiers.length - 1];\n  }\n\n  const basePrice = tier[options.sides];\n  let percentageSum = 0;\n\n  if (options.satin) {\n    percentageSum += 0.12;\n  }\n  if (options.express) {\n    percentageSum += 0.20;\n  }\n\n  const modifiersTotal = basePrice * percentageSum;\n  const total = basePrice + modifiersTotal;\n\n  return {\n    basePrice,\n    modifiersTotal: parseFloat(modifiersTotal.toFixed(2)),\n    totalPrice: parseFloat(total.toFixed(2))\n  };\n}\n\n// Keep the old export for compatibility if needed elsewhere\nexport const voucheryCategory: any = {\n    id: \"vouchery\",\n    name: \"Vouchery\"\n};\n", "{\n  \"name\": \"DYPLOMY - druk cyfrowy\",\n  \"modifiers\": {\n    \"satin\": 0.12,\n    \"express\": 0.20,\n    \"bulkDiscount\": 0.12,\n    \"bulkDiscountThreshold\": 6\n  },\n  \"formats\": {\n    \"DL\": {\n      \"name\": \"DL (99x210mm)\",\n      \"single\": { \"1\": 20, \"2\": 30, \"3\": 32, \"4\": 34, \"5\": 35, \"6\": 35, \"7\": 36, \"8\": 37, \"9\": 39, \"10\": 40, \"15\": 45, \"20\": 49, \"30\": 58, \"40\": 65, \"50\": 75, \"100\": 120 },\n      \"double\": { \"1\": 20, \"2\": 30, \"3\": 32, \"4\": 34, \"5\": 35, \"6\": 35, \"7\": 36, \"8\": 37, \"9\": 39, \"10\": 40, \"15\": 45, \"20\": 49, \"30\": 58, \"40\": 65, \"50\": 75, \"100\": 120 }\n    }\n  }\n}\n", "import { CalculationResult, Modifier } from \"../core/types\";\nimport data from \"../../data/normalized/dyplomy.json\";\n\nexport interface DyplomyOptions {\n  qty: number;\n  sides: number; // 1 or 2\n  isSatin: boolean;\n  express: boolean;\n}\n\nexport function calculateDyplomy(options: DyplomyOptions): CalculationResult {\n  const { qty, sides, isSatin, express } = options;\n\n  const formatData = data.formats.DL;\n  const sidesKey = sides === 1 ? \"single\" : \"double\";\n  const priceTable = (formatData as any)[sidesKey];\n\n  // Tier selection\n  const sortedTiers = Object.keys(priceTable)\n    .map(Number)\n    .sort((a, b) => a - b);\n\n  let selectedTier = sortedTiers[0];\n  for (const tier of sortedTiers) {\n    if (qty >= tier) {\n      selectedTier = tier;\n    }\n  }\n\n  const basePrice = priceTable[selectedTier.toString()];\n\n  const modifiers: Modifier[] = [];\n\n  // Bulk discount for qty >= 6\n  if (qty >= data.modifiers.bulkDiscountThreshold) {\n    modifiers.push({\n      id: \"bulk-discount\",\n      name: `Rabat -${data.modifiers.bulkDiscount * 100}% (od ${data.modifiers.bulkDiscountThreshold} szt)`,\n      type: \"percentage\",\n      value: -data.modifiers.bulkDiscount\n    });\n  }\n\n  if (isSatin) {\n    modifiers.push({\n      id: \"satin\",\n      name: \"Papier satynowy (+12%)\",\n      type: \"percentage\",\n      value: data.modifiers.satin\n    });\n  }\n  if (express) {\n    modifiers.push({\n      id: \"express\",\n      name: \"EXPRESS (+20%)\",\n      type: \"percentage\",\n      value: data.modifiers.express\n    });\n  }\n\n  let modifiersTotal = 0;\n  const appliedModifiers: string[] = [];\n\n  for (const mod of modifiers) {\n    if (mod.type === \"percent\" || (mod.type as any) === \"percentage\") {\n      modifiersTotal += basePrice * mod.value;\n      appliedModifiers.push(mod.name);\n    }\n  }\n\n  const totalPrice = basePrice + modifiersTotal;\n\n  return {\n    basePrice,\n    effectiveQuantity: qty,\n    tierPrice: basePrice / qty,\n    modifiersTotal,\n    totalPrice: Math.round(totalPrice * 100) / 100,\n    appliedModifiers\n  };\n}\n", "import { View, ViewContext } from \"../types\";\nimport { calculateDyplomy, DyplomyOptions } from \"../../categories/dyplomy\";\nimport { formatPLN } from \"../../core/money\";\n\nexport const DyplomyView: View = {\n  id: \"dyplomy\",\n  name: \"Dyplomy\",\n  async mount(container, ctx) {\n    const response = await fetch(\"categories/dyplomy.html\");\n    container.innerHTML = await response.text();\n\n    const sidesSel = container.querySelector(\"#dypSides\") as HTMLSelectElement;\n    const qtyInput = container.querySelector(\"#dypQty\") as HTMLInputElement;\n    const satinCheck = container.querySelector(\"#dypSatin\") as HTMLInputElement;\n    const calcBtn = container.querySelector(\"#calcBtn\") as HTMLButtonElement;\n    const addToCartBtn = container.querySelector(\"#addToCartBtn\") as HTMLButtonElement;\n    const resultArea = container.querySelector(\"#dypResult\") as HTMLElement;\n\n    const calculate = () => {\n      const options: DyplomyOptions = {\n        qty: parseInt(qtyInput.value) || 1,\n        sides: parseInt(sidesSel.value) || 1,\n        isSatin: satinCheck.checked,\n        express: ctx.expressMode\n      };\n\n      const result = calculateDyplomy(options);\n\n      resultArea.style.display = \"block\";\n      (container.querySelector(\"#resUnitPrice\") as HTMLElement).textContent = formatPLN(result.totalPrice / options.qty);\n      (container.querySelector(\"#resTotalPrice\") as HTMLElement).textContent = formatPLN(result.totalPrice);\n      (container.querySelector(\"#resDiscountHint\") as HTMLElement).style.display = result.appliedModifiers.includes(\"bulk-discount\") ? \"block\" : \"none\";\n      (container.querySelector(\"#resExpressHint\") as HTMLElement).style.display = options.express ? \"block\" : \"none\";\n      (container.querySelector(\"#resSatinHint\") as HTMLElement).style.display = options.isSatin ? \"block\" : \"none\";\n\n      ctx.updateLastCalculated(result.totalPrice, \"Dyplomy\");\n      return { options, result };\n    };\n\n    calcBtn.addEventListener(\"click\", () => calculate());\n\n    addToCartBtn.addEventListener(\"click\", () => {\n      const { options, result } = calculate();\n\n      ctx.cart.addItem({\n        id: `dyp-${Date.now()}`,\n        category: \"Dyplomy\",\n        name: `Dyplomy DL ${options.sides === 1 ? '1-str' : '2-str'}`,\n        quantity: options.qty,\n        unit: \"szt\",\n        unitPrice: result.totalPrice / options.qty,\n        isExpress: options.express,\n        totalPrice: result.totalPrice,\n        optionsHint: `${options.qty} szt, ${options.isSatin ? 'Satyna' : 'Kreda'}`,\n        payload: options\n      });\n    });\n\n    // Initial calculation\n    calculate();\n  }\n};\n", "/* Data and helpers from kalkulatorv2.html - cleaned up and synced with categories.json */\n\nexport function money(n: any) {\n  return (Math.round((Number(n) || 0) * 100) / 100).toFixed(2);\n}\n\nexport function pickTier(tiers: any[], qty: number) {\n  return tiers.find((t) => qty >= t.from && qty <= t.to) || null;\n}\n\nexport function pickNearestCeilKey(table: any, qty: number) {\n  const keys = Object.keys(table || {})\n    .map(Number)\n    .filter(Number.isFinite)\n    .sort((a, b) => a - b);\n  if (!keys.length) return null;\n  const k = keys.find((x) => qty <= x);\n  return k == null ? null : k;\n}\n\nexport const PRICE = {\n  print: {\n    bw: {\n      A4: [\n        { from: 1, to: 5, unit: 0.9 },\n        { from: 6, to: 20, unit: 0.6 },\n        { from: 21, to: 100, unit: 0.35 },\n        { from: 101, to: 500, unit: 0.3 },\n        { from: 501, to: 999, unit: 0.23 },\n        { from: 1000, to: 4999, unit: 0.19 },\n        { from: 5000, to: 99999, unit: 0.15 },\n      ],\n      A3: [\n        { from: 1, to: 5, unit: 1.7 },\n        { from: 6, to: 20, unit: 1.1 },\n        { from: 21, to: 100, unit: 0.7 },\n        { from: 101, to: 500, unit: 0.6 },\n        { from: 501, to: 999, unit: 0.45 },\n        { from: 1000, to: 99999, unit: 0.33 },\n      ],\n    },\n    color: {\n      A4: [\n        { from: 1, to: 10, unit: 2.4 },\n        { from: 11, to: 40, unit: 2.2 },\n        { from: 41, to: 100, unit: 2.0 },\n        { from: 101, to: 250, unit: 1.8 },\n        { from: 251, to: 500, unit: 1.6 },\n        { from: 501, to: 999, unit: 1.4 },\n        { from: 1000, to: 99999, unit: 1.1 },\n      ],\n      A3: [\n        { from: 1, to: 10, unit: 4.8 },\n        { from: 11, to: 40, unit: 4.2 },\n        { from: 41, to: 100, unit: 3.8 },\n        { from: 101, to: 250, unit: 3.0 },\n        { from: 251, to: 500, unit: 2.5 },\n        { from: 501, to: 999, unit: 1.9 },\n        { from: 1000, to: 99999, unit: 1.6 },\n      ],\n    },\n  },\n  scan: {\n    auto: [\n      { from: 1, to: 9, unit: 1.0 },\n      { from: 10, to: 49, unit: 0.5 },\n      { from: 50, to: 99, unit: 0.4 },\n      { from: 100, to: 999999999, unit: 0.25 },\n    ],\n    manual: [\n      { from: 1, to: 4, unit: 2.0 },\n      { from: 5, to: 999999999, unit: 1.0 },\n    ],\n  },\n  email_price: 1.0,\n};\n\nexport const CAD_PRICE: any = {\n  color: {\n    formatowe: { A0p: 26.0, A0: 24.0, A1: 12.0, A2: 8.5, A3: 5.3 },\n    mb: { A0p: 21.0, A0: 20.0, A1: 14.5, A2: 13.9, A3: 12.0, R1067: 30.0 },\n  },\n  bw: {\n    formatowe: { A0p: 12.5, A0: 11.0, A1: 6.0, A2: 4.0, A3: 2.5 },\n    mb: { A0p: 10.0, A0: 9.0, A1: 5.0, A2: 4.5, A3: 3.5, R1067: 12.5 },\n  },\n};\n\nexport const CAD_BASE: any = {\n  A0p: { w: 914, l: 1292, label: \"A0+\" },\n  A0: { w: 841, l: 1189, label: \"A0\" },\n  A1: { w: 594, l: 841, label: \"A1\" },\n  A2: { w: 420, l: 594, label: \"A2\" },\n  A3: { w: 297, l: 420, label: \"A3\" },\n};\n\nexport const FORMAT_TOLERANCE_MM = 0.5;\n\nexport const FOLD_PRICE: any = {\n  A0p: 4.0,\n  A0: 3.0,\n  A1: 2.0,\n  A2: 1.5,\n  A3: 1.0,\n  A3L: 0.7,\n};\n\nexport const WF_SCAN_PRICE_PER_CM = 0.08;\n\nexport const BIZ: any = {\n  cyfrowe: {\n    standardPrices: {\n      \"85x55\": {\n        noLam: {\n          50: 65,\n          100: 75,\n          150: 85,\n          200: 96,\n          250: 110,\n          300: 126,\n          400: 146,\n          500: 170,\n          1000: 290,\n        },\n        lam: {\n          50: 160,\n          100: 170,\n          150: 180,\n          200: 190,\n          250: 200,\n          300: 220,\n          400: 240,\n          500: 250,\n          1000: 335,\n        },\n      },\n      \"90x50\": {\n        noLam: {\n          50: 70,\n          100: 79,\n          150: 89,\n          200: 99,\n          250: 120,\n          300: 129,\n          400: 149,\n          500: 175,\n          1000: 300,\n        },\n        lam: {\n          50: 170,\n          100: 180,\n          150: 190,\n          200: 200,\n          250: 210,\n          300: 230,\n          400: 250,\n          500: 260,\n          1000: 345,\n        },\n      },\n    },\n    softtouchPrices: {\n      \"85x55\": {\n        noLam: {\n          50: 65,\n          100: 75,\n          150: 85,\n          200: 96,\n          250: 110,\n          300: 126,\n          400: 145,\n          500: 170,\n          1000: 290,\n        },\n        lam: {\n          50: 170,\n          100: 190,\n          150: 210,\n          200: 220,\n          250: 230,\n          300: 240,\n          400: 260,\n          500: 270,\n          1000: 380,\n        },\n      },\n      \"90x50\": {\n        noLam: {\n          50: 70,\n          100: 79,\n          150: 89,\n          200: 99,\n          250: 120,\n          300: 129,\n          400: 149,\n          500: 175,\n          1000: 300,\n        },\n        lam: {\n          50: 170,\n          100: 190,\n          150: 210,\n          200: 220,\n          250: 230,\n          300: 240,\n          400: 260,\n          500: 270,\n          1000: 390,\n        },\n      },\n    },\n    deluxe: {\n      leadTime: \"4\u20135 dni roboczych\",\n      options: {\n        uv3d_softtouch: {\n          label: \"Maker UV 3D + folia SOFTTOUCH\",\n          prices: { 50: 280, 100: 320, 200: 395, 250: 479, 400: 655, 500: 778 },\n        },\n        uv3d_gold_softtouch: {\n          label: \"Maker UV 3D + z\u0142ocenie + folia SOFTTOUCH\",\n          prices: { 50: 450, 100: 550, 200: 650, 250: 720, 400: 850, 500: 905 },\n        },\n      },\n    },\n  },\n};\n", "import {\n  PRICE,\n  CAD_PRICE,\n  CAD_BASE,\n  FORMAT_TOLERANCE_MM,\n  FOLD_PRICE,\n  WF_SCAN_PRICE_PER_CM,\n  BIZ,\n  pickTier,\n  pickNearestCeilKey,\n  money,\n} from \"./compat\";\n\n/** A4/A3 Print calculation logic */\nexport function calculateSimplePrint(options: {\n  mode: \"bw\" | \"color\";\n  format: \"A4\" | \"A3\";\n  pages: number;\n  email: boolean;\n  ink25: boolean;\n  ink25Qty: number;\n}) {\n  if (options.pages <= 0) {\n    return {\n      unitPrice: 0,\n      printTotal: 0,\n      emailTotal: options.email ? PRICE.email_price : 0,\n      inkTotal: 0,\n      grandTotal: options.email ? PRICE.email_price : 0,\n    };\n  }\n  const tiers = (PRICE.print as any)[options.mode][options.format];\n  const tier = pickTier(tiers, options.pages);\n  if (!tier) throw new Error(\"Brak progu cenowego dla druku.\");\n\n  const unitPrice = tier.unit;\n  let total = options.pages * unitPrice;\n\n  let emailItemTotal = 0;\n  if (options.email) {\n    emailItemTotal = PRICE.email_price;\n  }\n\n  let inkItemTotal = 0;\n  if (options.ink25) {\n    inkItemTotal = 0.5 * unitPrice * options.ink25Qty;\n  }\n\n  return {\n    unitPrice,\n    printTotal: total,\n    emailTotal: emailItemTotal,\n    inkTotal: inkItemTotal,\n    grandTotal: total + emailItemTotal + inkItemTotal,\n  };\n}\n\n/** A4/A3 Scan calculation logic */\nexport function calculateSimpleScan(options: {\n  type: \"auto\" | \"manual\";\n  pages: number;\n}) {\n  if (options.pages <= 0) return { unitPrice: 0, total: 0 };\n  const tiers = (PRICE.scan as any)[options.type];\n  const tier = pickTier(tiers, options.pages);\n  if (!tier) throw new Error(\"Brak progu cenowego dla skanowania.\");\n\n  const unitPrice = tier.unit;\n  return {\n    unitPrice,\n    total: options.pages * unitPrice,\n  };\n}\n\n/** CAD calculation logic */\nexport function calculateCad(options: {\n  mode: \"bw\" | \"color\";\n  format: string;\n  lengthMm: number;\n  qty: number;\n}) {\n  const base = CAD_BASE[options.format];\n  if (!base) throw new Error(\"Nieznany format CAD.\");\n\n  const isFormatowe = Math.abs(options.lengthMm - base.l) <= FORMAT_TOLERANCE_MM;\n  const detectedType = isFormatowe ? \"formatowe\" : \"mb\";\n\n  const rate = CAD_PRICE[options.mode][detectedType][options.format];\n  if (rate == null) throw new Error(\"Brak stawki w cenniku dla CAD.\");\n\n  let total = 0;\n  if (detectedType === \"formatowe\") {\n    total = options.qty * rate;\n  } else {\n    const meters = options.lengthMm / 1000;\n    total = options.qty * meters * rate;\n  }\n\n  return {\n    detectedType,\n    rate,\n    total: parseFloat(money(total)),\n  };\n}\n\n/** CAD Folding logic */\nexport function calculateCadFold(options: { format: string; qty: number }) {\n  const unit = FOLD_PRICE[options.format];\n  if (unit == null) throw new Error(\"Brak stawki sk\u0142adania.\");\n  return {\n    unit,\n    total: options.qty * unit,\n  };\n}\n\n/** WF Scan logic */\nexport function calculateWfScan(options: { lengthMm: number; qty: number }) {\n  const cmRounded = Math.round(options.lengthMm / 10);\n  const unitPrice = cmRounded * WF_SCAN_PRICE_PER_CM;\n  return {\n    cmRounded,\n    unitPrice,\n    total: options.qty * unitPrice,\n  };\n}\n\n/** Business Cards logic */\nexport function calculateBusinessCards(options: {\n  family: \"standard\" | \"deluxe\";\n  finish?: \"mat\" | \"blysk\" | \"softtouch\";\n  size?: \"85x55\" | \"90x50\";\n  lam?: \"noLam\" | \"lam\";\n  deluxeOpt?: \"uv3d_softtouch\" | \"uv3d_gold_softtouch\";\n  qty: number;\n}) {\n  let table: any;\n  if (options.family === \"deluxe\") {\n    const optObj = BIZ.cyfrowe.deluxe.options[options.deluxeOpt!];\n    table = optObj.prices;\n  } else {\n    const tablesByFinish =\n      options.finish === \"softtouch\"\n        ? BIZ.cyfrowe.softtouchPrices\n        : BIZ.cyfrowe.standardPrices;\n    table = tablesByFinish[options.size!][options.lam!];\n  }\n\n  const qtyBilled = pickNearestCeilKey(table, options.qty);\n  if (qtyBilled == null) throw new Error(\"Brak progu cenowego dla takiej ilo\u015Bci.\");\n\n  const total = table[qtyBilled];\n  return {\n    qtyBilled,\n    total,\n  };\n}\n", "import { calculateBusinessCards } from \"../core/compat-logic\";\nimport { CalculationResult } from \"../core/types\";\n\nexport interface WizytowkiOptions {\n  family?: \"standard\" | \"deluxe\";\n  format?: '85x55' | '90x50'; // Mapping this to 'size' in compat logic\n  folia?: 'none' | 'matt_gloss'; // Mapping 'none'->'noLam', 'matt_gloss'->'lam'\n  finish?: \"mat\" | \"blysk\" | \"softtouch\";\n  deluxeOpt?: \"uv3d_softtouch\" | \"uv3d_gold_softtouch\";\n  qty: number;\n  express: boolean;\n}\n\nexport function quoteWizytowki(options: WizytowkiOptions): CalculationResult {\n  const family = options.family || \"standard\";\n\n  // Compat mapping for the old UI options\n  const size = options.format || \"85x55\";\n  const lam = options.folia === 'none' ? 'noLam' : 'lam';\n  const finish = options.finish || \"mat\";\n\n  const res = calculateBusinessCards({\n    family,\n    size: size as any,\n    lam: lam as any,\n    finish,\n    deluxeOpt: options.deluxeOpt,\n    qty: options.qty\n  });\n\n  let totalPrice = res.total;\n  if (options.express) {\n    totalPrice = res.total * 1.2;\n  }\n\n  return {\n    totalPrice: parseFloat(totalPrice.toFixed(2)),\n    basePrice: res.total,\n    effectiveQuantity: options.qty,\n    tierPrice: res.total / res.qtyBilled, // approximate\n    modifiersTotal: options.express ? res.total * 0.2 : 0,\n    appliedModifiers: options.express ? [\"TRYB EXPRESS\"] : [],\n    qtyBilled: res.qtyBilled\n  } as any;\n}\n", "import { View, ViewContext } from \"../types\";\nimport { quoteWizytowki } from \"../../categories/wizytowki-druk-cyfrowy\";\nimport { formatPLN } from \"../../core/money\";\n\nexport const WizytowkiView: View = {\n  id: \"wizytowki-druk-cyfrowy\",\n  name: \"Wizyt\u00F3wki - druk cyfrowy\",\n  mount(container, ctx) {\n    container.innerHTML = `\n      <div class=\"category-view\">\n        <div class=\"view-header\">\n            <h2>Wizyt\u00F3wki - druk cyfrowy</h2>\n        </div>\n\n        <div class=\"calculator-form card\">\n            <div class=\"form-group\">\n                <label for=\"w-family\">Rodzaj:</label>\n                <select id=\"w-family\" class=\"form-control\">\n                    <option value=\"standard\">Standard</option>\n                    <option value=\"deluxe\">DELUXE</option>\n                </select>\n            </div>\n\n            <div id=\"standard-options\">\n                <div class=\"form-group\">\n                    <label for=\"w-finish\">Wyko\u0144czenie:</label>\n                    <select id=\"w-finish\" class=\"form-control\">\n                        <option value=\"mat\">Mat</option>\n                        <option value=\"blysk\">B\u0142ysk</option>\n                        <option value=\"softtouch\">SoftTouch</option>\n                    </select>\n                </div>\n\n                <div class=\"form-group\">\n                    <label for=\"w-size\">Rozmiar:</label>\n                    <select id=\"w-size\" class=\"form-control\">\n                        <option value=\"85x55\">85x55 mm</option>\n                        <option value=\"90x50\">90x50 mm</option>\n                    </select>\n                </div>\n\n                <div class=\"form-group\">\n                    <label for=\"w-lam\">Foliowanie:</label>\n                    <select id=\"w-lam\" class=\"form-control\">\n                        <option value=\"noLam\">Bez foliowania</option>\n                        <option value=\"lam\">Foliowane</option>\n                    </select>\n                </div>\n            </div>\n\n            <div id=\"deluxe-options\" style=\"display: none;\">\n                <div class=\"form-group\">\n                    <label for=\"w-deluxe-opt\">Opcja DELUXE:</label>\n                    <select id=\"w-deluxe-opt\" class=\"form-control\">\n                        <option value=\"uv3d_softtouch\">UV 3D + SoftTouch</option>\n                        <option value=\"uv3d_gold_softtouch\">UV 3D + Z\u0142ocenie + SoftTouch</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"w-qty\">Ilo\u015B\u0107 (szt):</label>\n                <input type=\"number\" id=\"w-qty\" class=\"form-control\" value=\"100\" min=\"1\">\n                <div class=\"hint\">Zaokr\u0105glamy w g\u00F3r\u0119 do najbli\u017Cszego progu.</div>\n            </div>\n\n            <div class=\"form-actions\">\n                <button id=\"w-calculate\" class=\"btn btn-primary\">Oblicz</button>\n                <button id=\"w-add-to-cart\" class=\"btn btn-success\" disabled>Dodaj do koszyka</button>\n            </div>\n        </div>\n\n        <div id=\"w-result-display\" class=\"result-display card\" style=\"display: none;\">\n            <div class=\"result-row\">\n                <span>Cena brutto:</span>\n                <span id=\"w-total-price\" class=\"price-value\">-</span>\n            </div>\n            <div id=\"w-billed-qty-hint\" class=\"hint\"></div>\n            <div id=\"w-express-hint\" class=\"express-hint\" style=\"display: none;\">\n                W tym dop\u0142ata EXPRESS +20%\n            </div>\n        </div>\n      </div>\n    `;\n\n    this.initLogic(container, ctx);\n  },\n\n  initLogic(container: HTMLElement, ctx: ViewContext) {\n    const familySelect = container.querySelector(\"#w-family\") as HTMLSelectElement;\n    const standardOpts = container.querySelector(\"#standard-options\") as HTMLElement;\n    const deluxeOpts = container.querySelector(\"#deluxe-options\") as HTMLElement;\n\n    const finishSelect = container.querySelector(\"#w-finish\") as HTMLSelectElement;\n    const sizeSelect = container.querySelector(\"#w-size\") as HTMLSelectElement;\n    const lamSelect = container.querySelector(\"#w-lam\") as HTMLSelectElement;\n    const deluxeOptSelect = container.querySelector(\"#w-deluxe-opt\") as HTMLSelectElement;\n\n    const qtyInput = container.querySelector(\"#w-qty\") as HTMLInputElement;\n    const calculateBtn = container.querySelector(\"#w-calculate\") as HTMLButtonElement;\n    const addToCartBtn = container.querySelector(\"#w-add-to-cart\") as HTMLButtonElement;\n    const resultDisplay = container.querySelector(\"#w-result-display\") as HTMLElement;\n    const totalPriceSpan = container.querySelector(\"#w-total-price\") as HTMLElement;\n    const billedQtyHint = container.querySelector(\"#w-billed-qty-hint\") as HTMLElement;\n    const expressHint = container.querySelector(\"#w-express-hint\") as HTMLElement;\n\n    familySelect.onchange = () => {\n        const isDeluxe = familySelect.value === 'deluxe';\n        standardOpts.style.display = isDeluxe ? 'none' : 'block';\n        deluxeOpts.style.display = isDeluxe ? 'block' : 'none';\n    };\n\n    let currentResult: any = null;\n    let currentOptions: any = null;\n\n    calculateBtn.onclick = () => {\n      currentOptions = {\n        family: familySelect.value,\n        finish: finishSelect.value,\n        format: sizeSelect.value,\n        folia: lamSelect.value === 'lam' ? 'matt_gloss' : 'none',\n        deluxeOpt: deluxeOptSelect.value,\n        qty: parseInt(qtyInput.value),\n        express: ctx.expressMode\n      };\n\n      try {\n        const result = quoteWizytowki(currentOptions);\n        currentResult = result;\n\n        totalPriceSpan.innerText = formatPLN(result.totalPrice);\n        billedQtyHint.innerText = `Rozliczono za: ${result.qtyBilled} szt.`;\n        expressHint.style.display = ctx.expressMode ? \"block\" : \"none\";\n        resultDisplay.style.display = \"block\";\n        addToCartBtn.disabled = false;\n\n        ctx.updateLastCalculated(result.totalPrice, \"Wizyt\u00F3wki\");\n      } catch (err) {\n        alert(\"B\u0142\u0105d: \" + (err as Error).message);\n      }\n    };\n\n    addToCartBtn.onclick = () => {\n      if (currentResult && currentOptions) {\n        const name = currentOptions.family === 'deluxe' ? 'Wizyt\u00F3wki DELUXE' : 'Wizyt\u00F3wki Standard';\n        const expressLabel = currentOptions.express ? ', EXPRESS' : '';\n\n        ctx.cart.addItem({\n          id: `wizytowki-${Date.now()}`,\n          category: \"Wizyt\u00F3wki\",\n          name: name,\n          quantity: currentResult.qtyBilled,\n          unit: \"szt\",\n          unitPrice: currentResult.totalPrice / currentResult.qtyBilled,\n          isExpress: currentOptions.express,\n          totalPrice: currentResult.totalPrice,\n          optionsHint: `${currentOptions.qty} szt (rozliczono ${currentResult.qtyBilled})${expressLabel}`,\n          payload: currentResult\n        });\n      }\n    };\n  }\n};\n", "{\n  \"name\": \"Zaproszenia KREDA - druk cyfrowy\",\n  \"modifiers\": {\n    \"satin\": 0.12,\n    \"express\": 0.20\n  },\n  \"formats\": {\n    \"A6\": {\n      \"name\": \"A6 (105x148mm)\",\n      \"single\": {\n        \"normal\": { \"10\": 30, \"24\": 40, \"32\": 45, \"50\": 50, \"75\": 60, \"100\": 68, \"150\": 79 },\n        \"folded\": { \"10\": 45, \"24\": 55, \"32\": 60, \"50\": 71, \"75\": 84, \"100\": 99, \"150\": 126 }\n      },\n      \"double\": {\n        \"normal\": { \"10\": 35, \"24\": 46, \"32\": 57, \"50\": 66, \"75\": 79, \"100\": 89, \"150\": 115 },\n        \"folded\": { \"10\": 58, \"24\": 66, \"32\": 84, \"50\": 105, \"75\": 125, \"100\": 149, \"150\": 199 }\n      }\n    },\n    \"A5\": {\n      \"name\": \"A5 (148x210mm)\",\n      \"single\": {\n        \"normal\": { \"10\": 34, \"24\": 42, \"32\": 48, \"50\": 55, \"75\": 63, \"100\": 79, \"150\": 110 },\n        \"folded\": { \"10\": 55, \"24\": 60, \"32\": 75, \"50\": 95, \"75\": 125, \"100\": 150, \"150\": 199 }\n      },\n      \"double\": {\n        \"normal\": { \"10\": 40, \"24\": 49, \"32\": 62, \"50\": 79, \"75\": 96, \"100\": 119, \"150\": 169 },\n        \"folded\": { \"10\": 65, \"24\": 80, \"32\": 115, \"50\": 149, \"75\": 190, \"100\": 235, \"150\": 325 }\n      }\n    },\n    \"DL\": {\n      \"name\": \"DL (99x210mm)\",\n      \"single\": {\n        \"normal\": { \"10\": 35, \"24\": 50, \"32\": 53, \"50\": 59, \"75\": 70, \"100\": 81, \"150\": 105 },\n        \"folded\": { \"10\": 45, \"24\": 55, \"32\": 63, \"50\": 79, \"75\": 97, \"100\": 115, \"150\": 149 }\n      },\n      \"double\": {\n        \"normal\": { \"10\": 41, \"24\": 55, \"32\": 64, \"50\": 74, \"75\": 88, \"100\": 105, \"150\": 135 },\n        \"folded\": { \"10\": 65, \"24\": 80, \"32\": 90, \"50\": 115, \"75\": 150, \"100\": 185, \"150\": 245 }\n      }\n    }\n  }\n}\n", "import { CalculationResult, Modifier } from \"../core/types\";\nimport data from \"../../data/normalized/zaproszenia-kreda.json\";\n\nexport interface ZaproszeniaKredaOptions {\n  format: string; // \"A6\", \"A5\", \"DL\"\n  qty: number;\n  sides: number; // 1 or 2\n  isFolded: boolean;\n  isSatin: boolean;\n  express: boolean;\n}\n\nexport function calculateZaproszeniaKreda(options: ZaproszeniaKredaOptions): CalculationResult {\n  const { format, qty, sides, isFolded, isSatin, express } = options;\n\n  const formatData = (data.formats as any)[format];\n  if (!formatData) {\n    throw new Error(`Invalid format: ${format}`);\n  }\n\n  const sidesKey = sides === 1 ? \"single\" : \"double\";\n  const typeKey = isFolded ? \"folded\" : \"normal\";\n  const priceTable = formatData[sidesKey][typeKey];\n\n  // Tier selection\n  const sortedTiers = Object.keys(priceTable)\n    .map(Number)\n    .sort((a, b) => a - b);\n\n  let selectedTier = sortedTiers[0];\n  for (const tier of sortedTiers) {\n    if (qty >= tier) {\n      selectedTier = tier;\n    }\n  }\n\n  const basePrice = priceTable[selectedTier.toString()];\n\n  const modifiers: Modifier[] = [];\n  if (isSatin) {\n    modifiers.push({\n      id: \"satin\",\n      name: \"Papier satynowy (+12%)\",\n      type: \"percentage\",\n      value: data.modifiers.satin\n    });\n  }\n  if (express) {\n    modifiers.push({\n      id: \"express\",\n      name: \"EXPRESS (+20%)\",\n      type: \"percentage\",\n      value: data.modifiers.express\n    });\n  }\n\n  let modifiersTotal = 0;\n  const appliedModifiers: string[] = [];\n\n  for (const mod of modifiers) {\n    if (mod.type === \"percent\" || (mod.type as any) === \"percentage\") {\n      modifiersTotal += basePrice * mod.value;\n      appliedModifiers.push(mod.name);\n    }\n  }\n\n  const totalPrice = basePrice + modifiersTotal;\n\n  return {\n    basePrice,\n    effectiveQuantity: qty,\n    tierPrice: basePrice / qty,\n    modifiersTotal,\n    totalPrice: Math.round(totalPrice * 100) / 100,\n    appliedModifiers\n  };\n}\n", "import { View, ViewContext } from \"../types\";\nimport { calculateZaproszeniaKreda, ZaproszeniaKredaOptions } from \"../../categories/zaproszenia-kreda\";\nimport { formatPLN } from \"../../core/money\";\n\nexport const ZaproszeniaKredaView: View = {\n  id: \"zaproszenia-kreda\",\n  name: \"Zaproszenia KREDA\",\n  async mount(container, ctx) {\n    const response = await fetch(\"categories/zaproszenia-kreda.html\");\n    container.innerHTML = await response.text();\n\n    const formatSel = container.querySelector(\"#zapFormat\") as HTMLSelectElement;\n    const sidesSel = container.querySelector(\"#zapSides\") as HTMLSelectElement;\n    const foldedCheck = container.querySelector(\"#zapFolded\") as HTMLInputElement;\n    const qtyInput = container.querySelector(\"#zapQty\") as HTMLInputElement;\n    const satinCheck = container.querySelector(\"#zapSatin\") as HTMLInputElement;\n    const calcBtn = container.querySelector(\"#calcBtn\") as HTMLButtonElement;\n    const addToCartBtn = container.querySelector(\"#addToCartBtn\") as HTMLButtonElement;\n    const resultArea = container.querySelector(\"#zapResult\") as HTMLElement;\n\n    const calculate = () => {\n      const options: ZaproszeniaKredaOptions = {\n        format: formatSel.value,\n        qty: parseInt(qtyInput.value) || 10,\n        sides: parseInt(sidesSel.value) || 1,\n        isFolded: foldedCheck.checked,\n        isSatin: satinCheck.checked,\n        express: ctx.expressMode\n      };\n\n      const result = calculateZaproszeniaKreda(options);\n\n      resultArea.style.display = \"block\";\n      (container.querySelector(\"#resUnitPrice\") as HTMLElement).textContent = formatPLN(result.totalPrice / options.qty);\n      (container.querySelector(\"#resTotalPrice\") as HTMLElement).textContent = formatPLN(result.totalPrice);\n      (container.querySelector(\"#resExpressHint\") as HTMLElement).style.display = options.express ? \"block\" : \"none\";\n      (container.querySelector(\"#resSatinHint\") as HTMLElement).style.display = options.isSatin ? \"block\" : \"none\";\n\n      ctx.updateLastCalculated(result.totalPrice, \"Zaproszenia\");\n      return { options, result };\n    };\n\n    calcBtn.addEventListener(\"click\", () => calculate());\n\n    addToCartBtn.addEventListener(\"click\", () => {\n      const { options, result } = calculate();\n\n      ctx.cart.addItem({\n        id: `zap-${Date.now()}`,\n        category: \"Zaproszenia Kreda\",\n        name: `Zaproszenia ${options.format} ${options.sides === 1 ? '1-str' : '2-str'}${options.isFolded ? ' sk\u0142adane' : ''}`,\n        quantity: options.qty,\n        unit: \"szt\",\n        unitPrice: result.totalPrice / options.qty,\n        isExpress: options.express,\n        totalPrice: result.totalPrice,\n        optionsHint: `${options.qty} szt, ${options.isSatin ? 'Satyna' : 'Kreda'}`,\n        payload: options\n      });\n    });\n\n    // Initial calculation\n    calculate();\n  }\n};\n", "{\n  \"name\": \"Ulotki - Cyfrowe Dwustronne\",\n  \"formats\": {\n    \"A6\": {\n      \"name\": \"A6 (105x148)\",\n      \"tiers\": [\n        { \"min\": 10, \"max\": 10, \"price\": 40.0 },\n        { \"min\": 20, \"max\": 20, \"price\": 47.0 },\n        { \"min\": 30, \"max\": 30, \"price\": 49.0 },\n        { \"min\": 40, \"max\": 40, \"price\": 55.0 },\n        { \"min\": 50, \"max\": 50, \"price\": 60.0 },\n        { \"min\": 60, \"max\": 60, \"price\": 65.0 },\n        { \"min\": 70, \"max\": 70, \"price\": 70.0 },\n        { \"min\": 80, \"max\": 80, \"price\": 75.0 },\n        { \"min\": 90, \"max\": 90, \"price\": 90.0 },\n        { \"min\": 100, \"max\": 100, \"price\": 95.0 },\n        { \"min\": 150, \"max\": 150, \"price\": 120.0 },\n        { \"min\": 200, \"max\": 200, \"price\": 140.0 },\n        { \"min\": 300, \"max\": 300, \"price\": 190.0 },\n        { \"min\": 400, \"max\": 400, \"price\": 230.0 },\n        { \"min\": 500, \"max\": 500, \"price\": 270.0 },\n        { \"min\": 700, \"max\": 700, \"price\": 355.0 },\n        { \"min\": 1000, \"max\": 1000, \"price\": 476.0 }\n      ]\n    },\n    \"A5\": {\n      \"name\": \"A5 (148 x 210)\",\n      \"tiers\": [\n        { \"min\": 10, \"max\": 10, \"price\": 45.0 },\n        { \"min\": 20, \"max\": 20, \"price\": 55.0 },\n        { \"min\": 30, \"max\": 30, \"price\": 60.0 },\n        { \"min\": 40, \"max\": 40, \"price\": 72.0 },\n        { \"min\": 50, \"max\": 50, \"price\": 90.0 },\n        { \"min\": 60, \"max\": 60, \"price\": 99.0 },\n        { \"min\": 70, \"max\": 70, \"price\": 112.0 },\n        { \"min\": 80, \"max\": 80, \"price\": 122.0 },\n        { \"min\": 90, \"max\": 90, \"price\": 130.0 },\n        { \"min\": 100, \"max\": 100, \"price\": 140.0 },\n        { \"min\": 150, \"max\": 150, \"price\": 180.0 },\n        { \"min\": 200, \"max\": 200, \"price\": 220.0 },\n        { \"min\": 300, \"max\": 300, \"price\": 310.0 },\n        { \"min\": 400, \"max\": 400, \"price\": 390.0 },\n        { \"min\": 500, \"max\": 500, \"price\": 460.0 },\n        { \"min\": 700, \"max\": 700, \"price\": 620.0 },\n        { \"min\": 1000, \"max\": 1000, \"price\": 790.0 }\n      ]\n    },\n    \"DL\": {\n      \"name\": \"DL (99 x 210)\",\n      \"tiers\": [\n        { \"min\": 10, \"max\": 10, \"price\": 40.0 },\n        { \"min\": 20, \"max\": 20, \"price\": 50.0 },\n        { \"min\": 30, \"max\": 30, \"price\": 55.0 },\n        { \"min\": 40, \"max\": 40, \"price\": 65.0 },\n        { \"min\": 50, \"max\": 50, \"price\": 70.0 },\n        { \"min\": 60, \"max\": 60, \"price\": 78.0 },\n        { \"min\": 70, \"max\": 70, \"price\": 88.0 },\n        { \"min\": 80, \"max\": 80, \"price\": 99.0 },\n        { \"min\": 90, \"max\": 90, \"price\": 109.0 },\n        { \"min\": 100, \"max\": 100, \"price\": 119.0 },\n        { \"min\": 150, \"max\": 150, \"price\": 150.0 },\n        { \"min\": 200, \"max\": 200, \"price\": 179.0 },\n        { \"min\": 300, \"max\": 300, \"price\": 235.0 },\n        { \"min\": 400, \"max\": 400, \"price\": 290.0 },\n        { \"min\": 500, \"max\": 500, \"price\": 350.0 },\n        { \"min\": 700, \"max\": 700, \"price\": 460.0 },\n        { \"min\": 1000, \"max\": 1000, \"price\": 590.0 }\n      ]\n    }\n  }\n}\n", "import prices from \"../../data/normalized/ulotki-cyfrowe-dwustronne.json\";\nimport { calculatePrice } from \"../core/pricing\";\nimport { PriceTable, CalculationResult } from \"../core/types\";\n\nexport interface UlotkiDwustronneOptions {\n  qty: number;\n  format: string;\n  express: boolean;\n}\n\nexport function getUlotkiDwustronneTable(formatKey: string): PriceTable {\n  const formatData = (prices.formats as any)[formatKey];\n  if (!formatData) {\n    throw new Error(`Invalid format: ${formatKey}`);\n  }\n\n  return {\n    id: `ulotki-cyfrowe-dwustronne-${formatKey.toLowerCase()}`,\n    title: `Ulotki Cyfrowe Dwustronne ${formatData.name}`,\n    unit: \"szt\",\n    pricing: \"flat\",\n    tiers: formatData.tiers,\n    modifiers: [\n      { id: \"express\", name: \"TRYB EXPRESS\", type: \"percent\", value: 0.20 }\n    ]\n  };\n}\n\nexport function quoteUlotkiDwustronne(options: UlotkiDwustronneOptions): CalculationResult {\n  const table = getUlotkiDwustronneTable(options.format);\n  const activeModifiers = [];\n  if (options.express) activeModifiers.push(\"express\");\n\n  return calculatePrice(table, options.qty, activeModifiers);\n}\n", "import { View, ViewContext } from \"../types\";\nimport { quoteUlotkiDwustronne } from \"../../categories/ulotki-cyfrowe-dwustronne\";\nimport { formatPLN } from \"../../core/money\";\n\nexport const UlotkiDwustronneView: View = {\n  id: \"ulotki-cyfrowe-dwustronne\",\n  name: \"Ulotki - Cyfrowe Dwustronne\",\n  async mount(container, ctx) {\n    try {\n      const response = await fetch(\"categories/ulotki-cyfrowe-dwustronne.html\");\n      if (!response.ok) throw new Error(\"Failed to load template\");\n      container.innerHTML = await response.text();\n\n      this.initLogic(container, ctx);\n    } catch (err) {\n      container.innerHTML = `<div class=\"error\">B\u0142\u0105d \u0142adowania: ${err}</div>`;\n    }\n  },\n\n  initLogic(container: HTMLElement, ctx: ViewContext) {\n    const formatSelect = container.querySelector(\"#u-format\") as HTMLSelectElement;\n    const qtySelect = container.querySelector(\"#u-qty\") as HTMLSelectElement;\n    const calculateBtn = container.querySelector(\"#u-calculate\") as HTMLButtonElement;\n    const addToCartBtn = container.querySelector(\"#u-add-to-cart\") as HTMLButtonElement;\n    const resultDisplay = container.querySelector(\"#u-result-display\") as HTMLElement;\n    const totalPriceSpan = container.querySelector(\"#u-total-price\") as HTMLElement;\n    const expressHint = container.querySelector(\"#u-express-hint\") as HTMLElement;\n\n    let currentResult: any = null;\n    let currentOptions: any = null;\n\n    calculateBtn.onclick = () => {\n      currentOptions = {\n        format: formatSelect.value,\n        qty: parseInt(qtySelect.value),\n        express: ctx.expressMode\n      };\n\n      try {\n        const result = quoteUlotkiDwustronne(currentOptions);\n        currentResult = result;\n\n        totalPriceSpan.innerText = formatPLN(result.totalPrice);\n        if (expressHint) expressHint.style.display = ctx.expressMode ? \"block\" : \"none\";\n        resultDisplay.style.display = \"block\";\n        addToCartBtn.disabled = false;\n\n        ctx.updateLastCalculated(result.totalPrice, \"Ulotki\");\n      } catch (err) {\n        alert(\"B\u0142\u0105d: \" + (err as Error).message);\n      }\n    };\n\n    addToCartBtn.onclick = () => {\n      if (currentResult && currentOptions) {\n        const expressLabel = currentOptions.express ? ', EXPRESS' : '';\n\n        ctx.cart.addItem({\n          id: `ulotki-dwustronne-${Date.now()}`,\n          category: \"Ulotki\",\n          name: `Ulotki Dwustronne ${currentOptions.format}`,\n          quantity: currentOptions.qty,\n          unit: \"szt\",\n          unitPrice: currentResult.totalPrice / currentOptions.qty,\n          isExpress: currentOptions.express,\n          totalPrice: currentResult.totalPrice,\n          optionsHint: `${currentOptions.qty} szt, Dwustronne${expressLabel}`,\n          payload: currentResult\n        });\n      }\n    };\n  }\n};\n", "{\n  \"name\": \"Ulotki - Cyfrowe Jednostronne\",\n  \"formats\": {\n    \"A6\": {\n      \"name\": \"A6 (105x148)\",\n      \"tiers\": [\n        { \"min\": 10, \"max\": 10, \"price\": 30.0 },\n        { \"min\": 20, \"max\": 20, \"price\": 35.0 },\n        { \"min\": 30, \"max\": 30, \"price\": 40.0 },\n        { \"min\": 40, \"max\": 40, \"price\": 45.0 },\n        { \"min\": 50, \"max\": 50, \"price\": 55.0 },\n        { \"min\": 60, \"max\": 60, \"price\": 61.0 },\n        { \"min\": 70, \"max\": 70, \"price\": 65.0 },\n        { \"min\": 80, \"max\": 80, \"price\": 70.0 },\n        { \"min\": 90, \"max\": 90, \"price\": 75.0 },\n        { \"min\": 100, \"max\": 100, \"price\": 79.0 },\n        { \"min\": 150, \"max\": 150, \"price\": 90.0 },\n        { \"min\": 200, \"max\": 200, \"price\": 110.0 },\n        { \"min\": 300, \"max\": 300, \"price\": 145.0 },\n        { \"min\": 400, \"max\": 400, \"price\": 160.0 },\n        { \"min\": 500, \"max\": 500, \"price\": 190.0 },\n        { \"min\": 700, \"max\": 700, \"price\": 255.0 },\n        { \"min\": 1000, \"max\": 1000, \"price\": 320.0 }\n      ]\n    },\n    \"A5\": {\n      \"name\": \"A5 (148 x 210)\",\n      \"tiers\": [\n        { \"min\": 10, \"max\": 10, \"price\": 35.0 },\n        { \"min\": 20, \"max\": 20, \"price\": 42.0 },\n        { \"min\": 30, \"max\": 30, \"price\": 50.0 },\n        { \"min\": 40, \"max\": 40, \"price\": 59.0 },\n        { \"min\": 50, \"max\": 50, \"price\": 69.0 },\n        { \"min\": 60, \"max\": 60, \"price\": 75.0 },\n        { \"min\": 70, \"max\": 70, \"price\": 82.0 },\n        { \"min\": 80, \"max\": 80, \"price\": 88.0 },\n        { \"min\": 90, \"max\": 90, \"price\": 93.0 },\n        { \"min\": 100, \"max\": 100, \"price\": 95.0 },\n        { \"min\": 150, \"max\": 150, \"price\": 130.0 },\n        { \"min\": 200, \"max\": 200, \"price\": 150.0 },\n        { \"min\": 300, \"max\": 300, \"price\": 210.0 },\n        { \"min\": 400, \"max\": 400, \"price\": 259.0 },\n        { \"min\": 500, \"max\": 500, \"price\": 300.0 },\n        { \"min\": 700, \"max\": 700, \"price\": 410.0 },\n        { \"min\": 1000, \"max\": 1000, \"price\": 530.0 }\n      ]\n    },\n    \"DL\": {\n      \"name\": \"DL (99 x 210)\",\n      \"tiers\": [\n        { \"min\": 10, \"max\": 10, \"price\": 30.0 },\n        { \"min\": 20, \"max\": 20, \"price\": 35.0 },\n        { \"min\": 30, \"max\": 30, \"price\": 40.0 },\n        { \"min\": 40, \"max\": 40, \"price\": 45.0 },\n        { \"min\": 50, \"max\": 50, \"price\": 55.0 },\n        { \"min\": 60, \"max\": 60, \"price\": 60.0 },\n        { \"min\": 70, \"max\": 70, \"price\": 65.0 },\n        { \"min\": 80, \"max\": 80, \"price\": 70.0 },\n        { \"min\": 90, \"max\": 90, \"price\": 75.0 },\n        { \"min\": 100, \"max\": 100, \"price\": 83.0 },\n        { \"min\": 150, \"max\": 150, \"price\": 100.0 },\n        { \"min\": 200, \"max\": 200, \"price\": 120.0 },\n        { \"min\": 300, \"max\": 300, \"price\": 160.0 },\n        { \"min\": 400, \"max\": 400, \"price\": 199.0 },\n        { \"min\": 500, \"max\": 500, \"price\": 230.0 },\n        { \"min\": 700, \"max\": 700, \"price\": 310.0 },\n        { \"min\": 1000, \"max\": 1000, \"price\": 399.0 }\n      ]\n    }\n  }\n}\n", "import prices from \"../../data/normalized/ulotki-cyfrowe-jednostronne.json\";\nimport { calculatePrice } from \"../core/pricing\";\nimport { PriceTable, CalculationResult } from \"../core/types\";\n\nexport interface UlotkiJednostronneOptions {\n  qty: number;\n  format: string;\n  express: boolean;\n}\n\nexport function getUlotkiJednostronneTable(formatKey: string): PriceTable {\n  const formatData = (prices.formats as any)[formatKey];\n  if (!formatData) {\n    throw new Error(`Invalid format: ${formatKey}`);\n  }\n\n  return {\n    id: `ulotki-cyfrowe-jednostronne-${formatKey.toLowerCase()}`,\n    title: `Ulotki Cyfrowe Jednostronne ${formatData.name}`,\n    unit: \"szt\",\n    pricing: \"flat\",\n    tiers: formatData.tiers,\n    modifiers: [\n      { id: \"express\", name: \"TRYB EXPRESS\", type: \"percent\", value: 0.20 }\n    ]\n  };\n}\n\nexport function quoteJednostronne(options: UlotkiJednostronneOptions): CalculationResult {\n  const table = getUlotkiJednostronneTable(options.format);\n  const activeModifiers = [];\n  if (options.express) activeModifiers.push(\"express\");\n\n  return calculatePrice(table, options.qty, activeModifiers);\n}\n", "import { View, ViewContext } from \"../types\";\nimport { quoteJednostronne } from \"../../categories/ulotki-cyfrowe-jednostronne\";\nimport { formatPLN } from \"../../core/money\";\n\nexport const UlotkiJednostronneView: View = {\n  id: \"ulotki-cyfrowe-jednostronne\",\n  name: \"Ulotki - Cyfrowe Jednostronne\",\n  async mount(container, ctx) {\n    try {\n      const response = await fetch(\"categories/ulotki-cyfrowe-jednostronne.html\");\n      if (!response.ok) throw new Error(\"Failed to load template\");\n      container.innerHTML = await response.text();\n\n      this.initLogic(container, ctx);\n    } catch (err) {\n      container.innerHTML = `<div class=\"error\">B\u0142\u0105d \u0142adowania: ${err}</div>`;\n    }\n  },\n\n  initLogic(container: HTMLElement, ctx: ViewContext) {\n    const formatSelect = container.querySelector(\"#uj-format\") as HTMLSelectElement;\n    const qtySelect = container.querySelector(\"#uj-qty\") as HTMLSelectElement;\n    const calculateBtn = container.querySelector(\"#uj-calculate\") as HTMLButtonElement;\n    const addToCartBtn = container.querySelector(\"#uj-add-to-cart\") as HTMLButtonElement;\n    const resultDisplay = container.querySelector(\"#uj-result-display\") as HTMLElement;\n    const totalPriceSpan = container.querySelector(\"#uj-total-price\") as HTMLElement;\n    const expressHint = container.querySelector(\"#uj-express-hint\") as HTMLElement;\n\n    let currentResult: any = null;\n    let currentOptions: any = null;\n\n    calculateBtn.onclick = () => {\n      currentOptions = {\n        format: formatSelect.value,\n        qty: parseInt(qtySelect.value),\n        express: ctx.expressMode\n      };\n\n      try {\n        const result = quoteJednostronne(currentOptions);\n        currentResult = result;\n\n        totalPriceSpan.innerText = formatPLN(result.totalPrice);\n        if (expressHint) expressHint.style.display = ctx.expressMode ? \"block\" : \"none\";\n        resultDisplay.style.display = \"block\";\n        addToCartBtn.disabled = false;\n\n        ctx.updateLastCalculated(result.totalPrice, \"Ulotki\");\n      } catch (err) {\n        alert(\"B\u0142\u0105d: \" + (err as Error).message);\n      }\n    };\n\n    addToCartBtn.onclick = () => {\n      if (currentResult && currentOptions) {\n        const expressLabel = currentOptions.express ? ', EXPRESS' : '';\n\n        ctx.cart.addItem({\n          id: `ulotki-jednostronne-${Date.now()}`,\n          category: \"Ulotki\",\n          name: `Ulotki Jednostronne ${currentOptions.format}`,\n          quantity: currentOptions.qty,\n          unit: \"szt\",\n          unitPrice: currentResult.totalPrice / currentOptions.qty,\n          isExpress: currentOptions.express,\n          totalPrice: currentResult.totalPrice,\n          optionsHint: `${currentOptions.qty} szt, Jednostronne${expressLabel}`,\n          payload: currentResult\n        });\n      }\n    };\n  }\n};\n", "{\n  \"id\": \"banner\",\n  \"title\": \"Bannery\",\n  \"unit\": \"m2\",\n  \"pricing\": \"per_unit\",\n  \"materials\": [\n    {\n      \"id\": \"powlekany\",\n      \"name\": \"Banner powlekany\",\n      \"tiers\": [\n        { \"min\": 1, \"max\": 25, \"price\": 53.0 },\n        { \"min\": 26, \"max\": 50, \"price\": 49.0 },\n        { \"min\": 51, \"max\": null, \"price\": 45.0 }\n      ]\n    },\n    {\n      \"id\": \"blockout\",\n      \"name\": \"Banner Blockout\",\n      \"tiers\": [\n        { \"min\": 1, \"max\": 25, \"price\": 64.0 },\n        { \"min\": 26, \"max\": 50, \"price\": 59.0 },\n        { \"min\": 51, \"max\": null, \"price\": 55.0 }\n      ]\n    }\n  ],\n  \"modifiers\": [\n    { \"id\": \"oczkowanie\", \"name\": \"Oczkowanie (+2.50 z\u0142/m2)\", \"type\": \"fixed_per_unit\", \"value\": 2.50 },\n    { \"id\": \"express\", \"name\": \"TRYB EXPRESS (+20%)\", \"type\": \"percent\", \"value\": 0.20 }\n  ]\n}\n", "import { calculatePrice } from \"../core/pricing\";\nimport { PriceTable, CalculationResult } from \"../core/types\";\nimport data from \"../../data/normalized/banner.json\";\n\nexport interface BannerOptions {\n  material: string;\n  areaM2: number;\n  oczkowanie: boolean;\n  express?: boolean;\n}\n\nexport function calculateBanner(options: BannerOptions): CalculationResult {\n  const tableData = data as any;\n  const materialData = tableData.materials.find((m: any) => m.id === options.material);\n\n  if (!materialData) {\n    throw new Error(`Unknown material: ${options.material}`);\n  }\n\n  const priceTable: PriceTable = {\n    id: tableData.id,\n    title: tableData.title,\n    unit: tableData.unit,\n    pricing: tableData.pricing,\n    tiers: materialData.tiers,\n    modifiers: tableData.modifiers\n  };\n\n  const activeModifiers: string[] = [];\n  if (options.oczkowanie) {\n    activeModifiers.push(\"oczkowanie\");\n  }\n  if (options.express) {\n    activeModifiers.push(\"express\");\n  }\n\n  return calculatePrice(priceTable, options.areaM2, activeModifiers);\n}\n", "import { View, ViewContext } from \"../types\";\nimport { calculateBanner } from \"../../categories/banner\";\nimport { formatPLN } from \"../../core/money\";\n\nexport const BannerView: View = {\n  id: \"banner\",\n  name: \"Bannery\",\n  async mount(container, ctx) {\n    try {\n      const response = await fetch(\"categories/banner.html\");\n      if (!response.ok) throw new Error(\"Failed to load template\");\n      container.innerHTML = await response.text();\n\n      this.initLogic(container, ctx);\n    } catch (err) {\n      container.innerHTML = `<div class=\"error\">B\u0142\u0105d \u0142adowania: ${err}</div>`;\n    }\n  },\n\n  initLogic(container: HTMLElement, ctx: ViewContext) {\n    const materialSelect = container.querySelector(\"#b-material\") as HTMLSelectElement;\n    const areaInput = container.querySelector(\"#b-area\") as HTMLInputElement;\n    const oczkowanieCheckbox = container.querySelector(\"#b-oczkowanie\") as HTMLInputElement;\n    const calculateBtn = container.querySelector(\"#b-calculate\") as HTMLButtonElement;\n    const addToCartBtn = container.querySelector(\"#b-add-to-cart\") as HTMLButtonElement;\n    const resultDisplay = container.querySelector(\"#b-result-display\") as HTMLElement;\n    const unitPriceSpan = container.querySelector(\"#b-unit-price\") as HTMLElement;\n    const totalPriceSpan = container.querySelector(\"#b-total-price\") as HTMLElement;\n    const expressHint = container.querySelector(\"#b-express-hint\") as HTMLElement;\n\n    let currentResult: any = null;\n    let currentOptions: any = null;\n\n    calculateBtn.onclick = () => {\n      currentOptions = {\n        material: materialSelect.value,\n        areaM2: parseFloat(areaInput.value),\n        oczkowanie: oczkowanieCheckbox.checked,\n        express: ctx.expressMode\n      };\n\n      try {\n        const result = calculateBanner(currentOptions);\n        currentResult = result;\n\n        unitPriceSpan.innerText = formatPLN(result.tierPrice);\n        totalPriceSpan.innerText = formatPLN(result.totalPrice);\n        if (expressHint) expressHint.style.display = ctx.expressMode ? \"block\" : \"none\";\n        resultDisplay.style.display = \"block\";\n        addToCartBtn.disabled = false;\n\n        ctx.updateLastCalculated(result.totalPrice, \"Banner\");\n      } catch (err) {\n        alert(\"B\u0142\u0105d: \" + (err as Error).message);\n      }\n    };\n\n    addToCartBtn.onclick = () => {\n      if (currentResult && currentOptions) {\n        const matName = materialSelect.options[materialSelect.selectedIndex].text;\n        const opts = [\n            `${currentOptions.areaM2} m2`,\n            currentOptions.oczkowanie ? \"z oczkowaniem\" : \"bez oczkowania\",\n            currentOptions.express ? \"EXPRESS\" : \"\"\n        ].filter(Boolean).join(\", \");\n\n        ctx.cart.addItem({\n          id: `banner-${Date.now()}`,\n          category: \"Bannery\",\n          name: matName,\n          quantity: currentOptions.areaM2,\n          unit: \"m2\",\n          unitPrice: currentResult.tierPrice,\n          isExpress: currentOptions.express,\n          totalPrice: currentResult.totalPrice,\n          optionsHint: opts,\n          payload: currentResult\n        });\n      }\n    };\n  }\n};\n", "{\n  \"category\": \"Wlepki / Naklejki\",\n  \"groups\": [\n    {\n      \"id\": \"wlepki_obrys_folia\",\n      \"title\": \"Wlepki po obrysie (Folia Bia\u0142a/Trans)\",\n      \"unit\": \"m2\",\n      \"pricing\": \"per_unit\",\n      \"tiers\": [\n        { \"min\": 1, \"max\": 5, \"price\": 67 },\n        { \"min\": 6, \"max\": 25, \"price\": 60 },\n        { \"min\": 26, \"max\": 50, \"price\": 52 },\n        { \"min\": 51, \"max\": null, \"price\": 48 }\n      ],\n      \"rules\": [\n        { \"type\": \"minimum\", \"unit\": \"m2\", \"value\": 1 }\n      ]\n    },\n    {\n      \"id\": \"wlepki_polipropylen\",\n      \"title\": \"Wlepki po obrysie - Polipropylen\",\n      \"unit\": \"m2\",\n      \"pricing\": \"per_unit\",\n      \"tiers\": [\n        { \"min\": 1, \"max\": 10, \"price\": 50 },\n        { \"min\": 11, \"max\": null, \"price\": 42 }\n      ],\n      \"rules\": [\n        { \"type\": \"minimum\", \"unit\": \"m2\", \"value\": 1 }\n      ]\n    },\n    {\n      \"id\": \"wlepki_standard_folia\",\n      \"title\": \"Folia Bia\u0142a / Transparentna (standard)\",\n      \"unit\": \"m2\",\n      \"pricing\": \"per_unit\",\n      \"tiers\": [\n        { \"min\": 1, \"max\": 5, \"price\": 54 },\n        { \"min\": 6, \"max\": 25, \"price\": 50 },\n        { \"min\": 26, \"max\": 50, \"price\": 46 },\n        { \"min\": 51, \"max\": null, \"price\": 42 }\n      ],\n      \"rules\": [\n        { \"type\": \"minimum\", \"unit\": \"m2\", \"value\": 1 }\n      ]\n    }\n  ],\n  \"modifiers\": [\n    { \"id\": \"mocny_klej\", \"name\": \"Mocny klej\", \"type\": \"percent\", \"value\": 0.12 },\n    { \"id\": \"arkusze\", \"name\": \"Ci\u0119te na arkusze\", \"type\": \"fixed_per_unit\", \"value\": 2 },\n    { \"id\": \"pojedyncze\", \"name\": \"Ci\u0119te na pojedyncze sztuki\", \"type\": \"fixed_per_unit\", \"value\": 10 },\n    { \"id\": \"express\", \"name\": \"EXPRESS\", \"type\": \"percent\", \"value\": 0.20 }\n  ]\n}\n", "import { calculatePrice } from \"../core/pricing\";\nimport { PriceTable, CalculationResult } from \"../core/types\";\nimport * as data from \"../../data/normalized/wlepki-naklejki.json\";\n\nexport interface WlepkiCalculation {\n  groupId: string;\n  area: number;\n  modifiers: string[];\n  express?: boolean;\n}\n\nexport function calculateWlepki(input: WlepkiCalculation): CalculationResult {\n  const tableData = data as any;\n  const groupData = tableData.groups.find((g: any) => g.id === input.groupId);\n\n  if (!groupData) {\n    throw new Error(`Unknown group: ${input.groupId}`);\n  }\n\n  const priceTable: PriceTable = {\n    id: \"wlepki\",\n    title: groupData.title,\n    unit: groupData.unit,\n    pricing: groupData.pricing || \"per_unit\",\n    tiers: groupData.tiers,\n    modifiers: tableData.modifiers,\n    rules: groupData.rules || [{ type: \"minimum\", unit: \"m2\", value: 1 }]\n  };\n\n  const activeModifiers = [...input.modifiers];\n  if (input.express) {\n    activeModifiers.push(\"express\");\n  }\n\n  return calculatePrice(priceTable, input.area, activeModifiers);\n}\n", "import { View, ViewContext } from \"../types\";\nimport { calculateWlepki, WlepkiCalculation } from \"../../categories/wlepki-naklejki\";\nimport { formatPLN } from \"../../core/money\";\nimport * as data from \"../../../data/normalized/wlepki-naklejki.json\";\n\nexport const WlepkiView: View = {\n  id: \"wlepki-naklejki\",\n  name: \"Wlepki / Naklejki\",\n  async mount(container, ctx) {\n    const tableData = data as any;\n\n    try {\n      const response = await fetch(\"categories/wlepki-naklejki.html\");\n      if (!response.ok) throw new Error(\"Failed to load template\");\n      container.innerHTML = await response.text();\n    } catch (err) {\n      container.innerHTML = `<div class=\"error\">B\u0142\u0105d \u0142adowania szablonu: ${err}</div>`;\n      return;\n    }\n\n    const groupSelect = container.querySelector(\"#wlepki-group\") as HTMLSelectElement;\n    const areaInput = container.querySelector(\"#wlepki-area\") as HTMLInputElement;\n    const calcBtn = container.querySelector(\"#btn-calculate\") as HTMLButtonElement;\n    const addBtn = container.querySelector(\"#btn-add-to-cart\") as HTMLButtonElement;\n    const resultDiv = container.querySelector(\"#wlepki-result\") as HTMLElement;\n    const unitPriceEl = container.querySelector(\"#unit-price\") as HTMLElement;\n    const totalPriceEl = container.querySelector(\"#total-price\") as HTMLElement;\n\n    let currentResult: any = null;\n    let currentInput: WlepkiCalculation | null = null;\n\n    const calculate = () => {\n      const modCheckboxes = container.querySelectorAll(\".wlepki-mod:checked\") as NodeListOf<HTMLInputElement>;\n      const modifiers = Array.from(modCheckboxes).map(cb => cb.value);\n\n      currentInput = {\n        groupId: groupSelect.value,\n        area: parseFloat(areaInput.value) || 0,\n        express: ctx.expressMode,\n        modifiers\n      };\n\n      try {\n        const result = calculateWlepki(currentInput);\n        currentResult = result;\n\n        unitPriceEl.textContent = formatPLN(result.tierPrice);\n        totalPriceEl.textContent = formatPLN(result.totalPrice);\n        resultDiv.style.display = \"block\";\n        addBtn.disabled = false;\n\n        ctx.updateLastCalculated(result.totalPrice, \"Wlepki\");\n      } catch (err) {\n        alert(\"B\u0142\u0105d: \" + (err as Error).message);\n      }\n    };\n\n    calcBtn.addEventListener(\"click\", calculate);\n\n    addBtn.addEventListener(\"click\", () => {\n      if (!currentResult || !currentInput) return;\n\n      const group = tableData.groups.find((g: any) => g.id === currentInput!.groupId);\n\n      const modsLabel = currentInput.modifiers.map(mId => {\n        const m = tableData.modifiers.find((mod: any) => mod.id === mId);\n        return m ? m.name : mId;\n      });\n\n      if (currentInput.express) modsLabel.unshift(\"EXPRESS (+20%)\");\n\n      ctx.cart.addItem({\n        id: `wlepki-${Date.now()}`,\n        category: \"Wlepki / Naklejki\",\n        name: group?.title || \"Wlepki\",\n        quantity: currentInput.area,\n        unit: \"m2\",\n        unitPrice: currentResult.tierPrice,\n        isExpress: !!currentInput.express,\n        totalPrice: currentResult.totalPrice,\n        optionsHint: modsLabel.join(\", \") || \"Standard\",\n        payload: currentResult\n      });\n    });\n  }\n};\n", "{\n  \"name\": \"Roll-up Jednostronny\",\n  \"formats\": {\n    \"85x200\": {\n      \"width\": 0.85,\n      \"height\": 2.0,\n      \"tiers\": [\n        { \"min\": 1, \"max\": 5, \"price\": 290 },\n        { \"min\": 6, \"max\": 10, \"price\": 275 }\n      ]\n    },\n    \"100x200\": {\n      \"width\": 1.0,\n      \"height\": 2.0,\n      \"tiers\": [\n        { \"min\": 1, \"max\": 5, \"price\": 305 },\n        { \"min\": 6, \"max\": 10, \"price\": 285 }\n      ]\n    },\n    \"120x200\": {\n      \"width\": 1.2,\n      \"height\": 2.0,\n      \"tiers\": [\n        { \"min\": 1, \"max\": 5, \"price\": 330 },\n        { \"min\": 6, \"max\": 10, \"price\": 310 }\n      ]\n    },\n    \"150x200\": {\n      \"width\": 1.5,\n      \"height\": 2.0,\n      \"tiers\": [\n        { \"min\": 1, \"max\": 5, \"price\": 440 },\n        { \"min\": 6, \"max\": 10, \"price\": 425 }\n      ]\n    }\n  },\n  \"replacement\": {\n    \"labor\": 50,\n    \"print_per_m2\": 80\n  }\n}\n", "import data from \"../../data/normalized/roll-up.json\";\nimport { calculatePrice } from \"../core/pricing\";\nimport { PriceTable, CalculationResult } from \"../core/types\";\n\nexport interface RollUpOptions {\n  format: string;\n  qty: number;\n  isReplacement: boolean;\n  express: boolean;\n}\n\nexport function calculateRollUp(options: RollUpOptions): CalculationResult {\n  const formatData = (data.formats as any)[options.format];\n  if (!formatData) {\n    throw new Error(`Unknown format: ${options.format}`);\n  }\n\n  let priceTable: PriceTable;\n\n  if (options.isReplacement) {\n    const area = formatData.width * formatData.height;\n    const pricePerSzt = (area * data.replacement.print_per_m2) + data.replacement.labor;\n\n    priceTable = {\n      id: \"roll-up-replacement\",\n      title: `Wymiana wk\u0142adu (${options.format})`,\n      unit: \"szt\",\n      pricing: \"per_unit\",\n      tiers: [{ min: 1, max: null, price: pricePerSzt }],\n      modifiers: [\n        { id: \"express\", name: \"EXPRESS\", type: \"percent\", value: 0.20 }\n      ]\n    };\n  } else {\n    priceTable = {\n      id: \"roll-up-full\",\n      title: `Roll-up Komplet (${options.format})`,\n      unit: \"szt\",\n      pricing: \"per_unit\",\n      tiers: formatData.tiers,\n      modifiers: [\n        { id: \"express\", name: \"EXPRESS\", type: \"percent\", value: 0.20 }\n      ]\n    };\n  }\n\n  const activeModifiers: string[] = [];\n  if (options.express) {\n    activeModifiers.push(\"express\");\n  }\n\n  return calculatePrice(priceTable, options.qty, activeModifiers);\n}\n", "import { View, ViewContext } from \"../types\";\nimport { calculateRollUp, RollUpOptions } from \"../../categories/roll-up\";\nimport { formatPLN } from \"../../core/money\";\n\nexport const RollUpView: View = {\n  id: \"roll-up\",\n  name: \"Roll-up\",\n  async mount(container, ctx) {\n    const response = await fetch(\"categories/roll-up.html\");\n    container.innerHTML = await response.text();\n\n    const typeSel = container.querySelector(\"#rollUpType\") as HTMLSelectElement;\n    const formatSel = container.querySelector(\"#rollUpFormat\") as HTMLSelectElement;\n    const qtyInput = container.querySelector(\"#rollUpQty\") as HTMLInputElement;\n    const calcBtn = container.querySelector(\"#calcBtn\") as HTMLButtonElement;\n    const addToCartBtn = container.querySelector(\"#addToCartBtn\") as HTMLButtonElement;\n    const resultArea = container.querySelector(\"#rollUpResult\") as HTMLElement;\n\n    const calculate = () => {\n      const options: RollUpOptions = {\n        format: formatSel.value,\n        qty: parseInt(qtyInput.value) || 1,\n        isReplacement: typeSel.value === \"replacement\",\n        express: ctx.expressMode\n      };\n\n      const result = calculateRollUp(options);\n\n      resultArea.style.display = \"block\";\n      (container.querySelector(\"#resUnitPrice\") as HTMLElement).textContent = formatPLN(result.totalPrice / options.qty);\n      (container.querySelector(\"#resTotalPrice\") as HTMLElement).textContent = formatPLN(result.totalPrice);\n      (container.querySelector(\"#resExpressHint\") as HTMLElement).style.display = options.express ? \"block\" : \"none\";\n\n      ctx.updateLastCalculated(result.totalPrice, \"Roll-up\");\n      return { options, result };\n    };\n\n    calcBtn.addEventListener(\"click\", () => calculate());\n\n    addToCartBtn.addEventListener(\"click\", () => {\n      const { options, result } = calculate();\n\n      ctx.cart.addItem({\n        id: `rollup-${Date.now()}`,\n        category: \"Roll-up\",\n        name: `${options.isReplacement ? 'Wymiana wk\u0142adu' : 'Roll-up Komplet'} ${options.format}`,\n        quantity: options.qty,\n        unit: \"szt\",\n        unitPrice: result.totalPrice / options.qty,\n        isExpress: options.express,\n        totalPrice: result.totalPrice,\n        optionsHint: `${options.format}, ${options.qty} szt`,\n        payload: options\n      });\n    });\n\n    // Initial calculation\n    calculate();\n  }\n};\n", "import { CategoryModule, CategoryContext } from \"../ui/router\";\n\nexport async function loadCategoryHTML(filename: string): Promise<string> {\n  const response = await fetch(`./categories/${filename}`);\n  if (!response.ok) throw new Error(`Failed to load ${filename}`);\n  return response.text();\n}\n\nexport function createHTMLCategory(\n  id: string,\n  name: string,\n  filename: string\n): CategoryModule {\n  return {\n    id,\n    name,\n    mount: async (container: HTMLElement, ctx: CategoryContext) => {\n      container.innerHTML = '<div style=\"padding: 20px; text-align: center; color: #999;\">\u23F3 \u0141adowanie kategorii...</div>';\n      \n      try {\n        const html = await loadCategoryHTML(filename);\n        container.innerHTML = html;\n        \n        // Re-attach event listeners if needed\n        attachCategoryEventListeners(container, ctx);\n      } catch (error) {\n        container.innerHTML = `\n          <div style=\"padding: 40px; text-align: center; color: #e74c3c;\">\n            \u274C B\u0142\u0105d \u0142adowania kategorii: ${name}\n            <br><small>${error}</small>\n          </div>\n        `;\n        console.error('Category load error:', error);\n      }\n    }\n  };\n}\n\nfunction attachCategoryEventListeners(container: HTMLElement, ctx: CategoryContext) {\n  // Znajd\u017A wszystkie buttony \"Dodaj do listy\" lub \"Oblicz\"\n  const buttons = container.querySelectorAll('button[data-action]');\n  \n  buttons.forEach(btn => {\n    const action = btn.getAttribute('data-action');\n    \n    if (action === 'calculate') {\n      btn.addEventListener('click', () => {\n        // Logika obliczania ceny\n        console.log('Calculate clicked');\n      });\n    }\n    \n    if (action === 'add-to-basket') {\n      btn.addEventListener('click', () => {\n        // Logika dodawania do koszyka\n        ctx.addToBasket({\n          category: container.getAttribute('data-category-id') || 'unknown',\n          price: parseFloat(container.getAttribute('data-price') || '0'),\n          description: container.getAttribute('data-description') || ''\n        });\n      });\n    }\n  });\n}\n", "import { sampleCategory } from \"./sample\";\nimport { plakatyCategory } from \"./plakaty\";\nimport { voucheryCategory } from \"./vouchery\";\nimport { DyplomyView as dyplomyCategory } from \"../ui/views/dyplomy\";\nimport { WizytowkiView as wizytowyCategory } from \"../ui/views/wizytowki-druk-cyfrowy\";\nimport { ZaproszeniaKredaView as zaproszeniaKredaCategory } from \"../ui/views/zaproszenia-kreda\";\nimport { UlotkiDwustronneView as ulotkiDwustronneCategory } from \"../ui/views/ulotki-cyfrowe-dwustronne\";\nimport { UlotkiJednostronneView as ulotkiJednostronneCategory } from \"../ui/views/ulotki-cyfrowe-jednostronne\";\nimport { BannerView as banneryCategory } from \"../ui/views/banner\";\nimport { WlepkiView as wlepkiCategory } from \"../ui/views/wlepki-naklejki\";\nimport { RollUpView as rollupCategory } from \"../ui/views/roll-up\";\nimport { createHTMLCategory } from \"./loader\";\n\nexport const categories = [\n  // Istniej\u0105ce kategorie JS\n  sampleCategory,\n  plakatyCategory,\n  voucheryCategory,\n  dyplomyCategory,\n  wizytowyCategory,\n  zaproszeniaKredaCategory,\n  ulotkiDwustronneCategory,\n  ulotkiJednostronneCategory,\n  banneryCategory,\n  wlepkiCategory,\n  rollupCategory,\n  \n  // Nowe kategorie z HTML\n  createHTMLCategory('druk-a4-a3-skan', '\uD83D\uDCC4 Druk A4/A3 + skan', 'druk-a4-a3-skan.html'),\n  createHTMLCategory('druk-a4-a3', '\uD83D\uDCC4 Druk A4/A3', 'druk-a4-a3.html'),\n  createHTMLCategory('cad-ops', '\uD83D\uDDFA\uFE0F CAD OPS', 'cad-ops.html'),\n  createHTMLCategory('druk-cad', '\uD83D\uDDFA\uFE0F Druk CAD', 'druk-cad.html'),\n  createHTMLCategory('folia-szroniona', '\u2728 Folia Szroniona', 'folia-szroniona.html'),\n  createHTMLCategory('laminowanie', '\uD83D\uDD12 Laminowanie', 'laminowanie.html'),\n];\n", "import { Router } from \"./router\";\nimport { ViewContext } from \"./types\";\nimport { SolwentPlakatyView } from \"./views/solwent-plakaty\";\nimport { VoucheryView } from \"./views/vouchery\";\nimport { DyplomyView } from \"./views/dyplomy\";\nimport { WizytowkiView } from \"./views/wizytowki-druk-cyfrowy\";\nimport { RollUpView } from \"./views/roll-up\";\nimport { ZaproszeniaKredaView } from \"./views/zaproszenia-kreda\";\nimport { UlotkiDwustronneView } from \"./views/ulotki-cyfrowe-dwustronne\";\nimport { UlotkiJednostronneView } from \"./views/ulotki-cyfrowe-jednostronne\";\nimport { BannerView } from \"./views/banner\";\nimport { WlepkiView } from \"./views/wlepki-naklejki\";\nimport { DrukA4A3SkanView } from \"./views/druk-a4-a3\";\nimport { DrukCADView } from \"./views/druk-cad\";\nimport { FoliaSzronionaView } from \"./views/folia-szroniona\";\nimport { LaminowanieView } from \"./views/laminowanie\";\nimport { CadOpsView } from \"./views/cad-ops\";\nimport { formatPLN } from \"../core/money\";\nimport { Cart } from \"../core/cart\";\nimport { downloadExcel } from \"./excel\";\nimport { CustomerData } from \"../core/types\";\nimport categories from \"../../data/categories.json\";\nimport { categories as categoryModules } from \"../categories/index\";\n\nconst cart = new Cart();\n\nfunction updateCartUI() {\n  const listEl = document.getElementById(\"basketList\");\n  const totalEl = document.getElementById(\"basketTotal\");\n  const debugEl = document.getElementById(\"basketDebug\");\n\n  if (!listEl || !totalEl || !debugEl) return;\n\n  const items = cart.getItems();\n\n  if (items.length === 0) {\n    listEl.innerHTML = `\n      <div class=\"basketItem\">\n        <div>\n          <div class=\"basketTitle\">Brak pozycji</div>\n          <div class=\"basketMeta\">Kliknij \u201EDodaj\u201D, aby zbudowa\u0107 list\u0119.</div>\n        </div>\n        <div class=\"basketPrice\">\u2014</div>\n      </div>\n    `;\n  } else {\n    listEl.innerHTML = items.map((item, idx) => `\n      <div class=\"basketItem\">\n        <div style=\"min-width:0;\">\n          <div class=\"basketTitle\">${item.category}: ${item.name}</div>\n          <div class=\"basketMeta\">${item.optionsHint} (${item.quantity} ${item.unit})</div>\n        </div>\n        <div style=\"display:flex; gap:10px; align-items:center;\">\n          <div class=\"basketPrice\">${formatPLN(item.totalPrice)}</div>\n          <button class=\"iconBtn\" onclick=\"window.removeItem(${idx})\" title=\"Usu\u0144\">\u00D7</button>\n        </div>\n      </div>\n    `).join(\"\");\n  }\n\n  const total = cart.getGrandTotal();\n  totalEl.innerText = formatPLN(total);\n  debugEl.innerText = JSON.stringify(items.map(i => i.payload), null, 2);\n}\n\n// Global exposure for the 'onclick' in generated HTML\n(window as any).removeItem = (idx: number) => {\n  cart.removeItem(idx);\n  updateCartUI();\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const viewContainer = document.getElementById(\"viewContainer\");\n  const categorySelector = document.getElementById(\"categorySelector\") as HTMLSelectElement;\n  const categorySearch = document.getElementById(\"categorySearch\") as HTMLInputElement;\n  const globalExpress = document.getElementById(\"globalExpress\") as HTMLInputElement;\n\n  if (!viewContainer || !categorySelector || !globalExpress || !categorySearch) return;\n\n  const getCtx = (): ViewContext => ({\n    cart: {\n      addItem: (item) => {\n        cart.addItem(item);\n        updateCartUI();\n      }\n    },\n    addToBasket: (item) => {\n      cart.addItem({\n        id: `item-${Date.now()}`,\n        category: item.category,\n        name: item.description || \"Produkt\",\n        quantity: 1,\n        unit: \"szt.\",\n        unitPrice: item.price,\n        isExpress: globalExpress.checked,\n        totalPrice: item.price,\n        optionsHint: item.description || \"\",\n        payload: item\n      });\n      updateCartUI();\n    },\n    expressMode: globalExpress.checked,\n    updateLastCalculated: (price, hint) => {\n      const currentPriceEl = document.getElementById(\"currentPrice\");\n      const currentHintEl = document.getElementById(\"currentHint\");\n      if (currentPriceEl) currentPriceEl.innerText = formatPLN(price);\n      if (currentHintEl) currentHintEl.innerText = hint ? `(${hint})` : \"\";\n    }\n  });\n\n  const router = new Router(viewContainer, getCtx);\n  router.setCategories(categories);\n  \n  // Register all categories from the index\n  categoryModules.forEach(module => {\n    router.addRoute(module);\n  });\n\n  // Populate category selector\n  categories.forEach(cat => {\n    const opt = document.createElement(\"option\");\n    opt.value = cat.id;\n    opt.innerText = `${cat.icon} ${cat.name}`;\n    if (!cat.implemented) {\n      opt.disabled = true;\n      opt.innerText += \" (wkr\u00F3tce)\";\n    }\n    categorySelector.appendChild(opt);\n  });\n\n  categorySelector.addEventListener(\"change\", () => {\n    const val = categorySelector.value;\n    if (val) {\n      window.location.hash = `#/${val}`;\n    } else {\n      window.location.hash = \"#/\";\n    }\n  });\n\n  categorySearch.addEventListener(\"input\", () => {\n    const filter = categorySearch.value.toLowerCase();\n    const options = Array.from(categorySelector.options);\n    options.forEach((opt, idx) => {\n      if (idx === 0) return; // Skip \"Wybierz kategori\u0119...\"\n      const text = opt.text.toLowerCase();\n      (opt as any).hidden = !text.includes(filter);\n    });\n  });\n\n  categorySearch.addEventListener(\"keydown\", (e) => {\n    if (e.key === \"Enter\") {\n      const filter = categorySearch.value.toLowerCase();\n      const firstVisible = Array.from(categorySelector.options).find((opt, idx) => {\n        return idx > 0 && !(opt as any).hidden && !(opt as any).disabled;\n      });\n      if (firstVisible) {\n        categorySelector.value = firstVisible.value;\n        window.location.hash = `#/${firstVisible.value}`;\n        categorySearch.value = \"\";\n      }\n    }\n  });\n\n  // Keep selector in sync with hash\n  window.addEventListener(\"hashchange\", () => {\n    const hash = window.location.hash || \"#/\";\n    const path = hash.slice(2); // remove #/\n    categorySelector.value = path;\n  });\n\n  // Re-render view when express mode changes\n  globalExpress.addEventListener(\"change\", () => {\n    // Triger route refresh\n    const currentHash = window.location.hash;\n    window.location.hash = \"\";\n    window.location.hash = currentHash;\n  });\n\n  // Clear basket\n  document.getElementById(\"clearBtn\")?.addEventListener(\"click\", () => {\n    cart.clear();\n    updateCartUI();\n  });\n\n  // Excel download\n  document.getElementById(\"sendBtn\")?.addEventListener(\"click\", () => {\n    const customer: CustomerData = {\n      name: (document.getElementById(\"custName\") as HTMLInputElement).value || \"Anonim\",\n      phone: (document.getElementById(\"custPhone\") as HTMLInputElement).value || \"-\",\n      email: (document.getElementById(\"custEmail\") as HTMLInputElement).value || \"-\",\n      priority: (document.getElementById(\"custPriority\") as HTMLSelectElement).value\n    };\n\n    if (cart.isEmpty()) {\n      alert(\"Lista jest pusta!\");\n      return;\n    }\n\n    downloadExcel(cart.getItems(), customer);\n  });\n\n  updateCartUI();\n  router.start();\n});\n\n// Service Worker Registration\nif (\"serviceWorker\" in navigator) {\n  window.addEventListener(\"load\", () => {\n    navigator.serviceWorker.register(\"./sw.js\")\n      .then(reg => console.log(\"SW registered\", reg))\n      .catch(err => console.error(\"SW failed\", err));\n  });\n}\n"],
  "mappings": "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",
  "names": ["Router", "container", "getCtx", "categories", "view", "path", "cat", "formatPLN", "amount", "Cart", "saved", "e", "item", "index", "sum", "downloadExcel", "cartItems", "customer", "data", "item", "worksheet", "workbook", "date", "filename", "categories_default", "sampleCategory", "container", "ctx", "addBtn", "qtyInput", "qty", "price", "formatPLN", "findTier", "tiers", "quantity", "sorted", "b", "tier", "t", "nextTier", "applyMinimumRule", "rules", "m2Rule", "r", "calculatePrice", "table", "activeModifierIds", "effectiveQuantity", "basePrice", "modifiersTotal", "appliedModifiers", "modId", "modifier", "m", "totalPrice", "plnRule", "solwent_plakaty_200g_default", "plakatyCategory", "container", "ctx", "table", "solwent_plakaty_200g_default", "qtyInput", "expressCheck", "resultEl", "addBtn", "update", "qty", "mods", "res", "calculatePrice", "formatPLN", "voucheryCategory", "dyplomy_default", "calculateDyplomy", "options", "qty", "sides", "isSatin", "express", "priceTable", "dyplomy_default", "sortedTiers", "a", "b", "selectedTier", "tier", "basePrice", "modifiers", "modifiersTotal", "appliedModifiers", "mod", "totalPrice", "DyplomyView", "container", "ctx", "response", "sidesSel", "qtyInput", "satinCheck", "calcBtn", "addToCartBtn", "resultArea", "calculate", "options", "result", "calculateDyplomy", "formatPLN", "pickNearestCeilKey", "table", "qty", "keys", "a", "b", "k", "x", "BIZ", "calculateBusinessCards", "options", "table", "BIZ", "qtyBilled", "pickNearestCeilKey", "total", "quoteWizytowki", "options", "family", "size", "lam", "finish", "res", "calculateBusinessCards", "totalPrice", "WizytowkiView", "container", "ctx", "familySelect", "standardOpts", "deluxeOpts", "finishSelect", "sizeSelect", "lamSelect", "deluxeOptSelect", "qtyInput", "calculateBtn", "addToCartBtn", "resultDisplay", "totalPriceSpan", "billedQtyHint", "expressHint", "isDeluxe", "currentResult", "currentOptions", "result", "quoteWizytowki", "formatPLN", "err", "name", "expressLabel", "zaproszenia_kreda_default", "calculateZaproszeniaKreda", "options", "format", "qty", "sides", "isFolded", "isSatin", "express", "formatData", "zaproszenia_kreda_default", "sidesKey", "typeKey", "priceTable", "sortedTiers", "a", "b", "selectedTier", "tier", "basePrice", "modifiers", "modifiersTotal", "appliedModifiers", "mod", "totalPrice", "ZaproszeniaKredaView", "container", "ctx", "response", "formatSel", "sidesSel", "foldedCheck", "qtyInput", "satinCheck", "calcBtn", "addToCartBtn", "resultArea", "calculate", "options", "result", "calculateZaproszeniaKreda", "formatPLN", "ulotki_cyfrowe_dwustronne_default", "getUlotkiDwustronneTable", "formatKey", "formatData", "ulotki_cyfrowe_dwustronne_default", "quoteUlotkiDwustronne", "options", "table", "activeModifiers", "calculatePrice", "UlotkiDwustronneView", "container", "ctx", "response", "err", "formatSelect", "qtySelect", "calculateBtn", "addToCartBtn", "resultDisplay", "totalPriceSpan", "expressHint", "currentResult", "currentOptions", "result", "quoteUlotkiDwustronne", "formatPLN", "expressLabel", "ulotki_cyfrowe_jednostronne_default", "getUlotkiJednostronneTable", "formatKey", "formatData", "ulotki_cyfrowe_jednostronne_default", "quoteJednostronne", "options", "table", "activeModifiers", "calculatePrice", "UlotkiJednostronneView", "container", "ctx", "response", "err", "formatSelect", "qtySelect", "calculateBtn", "addToCartBtn", "resultDisplay", "totalPriceSpan", "expressHint", "currentResult", "currentOptions", "result", "quoteJednostronne", "formatPLN", "expressLabel", "banner_default", "calculateBanner", "options", "tableData", "banner_default", "materialData", "m", "priceTable", "activeModifiers", "calculatePrice", "BannerView", "container", "ctx", "response", "err", "materialSelect", "areaInput", "oczkowanieCheckbox", "calculateBtn", "addToCartBtn", "resultDisplay", "unitPriceSpan", "totalPriceSpan", "expressHint", "currentResult", "currentOptions", "result", "calculateBanner", "formatPLN", "matName", "opts", "wlepki_naklejki_exports", "__export", "category", "wlepki_naklejki_default", "groups", "modifiers", "calculateWlepki", "input", "tableData", "wlepki_naklejki_exports", "groupData", "g", "priceTable", "activeModifiers", "calculatePrice", "WlepkiView", "container", "ctx", "tableData", "wlepki_naklejki_exports", "response", "err", "groupSelect", "areaInput", "calcBtn", "addBtn", "resultDiv", "unitPriceEl", "totalPriceEl", "currentResult", "currentInput", "calculate", "modCheckboxes", "modifiers", "cb", "result", "calculateWlepki", "formatPLN", "group", "g", "modsLabel", "mId", "m", "mod", "roll_up_default", "calculateRollUp", "options", "formatData", "roll_up_default", "priceTable", "pricePerSzt", "activeModifiers", "calculatePrice", "RollUpView", "container", "ctx", "response", "typeSel", "formatSel", "qtyInput", "calcBtn", "addToCartBtn", "resultArea", "calculate", "options", "result", "calculateRollUp", "formatPLN", "loadCategoryHTML", "filename", "response", "createHTMLCategory", "id", "name", "container", "ctx", "html", "attachCategoryEventListeners", "error", "btn", "action", "categories", "sampleCategory", "plakatyCategory", "voucheryCategory", "DyplomyView", "WizytowkiView", "ZaproszeniaKredaView", "UlotkiDwustronneView", "UlotkiJednostronneView", "BannerView", "WlepkiView", "RollUpView", "createHTMLCategory", "cart", "Cart", "updateCartUI", "listEl", "totalEl", "debugEl", "items", "item", "idx", "formatPLN", "total", "i", "viewContainer", "categorySelector", "categorySearch", "globalExpress", "getCtx", "price", "hint", "currentPriceEl", "currentHintEl", "router", "Router", "categories_default", "categories", "module", "cat", "opt", "val", "filter", "text", "e", "firstVisible", "path", "currentHash", "customer", "downloadExcel", "reg", "err"]
}
