<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kalkulator â€“ Studio Raz Druku Dwa</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  <div class="wrap">
    <header style="display: flex; justify-content: space-between; align-items: center;">
      <div>
        <h1>Kalkulator â€“ Studio Raz Druku Dwa</h1>
        <p class="small">Wybierz kategoriÄ™ â†’ Oblicz â†’ Dodaj do listy â†’ Pobierz Excel.</p>
      </div>
      <button id="settings-btn" title="Ustawienia" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #94a3b8; padding: 10px; transition: color 0.2s;">âš™ï¸</button>
    </header>

    <main class="app-container">

      <!-- LEFT COLUMN: Categories -->
      <div class="main-content">
        <div class="card" style="margin-bottom: 20px;">
          <div style="display: flex; gap: 10px;">
            <select id="categorySelector" style="flex: 1;">
              <option value="">ğŸŒŸ Wybierz kategoriÄ™...</option>
            </select>
            <input id="categorySearch" placeholder="ğŸ” Szukaj..." style="flex: 1;">
          </div>
        </div>

        <div id="viewContainer">
          <!-- SPA Content -->
        </div>
      </div>

      <!-- RIGHT COLUMN: Basket/Summary -->
      <aside class="sidebar">

        <div class="summary-panel">
          <h3>Podsumowanie</h3>

          <div class="summary-row">
            <span>Ostatnio obliczone <small id="currentHint"></small></span>
            <strong id="last-calculated">0,00 zÅ‚</strong>
          </div>

          <div class="summary-row" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #444;">
            <span>Suma listy</span>
            <strong id="basket-total" style="font-size: 24px; color: #667eea;">0,00 zÅ‚</strong>
          </div>

          <div id="basket-items" style="margin: 20px 0; max-height: 400px; overflow-y: auto;">
            <p style="color: #999; text-align: center; padding: 20px;">
              Brak pozycji<br>
              <small>Kliknij â€Dodaj", aby zbudowaÄ‡ listÄ™.</small>
            </p>
          </div>

          <button id="clear-basket" class="btn-danger" style="width: 100%;">
            WyczyÅ›Ä‡ listÄ™
          </button>
        </div>

        <div class="order-form">
          <h3>ğŸ§¾ Dane ZamÃ³wienia</h3>
          <p style="color: #999; font-size: 13px; margin-bottom: 15px;">
            Podaj dane do arkusza Excel.
          </p>

          <div class="form-group">
            <label>ImiÄ™ i Nazwisko / Firma</label>
            <input type="text" id="client-name" placeholder="Jan Kowalski">
          </div>

          <div class="form-group">
            <label>Telefon</label>
            <input type="tel" id="client-phone" placeholder="+48 ...">
          </div>

          <div class="form-group">
            <label>E-mail</label>
            <input type="email" id="client-email" placeholder="klient@przyklad.pl">
          </div>

          <div class="form-group">
            <label>Priorytet</label>
            <select id="priority">
              <option value="normalny">Normalny</option>
              <option value="wysoki">Wysoki</option>
              <option value="pilny">Pilny</option>
            </select>
          </div>

          <label style="display: flex; align-items: center; gap: 8px; margin: 15px 0; cursor: pointer;">
            <input type="checkbox" id="tryb-express">
            <span>â†’ Tryb EXPRESS (+20%)</span>
          </label>

          <button id="export-excel" class="btn-success" style="width: 100%;">
            ğŸ“¥ Pobierz Excel
          </button>

          <button id="copy-json" class="btn-primary" style="width: 100%; margin-top: 10px;">
            Kopiuj JSON listy
          </button>

          <details style="margin-top: 15px;">
            <summary style="cursor: pointer; color: #667eea;">â–¶ SzczegÃ³Å‚y bieÅ¼Ä…cej pozycji (JSON)</summary>
            <pre id="json-preview" style="background: #1a1a1a; padding: 10px; border-radius: 8px; overflow-x: auto; font-size: 11px; margin-top: 10px;">{}</pre>
          </details>
        </div>

      </aside>
    </main>
  </div>

  <!-- PIN Modal -->
  <div id="pin-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <h3>ğŸ”’ DostÄ™p zabezpieczony</h3>
      <p>Podaj PIN, aby wejÅ›Ä‡ do ustawieÅ„:</p>
      <input type="password" id="pin-input" maxlength="4" placeholder="****" style="text-align: center; font-size: 24px; letter-spacing: 10px; margin: 20px 0;">
      <div id="pin-error" style="color: #ef4444; margin-bottom: 10px; display: none;">BÅ‚Ä™dny PIN!</div>
      <div style="display: flex; gap: 10px;">
        <button id="pin-cancel" class="btn-secondary" style="flex: 1;">Anuluj</button>
        <button id="pin-submit" class="btn-primary" style="flex: 1;">WejdÅº</button>
      </div>
    </div>
  </div>

  <script src="assets/app.js" type="module"></script>
</body>
</html>
