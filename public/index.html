<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kalkulator – Studio Raz Druku Dwa</title>
  <link rel="stylesheet" href="assets/styles.css" />
  <style>
    /* Additional styles for category search */
    .search-wrap {
      margin-bottom: 20px;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .search-select {
      flex-grow: 1;
    }
    .express-toggle {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      font-weight: 800;
      color: var(--ok);
      cursor: pointer;
    }
  </style>
</head>

<body>
<div class="wrap">
  <header>
    <div>
      <h1>Kalkulator – Studio Raz Druku Dwa</h1>
      <p class="small">Oblicz → Dodaj do listy → Wyślij listę do arkusza.</p>
    </div>
    <div class="express-toggle">
      <input type="checkbox" id="globalExpress" style="width: auto;">
      <label for="globalExpress">TRYB EXPRESS (+20%)</label>
    </div>
  </header>

  <div class="search-wrap card">
    <div class="search-select">
      <input type="text" id="categorySearch" placeholder="Szukaj kategorii..." style="margin-bottom: 8px;">
      <select id="categorySelector">
        <option value="">Wybierz kategorię...</option>
        <option value="sample">Sample Category</option>
        <option value="solwent-plakaty">Solwent - Plakaty</option>
      </select>
    </div>
  </div>

  <div class="grid">
    <!-- LEFT: VIEW CONTAINER -->
    <main id="viewContainer" class="card">
      <p>Proszę wybrać kategorię powyżej...</p>
    </main>

    <!-- RIGHT: PERSISTENT CART/SUMMARY -->
    <div class="card">
      <h2>Podsumowanie</h2>

      <div class="summary">
        <div class="sumRow">
          <div class="k">Ostatnio obliczone <span class="pill" id="currentHint"></span></div>
          <div class="v"><span id="currentPrice">0.00</span> zł</div>
        </div>
        <div class="sumRow total">
          <div class="k">Suma listy</div>
          <div class="v"><span id="basketTotal">0.00</span> zł</div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="basket">
        <div class="basketList" id="basketList">
          <div class="basketItem">
            <div>
              <div class="basketTitle">Brak pozycji</div>
              <div class="basketMeta">Kliknij „Dodaj”, aby zbudować listę.</div>
            </div>
            <div class="basketPrice">—</div>
          </div>
        </div>

        <div class="actions">
          <button id="clearBtn" class="danger">Wyczyść listę</button>
        </div>

        <div class="divider"></div>

        <details>
          <summary>Ustawienia wysyłki</summary>
          <div class="hint" style="margin-top:8px;">Wklej URL z wdrożenia Apps Script (Web App).</div>
          <input id="webAppUrl" type="text" placeholder="https://script.google.com/macros/s/.../exec" />
        </details>

        <div class="actions">
          <button id="sendBtn" class="success">Wyślij listę do arkusza</button>
          <button id="copyBtn">Kopiuj JSON listy</button>
          <span id="sendStatus" class="status"></span>
        </div>

        <details style="margin-top:10px;">
          <summary>Szczegóły listy (JSON)</summary>
          <pre id="basketDebug">[]</pre>
        </details>
      </div>
    </div>
  </div>
</div>
<script type="module" src="assets/app.js"></script>
</body>
</html>
